
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>Lambdas-Java 8:新特性教程(Java 8: The Missing Tutorial)</title>
<meta content='Lambdas,Java 8:新特性教程,Java 8: The Missing Tutorial' name='keywords'>
<meta content='Lambdas,Java 8:新特性教程,Java 8: The Missing Tutorial' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../static/components/css/base.css">
<link rel="stylesheet" href="../../static/components/css/reader.css">
<link rel="stylesheet" href="../../static/components/css/markdown.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../book/66/01-default-static-interface-methods.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">Default and..</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../book/66/03-streams.html">
<span class="">Streams</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../book/66/index.html">Java 8:新特性教程 (Java 8: The Missing Tutorial)</a>
<a target="_blank" rel="nofollow" href="https://github.com/shekhargulati/java8-the-missing-tutorial" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  md-content-section  uk-margin-bottom">
<h2 id="lambdas">Lambdas</h2>
<p>One of the most important features in Java 8 is the introduction of Lambda expressions. They make your code concise and allow you to pass behavior around. For some time now, Java has been criticized for being verbose and for lacking functional programming capabilities. With functional programming becoming more popular and relevant, Java is forced to embrace the functional style of programming. Otherwise, Java would become irrelevant.</p>
<p>Java 8 is a big step forward in making the world's most popular language adopt the functional style of programming. To support a functional programming style, the language must support functions as first class citizens. Prior to Java 8, writing a clean functional style code was not possible without the use of an anonymous inner class boilerplate. With the introduction of Lambda expressions, functions have become first class citizens and they can be passed around just like any other variable.</p>
<p>Lambda expressions allow you to define an anonymous function that is not bound to an identifier. You can use them like any other construct in your programming language, like variable declaration. Lambda expressions are required if a programming language needs to support higher order functions. Higher order functions are functions that either accept other functions as arguments or returns a function as a result.</p>
<blockquote>
<p>Code for this section is inside <a href="https://github.com/shekhargulati/java8-the-missing-tutorial/tree/master/code/src/main/java/com/shekhargulati/java8_tutorial/ch02">ch02 package</a>.</p>
</blockquote>
<p>Now, with the introduction of Lambda expressions in Java 8, Java supports higher order functions. Let us look at the canonical example of Lambda expression -- a sort function in Java's <code>Collections</code> class. The <code>sort</code> function has two variants -- one that takes a <code>List</code> and another that takes a <code>List</code> and a <code>Comparator</code>. The second <code>sort</code> function is an example of a Higher order function that accepts a lambda expression as shown below in the code snippet.</p>
<pre><code class="language-java">List&lt;String&gt; names = Arrays.asList("shekhar", "rahul", "sameer");
Collections.sort(names, (first, second) -&gt; first.length() - second.length());
</code></pre>
<p>The code shown above sorts the <code>names</code> by their length. The output of the program will be as shown below.</p>
<pre><code>[rahul, sameer, shekhar]
</code></pre>
<p>The expression <code>(first, second) -&gt; first.length() - second.length()</code> shown above in the code snippet is a lambda expression of type <code>Comparator&lt;String&gt;</code>.</p>
<ul>
<li>The <code>(first, second)</code> are parameters of the <code>compare</code> method of <code>Comparator</code>.</li>
<li><code>first.length() - second.length()</code> is the function body that compares the length of two names.</li>
<li><code>-&gt;</code> is the lambda operator that separates parameters from the body of the lambda.</li>
</ul>
<p>Before we dig deeper into Java 8 Lambdas support, let's look into their history to understand why they exist.</p>
<h2 id="history-of-lambdas">History of Lambdas</h2>
<p>Lambda expressions have their roots in the Lambda Calculus. <a href="https://en.wikipedia.org/wiki/Lambda_calculus">Lambda calculus</a> originated from the work of <a href="https://en.wikipedia.org/wiki/Alonzo_Church">Alonzo Church</a> on formalizing the concept of expressing computation with functions. Lambda calculus is a Turing complete, mathematically formal way to express computations. Turing complete means you can express any mathematical computation via lambdas.</p>
<p>Lambda calculus became the basis for a strong, theoretical foundation of functional programming languages. Many popular functional programming languages like Haskell and Lisp are based on Lambda calculus. The idea of higher order functions, i.e. a function accepting other functions, came from Lambda calculus.</p>
<p>The main concept in Lambda calculus is the expression. An expression can be expressed as:</p>
<pre><code>&lt;expression&gt; := &lt;variable&gt; | &lt;function&gt;| &lt;application&gt;
</code></pre>
<ul>
<li><strong>variable</strong> -- A variable is a placeholder like x, y, z for values like 1, 2, etc, or lambda functions.</li>
<li><strong>function</strong> -- It is an anonymous function definition that takes one variable and produces another lambda expression. For example, <code>λx.x*x</code> is a function to compute square of a number.</li>
<li><strong>application</strong> -- This is the act of applying a function to an argument. Suppose you want a square of 10, so in lambda calculus you will write a square function <code>λx.x*x</code> and apply it to 10. This function application would result in <code>(λx.x*x) 10 = 10*10 = 100</code>.You can not only apply simple values like 10 but, you can apply a function to another function to produce another function. For example, <code>(λx.x*x) (λz.z+10)</code> will produce a function <code>λz.(z+10)*(z+10)</code>. Now, you can use this function to produce number plus 10 squares. This is an example of higher order function.</li>
</ul>
<p>Now, you understand Lambda calculus and its impact on functional programming languages. Let's learn how it is implemented in Java 8.</p>
<h2 id="passing-behavior-before-java-8">Passing behavior before Java 8</h2>
<p>Before Java 8, the only way to pass behavior was to use anonymous classes. Suppose you want to send an email in another thread after user registration. Before Java 8, you would write code like one shown below.</p>
<pre><code class="language-java">sendEmail(new Runnable() {
            @Override
            public void run() {
                System.out.println("Sending email...");
            }
        });
</code></pre>
<p>Where the <code>sendEmail</code> method has following method signature.</p>
<pre><code class="language-java">public static void sendEmail(Runnable runnable)
</code></pre>
<p>The problem with the above mentioned code is not only that we have to encapsulate our action, i.e. <code>run</code> method in an object, but, the bigger problem is that it misses the programmer's intent, i.e. to pass behavior to the <code>sendEmail</code> function. If you have used libraries like Guava, you would have certainly felt the pain of writing anonymous classes. A simple example of filtering all the tasks with <strong>lambda</strong> in their title is shown below.</p>
<pre><code class="language-java">Iterable&lt;Task&gt; lambdaTasks = Iterables.filter(tasks, new Predicate&lt;Task&gt;() {
            @Override
            public boolean apply(Task task) {
                return input.getTitle().contains("lambda");
            }
});
</code></pre>
<p>With Java 8 Stream API, you can write the above mentioned code without the use of a third party library like Guava. We will cover streams in <a href="./03-streams.html">chapter 3</a>. So, stay tuned!</p>
<h2 id="java-8-lambda-expressions">Java 8 Lambda expressions</h2>
<p>In Java 8, we would write the code using a lambda expression as shown below. We have mentioned the same example in the code snippet above.</p>
<pre><code class="language-java">sendEmail(() -&gt; System.out.println("Sending email..."));
</code></pre>
<p>The code shown above is concise and does not pollute the programmer's intent to pass behavior. <code>()</code> is used to represent that the lambda has no function parameters, i.e. <code>Runnable</code> interface <code>run</code> method does not have any parameters. <code>-&gt;</code> is the lambda operator that separates the parameters from the function body which prints <code>Sending email...</code> to the standard output.</p>
<p>Let's look at the Collections.sort example again so that we can understand how lambda expressions work with the parameters. To sort a list of names by their length, we passed a <code>Comparator</code> to the sort function. The <code>Comparator</code> is shown below.</p>
<pre><code class="language-java">Comparator&lt;String&gt; comparator = (first, second) -&gt; first.length() - second.length();
</code></pre>
<p>The lambda expression that we wrote was corresponding to the <code>compare</code> method in the Comparator interface. The signature of the <code>compare</code> function is shown below.</p>
<pre><code class="language-java">int compare(T o1, T o2);
</code></pre>
<p><code>T</code> is the type parameter passed to <code>Comparator</code> interface. In this case it will be a <code>String</code> as we are working over a List of <code>String</code>s, i.e. names.</p>
<p>In the lambda expression, we didn't have to explicitly provide the type -- String. The <code>javac</code> compiler inferred the type information from its context. The Java compiler inferred that both parameters should be String, as we are sorting a List of String, and the <code>compare</code> method specifies only one type, <code>T</code>. The act of inferring the type from the context in this way is called <strong>Type Inference</strong>. Java 8 improves the already existing type inference system in Java and makes it more robust and powerful to support lambda expressions. <code>javac</code> under the hood looks for the information close to your lambda expression and uses that information to find the correct type for the parameters.</p>
<blockquote>
<p>In most cases, <code>javac</code> will infer the type from the context. In case it can't resolve type because of missing or incomplete context information then the code will not compile. For example, if we remove <code>String</code> type information from <code>Comparator</code> then code will fail to compile as shown below.</p>
</blockquote>
<pre><code class="language-java">Comparator comparator = (first, second) -&gt; first.length() - second.length(); // compilation error - Cannot resolve method 'length()'
</code></pre>
<h2 id="how-do-lambda-expressions-work-in-java-8">How do Lambda expressions work in Java 8?</h2>
<p>You may have noticed that the type of a lambda expression is some interface like <code>Comparator</code> in the above example. You can't use any arbitrary interface with lambda expressions. <em><strong>Only those interfaces which have only one non-object abstract method can be used with lambda expressions</strong></em>. These kinds of interfaces are called <strong>Functional interfaces</strong>, and they can be annotated with the <code>@FunctionalInterface</code> annotation. <code>Runnable</code> interface is an example of a functional interface, as shown below.</p>
<pre><code class="language-java">@FunctionalInterface
public interface Runnable {
    public abstract void run();
}
</code></pre>
<p><code>@FunctionalInterface</code> annotation is not mandatory but, it can help tools know that an interface is a functional interface and perform meaningful actions. For example, if you try to compile an interface that annotates itself with the <code>@FunctionalInterface</code> annotation, and has multiple abstract methods, then compilation will fail with an error <em><strong>Multiple non-overriding abstract methods found</strong></em>. Similarly, if you add <code>@FunctionInterface</code> annotation to an interface without any method, i.e. a marker interface, then you will get error message <em><strong>No target method found</strong></em>.</p>
<p>Let's answer one of the most important questions that might be coming to your mind. <em><strong>Are Java 8 lambda expressions just the syntactic sugar over anonymous inner classes, or how do functional interfaces otherwise get translated to bytecode?</strong></em></p>
<p>The short answer is <strong>NO</strong>. Java 8 does not use anonymous inner classes mainly for two reasons:</p>
<ol>
<li> <p><strong>Performance impact</strong>: If lambda expressions were implemented using anonymous classes, then each lambda expression would result in a class file on disk. If these classes were loaded by the JVM at startup, then the startup time of the JVM would increase, as all the classes would need to be first loaded and verified before use.</p> </li>
<li> <p><strong>Possibility to change in future</strong>: If Java 8 designers would have used anonymous classes from the start, then it would have limited the scope of future lambda implementation changes.</p> </li>
</ol>
<h3 id="using-invokedynamic">Using invokedynamic</h3>
<p>Java 8 designers decided to use the <code>invokedynamic</code> instruction, added in Java 7, to defer the translation strategy at runtime. When <code>javac</code> compiles the code, it captures the lambda expression and generates an <code>invokedynamic</code> call site (called lambda factory). The <code>invokedynamic</code> call site, when invoked, returns an instance of the functional interface to which the lambda is being converted. For example, if we look at the byte code of our Collections.sort example, it will look like as shown below.</p>
<pre><code>public static void main(java.lang.String[]);
    Code:
       0: iconst_3
       1: anewarray     #2                  // class java/lang/String
       4: dup
       5: iconst_0
       6: ldc           #3                  // String shekhar
       8: aastore
       9: dup
      10: iconst_1
      11: ldc           #4                  // String rahul
      13: aastore
      14: dup
      15: iconst_2
      16: ldc           #5                  // String sameer
      18: aastore
      19: invokestatic  #6                  // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      22: astore_1
      23: invokedynamic #7,  0              // InvokeDynamic #0:compare:()Ljava/util/Comparator;
      28: astore_2
      29: aload_1
      30: aload_2
      31: invokestatic  #8                  // Method java/util/Collections.sort:(Ljava/util/List;Ljava/util/Comparator;)V
      34: getstatic     #9                  // Field java/lang/System.out:Ljava/io/PrintStream;
      37: aload_1
      38: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V
      41: return
}
</code></pre>
<p>The interesting part of the byte code shown above is the line 23 <code>23: invokedynamic #7, 0 // InvokeDynamic #0:compare:()Ljava/util/Comparator;</code> where a call to <code>invokedynamic</code> is made.</p>
<p>The second step is to convert the body of the lambda expression into a method that will be invoked through the <code>invokedynamic</code> instruction. This is the step where JVM implementers have the liberty to choose their own strategy.</p>
<p>I have only glossed over this topic. You can read about the internals at http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html.</p>
<h2 id="anonymous-classes-vs-lambdas">Anonymous classes vs lambdas</h2>
<p>Let's compare anonymous classes with lambdas to understand the differences between them.</p>
<ol>
<li> <p>In anonymous classes, <code>this</code> refers to the anonymous class itself whereas in lambda expressions, <code>this</code> refers to the class enclosing the lambda expression.</p> </li>
<li> <p>You can shadow variables in the enclosing class inside the anonymous class. This gives a compile time error when done inside a lambda expression.</p> </li>
<li> <p>The type of the lambda expression is determined from the context, whereas the type of the anonymous class is specified explicitly as you create the instance of anonymous class.</p> </li>
</ol>
<h2 id="do-i-need-to-write-my-own-functional-interfaces">Do I need to write my own functional interfaces?</h2>
<p>By default, Java 8 comes with many functional interfaces which you can use in your code. They exist inside <code>java.util.function</code> package. Let's have a look at few of them.</p>
<h3 id="javautilfunctionpredicate">java.util.function.Predicate
<t></t></h3>
<p>This functional interface is used to define a check for some condition, i.e. a predicate. Predicate interface has one method called <code>test</code> which takes a value of type <code>T</code> and returns boolean. For example, from a list of <code>names</code> if we want to filter out all the names which starts with <strong>s</strong> then we will use a predicate as shown below.</p>
<pre><code class="language-java">Predicate&lt;String&gt; namesStartingWithS = name -&gt; name.startsWith("s");
</code></pre>
<h3 id="javautilfunctionconsumer">java.util.function.Consumer
<t></t></h3>
<p>This functional interface is used for performing actions which do not produce any output. The consumer interface has one method called <code>accept</code> which takes a value of type <code>T</code> and returns nothing, i.e. it is void. For example, sending an email with given message.</p>
<pre><code class="language-java">Consumer&lt;String&gt; messageConsumer = message -&gt; System.out.println(message);
</code></pre>
<h3 id="javautilfunctionfunctiontr">java.util.function.Function&lt;T,R&gt;</h3>
<p>This functional interface takes one value and produces a result. For example, if we want to uppercase all the names in our <code>names</code> list, we can write a Function as shown below.</p>
<pre><code class="language-java">Function&lt;String, String&gt; toUpperCase = name -&gt; name.toUpperCase();
</code></pre>
<h3 id="javautilfunctionsupplier">java.util.function.Supplier
<t></t></h3>
<p>This functional interface does not take any input but produces a value. This could be used to generate unique identifiers as shown below.</p>
<pre><code class="language-java">Supplier&lt;String&gt; uuidGenerator= () -&gt; UUID.randomUUID().toString();
</code></pre>
<p>We will cover more functional interfaces throughout this tutorial.</p>
<h2 id="method-references">Method references</h2>
<p>There would be times when you will be creating lambda expressions that only calls a specific method like <code>Function&lt;String, Integer&gt; strToLength = str -&gt; str.length();</code>. The lambda only calls <code>length()</code> method on the <code>String</code> object. This could be simplified using method references like <code>Function&lt;String, Integer&gt; strToLength = String::length;</code>. They can be seen as shorthand notation for lambda expression that only calls a single method. In the expression <code>String::length</code>, <code>String</code> is the target reference, <code>::</code> is the delimiter, and <code>length</code> is the function that will be called on the target reference. You can use method references on both static and instance methods.</p>
<h3 id="static-method-references">Static method references</h3>
<p>Suppose we have to find a maximum number from a list of numbers, then we can write a method reference <code>Function&lt;List&lt;Integer&gt;, Integer&gt; maxFn = Collections::max</code>. <code>max</code> is a static method in the <code>Collections</code> class that takes one argument of type <code>List</code>. You can then call this like <code>maxFn.apply(Arrays.asList(1, 10, 3, 5))</code>. The above lambda expression is equivalent to a <code>Function&lt;List&lt;Integer&gt;, Integer&gt; maxFn = (numbers) -&gt; Collections.max(numbers);</code> lambda expression.</p>
<h3 id="instance-method-references">Instance method references</h3>
<p>This is used for method reference to an instance method, for example <code>String::toUpperCase</code> calls <code>toUpperCase</code> method on a <code>String</code> reference. You can also use method reference with parameters for example <code>BiFunction&lt;String, String, String&gt; concatFn = String::concat</code>. The <code>concatFn</code> can be called as <code>concatFn.apply("shekhar", "gulati")</code>. The <code>String</code> <code>concat</code> method is called on a String object and passed a parameter like <code>"shekhar".concat("gulati")</code>.</p>
<h2 id="exercise--lambdify-me">Exercise &gt;&gt; Lambdify me</h2>
<p>Let's look at the code shown below and apply what we have learned so far.</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;String&gt; titles = taskTitles(tasks);
        for (String title : titles) {
            System.out.println(title);
        }
    }

    public static List&lt;String&gt; taskTitles(List&lt;Task&gt; tasks) {
        List&lt;String&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (task.getType() == TaskType.READING) {
                readingTitles.add(task.getTitle());
            }
        }
        return readingTitles;
    }

}
</code></pre>
<p>The code shown above first fetches all the Tasks from a utility method <code>getTasks</code>. We are not interested in the <code>getTasks</code> implementation. The <code>getTasks</code> could fetch tasks by accessing a web-service or database or in-memory. Once you have tasks, we filter all the reading tasks and extract the title field from the task. We add extracted title to a list and then finally return all the reading titles.</p>
<p>Let's start with the simplest refactor -- using <code>foreach</code> on a list with method reference.</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;String&gt; titles = taskTitles(tasks);
        titles.forEach(System.out::println);
    }

    public static List&lt;String&gt; taskTitles(List&lt;Task&gt; tasks) {
        List&lt;String&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (task.getType() == TaskType.READING) {
                readingTitles.add(task.getTitle());
            }
        }
        return readingTitles;
    }

}
</code></pre>
<p>Using <code>Predicate&lt;T&gt;</code> to filter out tasks.</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;String&gt; titles = taskTitles(tasks, task -&gt; task.getType() == TaskType.READING);
        titles.forEach(System.out::println);
    }

    public static List&lt;String&gt; taskTitles(List&lt;Task&gt; tasks, Predicate&lt;Task&gt; filterTasks) {
        List&lt;String&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (filterTasks.test(task)) {
                readingTitles.add(task.getTitle());
            }
        }
        return readingTitles;
    }

}
</code></pre>
<p>Using <code>Function&lt;T,R&gt;</code> for extracting out title from the Task.</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;String&gt; titles = taskTitles(tasks, task -&gt; task.getType() == TaskType.READING, task -&gt; task.getTitle());
        titles.forEach(System.out::println);
    }

    public static &lt;R&gt; List&lt;R&gt; taskTitles(List&lt;Task&gt; tasks, Predicate&lt;Task&gt; filterTasks, Function&lt;Task, R&gt; extractor) {
        List&lt;R&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (filterTasks.test(task)) {
                readingTitles.add(extractor.apply(task));
            }
        }
        return readingTitles;
    }
}
</code></pre>
<p>Using method reference for extractor</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;String&gt; titles = filterAndExtract(tasks, task -&gt; task.getType() == TaskType.READING, Task::getTitle);
        titles.forEach(System.out::println);
        List&lt;LocalDate&gt; createdOnDates = filterAndExtract(tasks, task -&gt; task.getType() == TaskType.READING, Task::getCreatedOn);
        createdOnDates.forEach(System.out::println);
        List&lt;Task&gt; filteredTasks = filterAndExtract(tasks, task -&gt; task.getType() == TaskType.READING, Function.identity());
        filteredTasks.forEach(System.out::println);
    }

    public static &lt;R&gt; List&lt;R&gt; filterAndExtract(List&lt;Task&gt; tasks, Predicate&lt;Task&gt; filterTasks, Function&lt;Task, R&gt; extractor) {
        List&lt;R&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (filterTasks.test(task)) {
                readingTitles.add(extractor.apply(task));
            }
        }
        return readingTitles;
    }
}
</code></pre>
<p>We can also write our own <strong>Functional Interface</strong> that clearly describes the intent of the developer. We can create an interface <code>TaskExtractor</code> that extends <code>Function</code> interface. The input type of interface is fixed to <code>Task</code> and output type depend on the implementing lambda. This way the developer will only have to worry about the result type, as input type will always remain <code>Task</code>.</p>
<pre><code class="language-java">public class Exercise_Lambdas {

    public static void main(String[] args) {
        List&lt;Task&gt; tasks = getTasks();
        List&lt;Task&gt; filteredTasks = filterAndExtract(tasks, task -&gt; task.getType() == TaskType.READING, TaskExtractor.identityOp());
        filteredTasks.forEach(System.out::println);
    }

    public static &lt;R&gt; List&lt;R&gt; filterAndExtract(List&lt;Task&gt; tasks, Predicate&lt;Task&gt; filterTasks, TaskExtractor&lt;R&gt; extractor) {
        List&lt;R&gt; readingTitles = new ArrayList&lt;&gt;();
        for (Task task : tasks) {
            if (filterTasks.test(task)) {
                readingTitles.add(extractor.apply(task));
            }
        }
        return readingTitles;
    }

}


interface TaskExtractor&lt;R&gt; extends Function&lt;Task, R&gt; {

    static TaskExtractor&lt;Task&gt; identityOp() {
        return t -&gt; t;
    }
}
</code></pre>
<p><a href="https://github.com/igrigorik/ga-beacon"><a href="https://ga-beacon.appspot.com/UA-59411913-3/shekhargulati/java8-the-missing-tutorial/02-lambdas" data-uk-lightbox><img src="https://ga-beacon.appspot.com/UA-59411913-3/shekhargulati/java8-the-missing-tutorial/02-lambdas" alt="Analytics"></a></a></p>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/158/index.html">
<img class="uk-book-cover" src="../../static/icons/48/java_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/158/index.html">java语法整理</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/90.html">niliv</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="java">java</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">42页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年5月26日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/20/index.html">
<img class="uk-book-cover" src="../../static/icons/48/java_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/20/index.html">Java 8 简明教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/15.html">wizardforcel</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="java">java</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">11页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 133个">133</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/78/index.html">
<img class="uk-book-cover" src="../../static/icons/48/java_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/78/index.html">阿里巴巴Java开发手册</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/49.html">Alibaba</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="java">java</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">24页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月24日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 9831个">9831</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/87/index.html">
<img class="uk-book-cover" src="../../static/icons/48/springboot_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/87/index.html">Spring Boot 开源电子书</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/56.html">ityouknow</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="springboot">springboot</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">21页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月29日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 35个">35</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/86/index.html">
<img class="uk-book-cover" src="../../static/icons/48/scala_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/86/index.html">《快学Scala》读书笔记</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/55.html">xuexingdong</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="scala">scala</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">7页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月29日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1个">1</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/85/index.html">
<img class="uk-book-cover" src="../../static/icons/48/machine-learning_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/85/index.html">机器学习原理</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/54.html">shunliz</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="machine-learning">machine-learning</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">221页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月24日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../" title="返回首页"><img class="" src="../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../book/66/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../book/66/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../book/66/01-default-static-interface-methods.html" title="Default and Static Methods for Interfaces" data-book-page-rel-url="01-default-static-interface-methods.html" data-book-page-id="5490">Default and Static Methods for Interfaces</a>
</li>
<li>
<a class="pjax" href="../../book/66/02-lambdas.html" title="Lambdas" data-book-page-rel-url="02-lambdas.html" data-book-page-id="5491">Lambdas</a>
</li>
<li>
<a class="pjax" href="../../book/66/03-streams.html" title="Streams" data-book-page-rel-url="03-streams.html" data-book-page-id="5492">Streams</a>
</li>
<li>
<a class="pjax" href="../../book/66/04-collectors.html" title="Collectors" data-book-page-rel-url="04-collectors.html" data-book-page-id="5493">Collectors</a>
</li>
<li>
<a class="pjax" href="../../book/66/05-optionals.html" title="Optionals" data-book-page-rel-url="05-optionals.html" data-book-page-id="5494">Optionals</a>
</li>
<li>
<a class="pjax" href="../../book/66/08-date-time-api.html" title="Date Time API" data-book-page-rel-url="08-date-time-api.html" data-book-page-id="5495">Date Time API</a>
</li>
<li>
<a class="pjax" href="../../book/66/10-nashorn.html" title="Nashorn" data-book-page-rel-url="10-nashorn.html" data-book-page-id="5496">Nashorn</a>
</li>
<li>
<a class="pjax" href="../../book/66/12-annotations.html" title="Annotation improvements" data-book-page-rel-url="12-annotations.html" data-book-page-id="5497">Annotation improvements</a>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =66;var bookPageId =5491;var bookPageRelUrl ='02-lambdas.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>