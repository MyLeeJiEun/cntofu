
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>模型语法-Django 1.8 中文文档(Django 1.8 documentation)</title>
<meta content='模型语法,Django 1.8 中文文档,Django 1.8 documentation' name='keywords'>
<meta content='模型语法,Django 1.8 中文文档,Django 1.8 documentation' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../static/components/css/base.css">
<link rel="stylesheet" href="../../static/components/css/reader.css">
<link rel="stylesheet" href="../../static/components/css/markdown.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../book/35/2_1.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">模型</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../book/35/2_1_2_Field%20types.html">
<span class="">字段类型</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../book/35/index.html">Django 1.8 中文文档 (Django 1.8 documentation)</a>
<a target="_blank" rel="nofollow" href="https://github.com/wizardforcel/django-chinese-docs-18" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  md-content-section  uk-margin-bottom">
<h1 id="模型">模型</h1>
<p>模型是你的数据的唯一的、权威的信息源。它包含你所储存数据的必要字段和行为。通常，每个模型对应数据库中唯一的一张表。</p>
<p>基础：</p>
<ul>
<li>每个模型都是<a href="../../ref/models/instances.html#django.db.models.Model" title="django.db.models.Model"><code>django.db.models.Model</code></a> 的一个Python 子类。</li>
<li>模型的每个属性都表示数据库中的一个字段。</li>
<li>Django 提供一套自动生成的用于数据库访问的API；详见<a href="queries.html"><em>执行查询</em></a>。</li>
</ul>
<h2 id="简短的例子">简短的例子</h2>
<p>这个例子定义一个<code>Person</code>模型，它有<code>first_name</code> 和<code>last_name</code> 两个属性：</p>
<pre><code>from django.db import models

class Person(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)

</code></pre>
<p><code>first_name</code>和<code>last_name</code>是模型的两个<a href="#fields">字段</a>。每个字段都被指定成一个类属性，每个属性映射到一个数据库的列。</p>
<p>上面的<code>Person</code> 模型会在数据库中创建这样一张表：</p>
<pre><code>CREATE TABLE myapp_person (
    "id" serial NOT NULL PRIMARY KEY,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL
);

</code></pre>
<p>一些技术上的注意事项：</p>
<ul>
<li>这个表的名称<code>myapp_person</code>，是根据 模型中的元数据自动生成的，也可以覆写为别的名称，详见<a href="../../ref/models/options.html#table-names"><em>Table names</em></a>。</li>
<li><code>id</code>&nbsp;字段是自动添加的，但这个行为可以被重写。详见<a href="#automatic-primary-key-fields"><em>自增主键字段</em></a>。</li>
<li>这个例子中的<code>CREATE TABLE</code> SQL 语句使用PostgreSQL 语法格式，要注意的是Django 会根据<a href="../settings.html"><em>设置文件</em></a> 中指定的数据库类型来使用相应的SQL 语句。</li>
</ul>
<h2 id="使用模型">使用模型</h2>
<p>定义好模型之后，你需要告诉Django _使用_这些模型。你要做的就是修改配置文件中的<a href="../../ref/settings.html#std:setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a>&nbsp;设置，在其中添加<code>models.py</code>所在应用的名称。</p>
<p>例如，如果你的应用的模型位于<code>myapp.models</code>模块（<a href="../../ref/django-admin.html#django-admin-startapp"><code>manage.py startapp</code></a> 脚本为一个应用创建的包结构），<a href="../../ref/settings.html#std:setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a>部分看上去应该是：</p>
<pre><code>INSTALLED_APPS = (
    #...
    'myapp',
    #...
)

</code></pre>
<p>当你在<a href="../../ref/settings.html#std:setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a> 中添加新的应用名时，请确保运行命令<a href="../../ref/django-admin.html#django-admin-migrate"><code>manage.py migrate</code></a>，可以首先使用<a href="../../ref/django-admin.html#django-admin-makemigrations"><code>manage.py makemigrations</code></a> 来为它们生成迁移脚本。</p>
<h2 id="字段">字段</h2>
<p>模型中不可或缺且最为重要的，就是字段集，它是一组数据库字段的列表。字段被指定为类属性。 要注意选择的字段名称不要和<a href="../../ref/models/instances.html"><em>模型 API</em></a> 冲突，比如<code>clean</code>、<code>save</code> 或者<code>delete</code>。</p>
<p>例如：</p>
<pre><code>from django.db import models

class Musician(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=100)

class Album(models.Model):
    artist = models.ForeignKey(Musician)
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField()

</code></pre>
<h3 id="字段类型">字段类型</h3>
<p>模型中的每个字段都是 <a href="../../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a> 子类的某个实例。Django 根据字段类的类型确定以下信息：</p>
<ul>
<li>数据库当中的列类型 (比如，&nbsp;<code>INTEGER</code>, <code>VARCHAR</code>)。</li>
<li>渲染表单时使用的默认HTML <a href="../../ref/forms/widgets.html"><em>部件</em></a>（例如，<code>&lt;input type="text"&gt;</code>, <code>&lt;select&gt;</code>）。</li>
<li>最低限度的验证需求，它被用在 Django 管理站点和自动生成的表单中。</li>
</ul>
<p>Django 自带数十种内置的字段类型；完整字段类型列表可以在<a href="../../ref/models/fields.html#model-field-types"><em>模型字段参考</em></a> 中找到。如果内置类型仍不能满足你的要求，你可以自由地编写符合你要求的字段类型； 详见<a href="../../howto/custom-model-fields.html"><em>编写自定义的模型字段</em></a>。</p>
<h3 id="字段选项">字段选项</h3>
<p>每个字段有一些特有的参数，详见<a href="../../ref/models/fields.html#model-field-types"><em>模型字段参考</em></a>。例如，<a href="../../ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><code>CharField</code></a>（和它的派生类）需要<a href="../../ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code>max_length</code></a> 参数来指定<code>VARCHAR</code> 数据库字段的大小。</p>
<p>还有一些适用于所有字段的通用参数。&nbsp;这些参数在<a href="../../ref/models/fields.html#common-model-field-options"><em>参考</em></a>中有详细定义，这里我们只简单介绍一些最常用的：</p>
<p><a href="../../ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a></p>
<p>如果为<code>True</code>，Django 将用<code>NULL</code> 来在数据库中存储空值。 默认值是 <code>False</code>.</p>
<p><a href="../../ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank</code></a></p>
<p>如果为<code>True</code>，该字段允许不填。默认为<code>False</code>。</p>
<p>要注意，这与 <a href="../../ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a>&nbsp;不同。<a href="../../ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><code>null</code></a>纯粹是数据库范畴的，而 <a href="../../ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank</code></a> 是数据验证范畴的。如果一个字段的<a href="../../ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=True</code></a>，表单的验证将允许该字段是空值。如果字段的<a href="../../ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=False</code></a>，该字段就是必填的。</p>
<p><a href="../../ref/models/fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><code>choices</code></a></p>
<p>由二元组组成的一个可迭代对象（例如，列表或元组），用来给字段提供选择项。 如果设置了choices ，默认的表单将是一个选择框而不是标准的文本框，而且这个选择框的选项就是choices 中的选项。</p>
<p>这是一个关于 choices 列表的例子：</p>
<pre><code>YEAR_IN_SCHOOL_CHOICES = (
    ('FR', 'Freshman'),
    ('SO', 'Sophomore'),
    ('JR', 'Junior'),
    ('SR', 'Senior'),
    ('GR', 'Graduate'),
)

</code></pre>
<p>每个元组中的第一个元素，是存储在数据库中的值；第二个元素是在管理界面或 ModelChoiceField 中用作显示的内容。 在一个给定的 model 类的实例中，想得到某个 choices 字段的显示值，就调用 <code>get_FOO_display</code> 方法(这里的 FOO 就是 choices 字段的名称 )。例如：</p>
<pre><code>from django.db import models

class Person(models.Model):
    SHIRT_SIZES = (
        ('S', 'Small'),
        ('M', 'Medium'),
        ('L', 'Large'),
    )
    name = models.CharField(max_length=60)
    shirt_size = models.CharField(max_length=1, choices=SHIRT_SIZES)

</code></pre>
<pre><code>&gt;&gt;&gt; p = Person(name="Fred Flintstone", shirt_size="L")
&gt;&gt;&gt; p.save()
&gt;&gt;&gt; p.shirt_size
'L'
&gt;&gt;&gt; p.get_shirt_size_display()
'Large'

</code></pre>
<p><a href="../../ref/models/fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><code>default</code></a></p>
<p>字段的默认值。可以是一个值或者可调用对象。如果可调用 ，每有新对象被创建它都会被调用。</p>
<p><a href="../../ref/models/fields.html#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><code>help_text</code></a></p>
<p>表单部件额外显示的帮助内容。即使字段不在表单中使用，它对生成文档也很有用。</p>
<p><a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key</code></a></p>
<p>如果为<code>True</code>，那么这个字段就是模型的主键。</p>
<p>如果你没有指定任何一个字段的<a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key=True</code></a>，Django 就会自动添加一个<a href="../../ref/models/fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><code>IntegerField</code></a> 字段做为主键，所以除非你想覆盖默认的主键行为，否则没必要设置任何一个字段的<a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key=True</code></a>。详见<a href="#automatic-primary-key-fields"><em>自增主键字段</em></a>。</p>
<p>主键字段是只读的。如果你在一个已存在的对象上面更改主键的值并且保存，一个新的对象将会在原有对象之外创建出来。例如：</p>
<pre><code>from django.db import models

class Fruit(models.Model):
    name = models.CharField(max_length=100, primary_key=True)

</code></pre>
<pre><code>&gt;&gt;&gt; fruit = Fruit.objects.create(name='Apple')
&gt;&gt;&gt; fruit.name = 'Pear'
&gt;&gt;&gt; fruit.save()
&gt;&gt;&gt; Fruit.objects.values_list('name', flat=True)
['Apple', 'Pear']

</code></pre>
<p><a href="../../ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><code>unique</code></a></p>
<p>如果该值设置为 <code>True</code>, 这个数据字段的值在整张表中必须是唯一的</p>
<p>再说一次，这些仅仅是常用字段的简短介绍， 要了解详细内容，请查看 通用 model 字段选项参考(<a href="../../ref/models/fields.html#common-model-field-options"><em>common model field option reference</em></a>).</p>
<h3 id="自增主键字段">自增主键字段</h3>
<p>默认情况下，Django 会给每个模型添加下面这个字段：</p>
<pre><code>id = models.AutoField(primary_key=True)

</code></pre>
<p>这是一个自增主键字段。</p>
<p>如果你想指定一个自定义主键字段，只要在某个字段上指定 <a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key=True</code></a> 即可。如果 Django 看到你显式地设置了 <a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>Field.primary_key</code></a>，就不会自动添加 <code>id</code> 列。</p>
<p>每个模型只能有一个字段指定<a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key=True</code></a>（无论是显式声明还是自动添加）。</p>
<h3 id="字段的自述名">字段的自述名</h3>
<p>除<a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>、<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 和 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a> 之外，每个字段类型都接受一个可选的位置参数 —— 字段的自述名。如果没有给定自述名，Django 将根据字段的属性名称自动创建自述名 —— 将属性名称的下划线替换成空格。</p>
<p>在这个例子中，自述名是 <code>"person's first name"：</code></p>
<pre><code>first_name = models.CharField("person's first name", max_length=30)

</code></pre>
<p>在这个例子中，自述名是 &nbsp;<code>"first name"</code>：</p>
<pre><code>first_name = models.CharField(max_length=30)

</code></pre>
<p><a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>、<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 和 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a> 都要求第一个参数是一个模型类，所以要使用 <a href="../../ref/models/fields.html#django.db.models.Field.verbose_name" title="django.db.models.Field.verbose_name"><code>verbose_name</code></a> 关键字参数才能指定自述名：</p>
<pre><code>poll = models.ForeignKey(Poll, verbose_name="the related poll")
sites = models.ManyToManyField(Site, verbose_name="list of sites")
place = models.OneToOneField(Place, verbose_name="related place")

</code></pre>
<p>习惯上，<a href="../../ref/models/fields.html#django.db.models.Field.verbose_name" title="django.db.models.Field.verbose_name"><code>verbose_name</code></a> 的首字母不用大写。Django 在必要的时候会自动大写首字母。</p>
<h3 id="关系">关系</h3>
<p>显然，关系数据库的威力体现在表之间的相互关联。 Django 提供了三种最常见的数据库关系：多对一(many-to-one)，多对多(many-to-many)，一对一(one-to-one)。</p>
<h4 id="多对一关系">多对一关系&nbsp;</h4>
<p>Django 使用 <a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>django.db.models.ForeignKey</code></a> 定义多对一关系。和使用其它<a href="../../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code>字段</code></a>类型一样：在模型当中把它做为一个类属性包含进来。</p>
<p><a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> 需要一个位置参数：与该模型关联的类。</p>
<p>比如，一辆<code>Car</code>有一个<code>Manufacturer</code> —— 但是一个<code>Manufacturer</code> 生产很多Car，每一辆<code>Car</code> 只能有一个<code>Manufacturer</code> —— 使用下面的定义：</p>
<pre><code>from django.db import models

class Manufacturer(models.Model):
    # ...
    pass

class Car(models.Model):
    manufacturer = models.ForeignKey(Manufacturer)
    # ...

</code></pre>
<p>你还可以创建<a href="../../ref/models/fields.html#recursive-relationships"><em>递归的关联关系</em></a>（对象和自己进行多对一关联）和 <a href="../../ref/models/fields.html#lazy-relationships"><em>与尚未定义的模型的关联关系</em></a>；详见<a href="../../ref/models/fields.html#ref-foreignkey"><em>模型字段参考</em></a>。</p>
<p>建议你用被关联的模型的小写名称做为<a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> 字段的名字（例如，上面<code>manufacturer</code>）。当然，你也可以起别的名字。例如：</p>
<pre><code>class Car(models.Model):
    company_that_makes_it = models.ForeignKey(Manufacturer)
    # ...

</code></pre>
<p>另见</p>
<p><a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> 字段还接受许多别的参数，在<a href="../../ref/models/fields.html#foreign-key-arguments"><em>模型字段参考</em></a>有详细介绍。这些选项帮助定义关联关系应该如何工作；它们都是可选的参数。</p>
<p>访问反向关联对象的细节，请见<a href="queries.html#backwards-related-objects"><em>Following relationships backward example</em></a>。</p>
<p>示例代码，请见<a href="examples/many_to_one.html"><em>多对一关系模型示例</em></a>)。</p>
<h4 id="多对多关系">多对多关系</h4>
<p><a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 用来定义多对多关系，用法和其他<a href="../../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a> 字段类型一样：在模型中做为一个类属性包含进来。</p>
<p><a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 需要一个位置参数：和该模型关联的类。</p>
<p>例如，一个<code>Pizza</code>可以有多种<code>Topping</code> —— 一种<code>Topping</code> 可以位于多个Pizza 上，而且每个<code>Pizza</code> 可以有多种Topping —— 如下：</p>
<pre><code>from django.db import models

class Topping(models.Model):
    # ...
    pass

class Pizza(models.Model):
    # ...
    toppings = models.ManyToManyField(Topping)

</code></pre>
<p>和使用<a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> 一样，你也可以创建<a href="../../ref/models/fields.html#recursive-relationships"><em>递归的关联关系</em></a>（对象与自己的多对多关联）和<a href="../../ref/models/fields.html#lazy-relationships"><em>与尚未定义关系的模型的关联关系</em></a>；详见<a href="../../ref/models/fields.html#ref-manytomany"><em>模型字段参考</em></a>。</p>
<p>建议你以被关联模型名称的复数形式做为<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 的名字（例如上例中的<code>toppings</code>）。</p>
<p>在哪个模型中设置 <a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 并不重要，在两个模型中任选一个即可 —— 不要两个模型都设置。</p>
<p>通常，<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 实例应该位于可以编辑的表单中。在上面的例子中，<code>toppings</code> 位于<code>Pizza</code> 中（而不是在 <code>Topping</code> 里面设置<code>pizzas</code> 的 <a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 字段），因为设想一个Pizza 有多种Topping 比一个Topping 位于多个Pizza 上要更加自然。按照上面的方式，在<code>Pizza</code> 的表单中将允许用户选择不同的Toppings。</p>
<p>另见</p>
<p>完整的示例参见<a href="examples/many_to_many.html"><em>多对多关系模型示例</em></a>。</p>
<p><a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 字段还接受别的参数，在<a href="../../ref/models/fields.html#manytomany-arguments"><em>模型字段参考</em></a>中有详细介绍。这些选项帮助定义关系应该如何工作；它们都是可选的。</p>
<h4 id="多对多关系中的其他字段">多对多关系中的其他字段</h4>
<p>处理类似搭配 pizza 和 topping 这样简单的多对多关系时，使用标准的<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a>&nbsp; 就可以了。但是，有时你可能需要关联数据到两个模型之间的关系上。</p>
<p>例如，有这样一个应用，它记录音乐家所属的音乐小组。我们可以用一个<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 表示小组和成员之间的多对多关系。但是，有时你可能想知道更多成员关系的细节，比如成员是何时加入小组的。</p>
<p>对于这些情况，Django 允许你指定一个模型来定义多对多关系。 你可以将其他字段放在中介模型里面。源模型的<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 字段将使用<a href="../../ref/models/fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code>through</code></a> 参数指向中介模型。对于上面的音乐小组的例子，代码如下：</p>
<pre><code>from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=128)

    def __str__(self):              # __unicode__ on Python 2
        return self.name

class Group(models.Model):
    name = models.CharField(max_length=128)
    members = models.ManyToManyField(Person, through='Membership')

    def __str__(self):              # __unicode__ on Python 2
        return self.name

class Membership(models.Model):
    person = models.ForeignKey(Person)
    group = models.ForeignKey(Group)
    date_joined = models.DateField()
    invite_reason = models.CharField(max_length=64)

</code></pre>
<p>在设置中介模型时，要显式指定外键并关联到多对多关系涉及的模型。这个显式声明定义两个模型之间是如何关联的。</p>
<p>中介模型有一些限制：</p>
<ul>
<li>中介模型必须_有且只有一个_外键到源模型（上面例子中的<code>Group</code>），或者你必须使用<a href="../../ref/models/fields.html#django.db.models.ManyToManyField.through_fields" title="django.db.models.ManyToManyField.through_fields"><code>ManyToManyField.through_fields</code></a> 显式指定Django 应该使用的外键。如果你的模型中存在超个一个的外键，并且<code>through_fields</code>没有指定，将会触发一个无效的错误。 对目标模型的外键有相同的限制（上面例子中的 <code>Person</code>）。</li>
<li>对于通过中介模型与自己进行多对多关联的模型，允许存在到同一个模型的两个外键，但它们将被作为多对多关联关系的两个（不同的）方面。如果有_超过_ 两个外键，同样你必须像上面一样指定<code>through_fields</code>，否则将引发一个验证错误。</li>
<li>使用中介模型定义与自身的多对多关系时，你_必须_设置 <a href="../../ref/models/fields.html#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><code>symmetrical=False</code></a>（详见<a href="../../ref/models/fields.html#manytomany-arguments"><em>模型字段参考</em></a>）。</li>
</ul>
<p>Changed in Django 1.7:</p>
<p>在Django 1.6 及之前的版本中，中介模型禁止包含多于一个的外键。</p>
<p>既然你已经设置好<a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a> 来使用中介模型（在这个例子中就是<code>Membership</code>），接下来你要开始创建多对多关系。你要做的就是创建中介模型的实例：</p>
<pre><code>&gt;&gt;&gt; ringo = Person.objects.create(name="Ringo Starr")
&gt;&gt;&gt; paul = Person.objects.create(name="Paul McCartney")
&gt;&gt;&gt; beatles = Group.objects.create(name="The Beatles")
&gt;&gt;&gt; m1 = Membership(person=ringo, group=beatles,
...     date_joined=date(1962, 8, 16),
...     invite_reason="Needed a new drummer.")
&gt;&gt;&gt; m1.save()
&gt;&gt;&gt; beatles.members.all()
[&lt;Person: Ringo Starr&gt;]
&gt;&gt;&gt; ringo.group_set.all()
[&lt;Group: The Beatles&gt;]
&gt;&gt;&gt; m2 = Membership.objects.create(person=paul, group=beatles,
...     date_joined=date(1960, 8, 1),
...     invite_reason="Wanted to form a band.")
&gt;&gt;&gt; beatles.members.all()
[&lt;Person: Ringo Starr&gt;, &lt;Person: Paul McCartney&gt;]

</code></pre>
<p>与普通的多对多字段不同，你_不能_使用<code>add</code>、 <code>create</code>和赋值语句（比如，<code>beatles.members = [...]</code>）来创建关系：</p>
<pre><code># THIS WILL NOT WORK
&gt;&gt;&gt; beatles.members.add(john)
# NEITHER WILL THIS
&gt;&gt;&gt; beatles.members.create(name="George Harrison")
# AND NEITHER WILL THIS
&gt;&gt;&gt; beatles.members = [john, paul, ringo, george]

</code></pre>
<p>为什么不能这样做？ 这是因为你不能只创建 <code>Person</code>和 <code>Group</code>之间的关联关系，你还要指定 <code>Membership</code>模型中所需要的所有信息；而简单的<code>add</code>、<code>create</code> 和赋值语句是做不到这一点的。所以它们不能在使用中介模型的多对多关系中使用。此时，唯一的办法就是创建中介模型的实例。</p>
<p><a href="../../ref/models/relations.html#django.db.models.fields.related.RelatedManager.remove" title="django.db.models.fields.related.RelatedManager.remove"><code>remove()</code></a>方法被禁用也是出于同样的原因。但是<a href="../../ref/models/relations.html#django.db.models.fields.related.RelatedManager.clear" title="django.db.models.fields.related.RelatedManager.clear"><code>clear()</code></a>&nbsp;方法却是可用的。它可以清空某个实例所有的多对多关系：</p>
<pre><code>&gt;&gt;&gt; # Beatles have broken up
&gt;&gt;&gt; beatles.members.clear()
&gt;&gt;&gt; # Note that this deletes the intermediate model instances
&gt;&gt;&gt; Membership.objects.all()
[]

</code></pre>
<p>通过创建中介模型的实例来建立对多对多关系后，你就可以执行查询了。 和普通的多对多字段一样，你可以直接使用被关联模型的属性进行查询：</p>
<pre><code># Find all the groups with a member whose name starts with 'Paul'
&gt;&gt;&gt; Group.objects.filter(members__name__startswith='Paul')
[&lt;Group: The Beatles&gt;]

</code></pre>
<p>如果你使用了中介模型，你也可以利用中介模型的属性进行查询：</p>
<pre><code># Find all the members of the Beatles that joined after 1 Jan 1961
&gt;&gt;&gt; Person.objects.filter(
...     group__name='The Beatles',
...     membership__date_joined__gt=date(1961,1,1))
[&lt;Person: Ringo Starr]

</code></pre>
<p>如果你需要访问一个成员的信息，你可以直接获取<code>Membership</code>模型：</p>
<pre><code>&gt;&gt;&gt; ringos_membership = Membership.objects.get(group=beatles, person=ringo)
&gt;&gt;&gt; ringos_membership.date_joined
datetime.date(1962, 8, 16)
&gt;&gt;&gt; ringos_membership.invite_reason
'Needed a new drummer.'

</code></pre>
<p>另一种获取相同信息的方法是，在<code>Person</code>对象上查询<a href="queries.html#m2m-reverse-relationships"><em>多对多反转关系</em></a>：</p>
<pre><code>&gt;&gt;&gt; ringos_membership = ringo.membership_set.get(group=beatles)
&gt;&gt;&gt; ringos_membership.date_joined
datetime.date(1962, 8, 16)
&gt;&gt;&gt; ringos_membership.invite_reason
'Needed a new drummer.'

</code></pre>
<h4 id="一对一关系">一对一关系</h4>
<p><a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>用来定义一对一关系。 用法和其他<code>字段</code>类型一样：在模型里面做为类属性包含进来。</p>
<p>当某个对象想扩展自另一个对象时，最常用的方式就是在这个对象的主键上添加一对一关系。</p>
<p><a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>要一个位置参数：与模型关联的类。</p>
<p>例如，你想建一个“places” 数据库，里面有一些常用的字段，比如address、 phone number 等等。 接下来，如果你想在Place 数据库的基础上建立一个Restaurant 数据库，而不想将已有的字段复制到<code>Restaurant</code>模型，那你可以在 <code>Restaurant</code> 添加一个<a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a> 字段，这个字段指向<code>Place</code>（因为Restaurant 本身就是一个Place；事实上，在处理这个问题的时候，你应该使用一个典型的 <a href="#model-inheritance"><em>继承</em></a>，它隐含一个一对一关系)。</p>
<p>和使用 <a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a>一样，你可以定义<a href="../../ref/models/fields.html#recursive-relationships">_ 递归的关联关系_</a>和<a href="../../ref/models/fields.html#lazy-relationships"><em>引用尚未定义关系的模型</em></a>。详见<a href="../../ref/models/fields.html#ref-onetoone"><em>模型字段参考</em></a>。</p>
<p>另见</p>
<p>在<a href="examples/one_to_one.html"><em>一对一关系的模型例子</em></a> 中有一套完整的例子。</p>
<p><a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>字段也接受一个特定的可选的<code>parent_link</code>参数，在<a href="../../ref/models/fields.html#ref-onetoone"><em>模型字段参考</em></a> 中有详细介绍。</p>
<p>在以前的版本中，<a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a> 字段会自动变成模型 的主键。不过现在已经不这么做了(不过要是你愿意的话，你仍可以传递 <a href="../../ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code>primary_key</code></a>参数来创建主键字段)。所以一个 模型 中可以有多个<a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a> 字段。</p>
<h3 id="跨文件的模型">跨文件的模型</h3>
<p>访问其他应用的模型是非常容易的。 在文件顶部你定义模型的地方，导入相关的模型来实现它。然后，无论在哪里需要的话，都可以引用它。例如：</p>
<pre><code>from django.db import models
from geography.models import ZipCode

class Restaurant(models.Model):
    # ...
    zip_code = models.ForeignKey(ZipCode)

</code></pre>
<h3 id="字段命名的限制">字段命名的限制</h3>
<p>Django 对字段的命名只有两个限制：</p>
<ol>
<li> <p>字段的名称不能是Python 保留的关键字，因为这将导致一个Python 语法错误。例如：</p> <pre><code>class Example(models.Model):
    pass = models.IntegerField() # 'pass' is a reserved word!

</code></pre> </li>
<li> <p>由于Django 查询语法的工作方式，字段名称中连续的下划线不能超过一个。例如：</p> <pre><code>class Example(models.Model):
    foo__bar = models.IntegerField() # 'foo__bar' has two underscores!

</code></pre> </li>
</ol>
<p>这些限制有变通的方法，因为没有要求字段名称必须与数据库的列名匹配。参 <a href="../../ref/models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><code>db_column</code></a> 选项。</p>
<p>SQL 的保留字例如<code>join</code>、<code>where</code> 和<code>select</code>，可以用作模型的字段名，因为Django 会对底层的SQL 查询语句中的数据库表名和列名进行转义。 它根据你的数据库引擎使用不同的引用语法。</p>
<h3 id="自定义字段类型">自定义字段类型</h3>
<p>如果已有的模型字段都不合适，或者你想用到一些很少见的数据库列类型的优点，你可以创建你自己的字段类型。创建你自己的字段在<a href="../../howto/custom-model-fields.html"><em>编写自定义的模型字段</em></a>中有完整讲述。</p>
<h2 id="元选项">元选项</h2>
<p>使用内部的<code>class Meta</code> 定义模型的元数据，例如：</p>
<pre><code>from django.db import models

class Ox(models.Model):
    horn_length = models.IntegerField()

    class Meta:
        ordering = ["horn_length"]
        verbose_name_plural = "oxen"

</code></pre>
<p>模型元数据是“任何不是字段的数据”，比如排序选项（<a href="../../ref/models/options.html#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code>ordering</code></a>），数据表名（<a href="../../ref/models/options.html#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><code>db_table</code></a>）或者人类可读的单复数名称（<a href="../../ref/models/options.html#django.db.models.Options.verbose_name" title="django.db.models.Options.verbose_name"><code>verbose_name</code></a> 和<a href="../../ref/models/options.html#django.db.models.Options.verbose_name_plural" title="django.db.models.Options.verbose_name_plural"><code>verbose_name_plural</code></a>）。在模型中添加<code>class Meta</code>是完全可选的，所有选项都不是必须的。</p>
<p>所有<code>元</code>选项的完整列表可以在<a href="../../ref/models/options.html"><em>模型选项参考</em></a>找到。</p>
<h2 id="模型的属性">模型的属性</h2>
<p><code>objects</code></p>
<p>The most important attribute of a model is the <a href="managers.html#django.db.models.Manager" title="django.db.models.Manager"><code>Manager</code></a>. It’s the interface through which database query operations are provided to Django models and is used to <a href="queries.html#retrieving-objects"><em>retrieve the instances</em></a> from the database. If no custom <code>Manager</code> is defined, the default name is <a href="../../ref/models/class.html#django.db.models.Model.objects" title="django.db.models.Model.objects"><code>objects</code></a>. Managers are only accessible via model classes, not the model instances.</p>
<h2 id="模型的方法">模型的方法</h2>
<p>可以在模型上定义自定义的方法来给你的对象添加自定义的“底层”功能。<a href="managers.html#django.db.models.Manager" title="django.db.models.Manager"><code>Manager</code></a> 方法用于“表范围”的事务，模型的方法应该着眼于特定的模型实例。</p>
<p>这是一个非常有价值的技术，让业务逻辑位于同一个地方 —— 模型中。</p>
<p>例如，下面的模型具有一些自定义的方法：</p>
<pre><code>from django.db import models

class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    birth_date = models.DateField()

    def baby_boomer_status(self):
        "Returns the person's baby-boomer status."
        import datetime
        if self.birth_date &lt; datetime.date(1945, 8, 1):
            return "Pre-boomer"
        elif self.birth_date &lt; datetime.date(1965, 1, 1):
            return "Baby boomer"
        else:
            return "Post-boomer"

    def _get_full_name(self):
        "Returns the person's full name."
        return '%s %s' % (self.first_name, self.last_name)
    full_name = property(_get_full_name)

</code></pre>
<p>这个例子中的最后一个方法是一个<a href="../../glossary.html#term-property"><em>property</em></a>。</p>
<p><a href="../../ref/models/instances.html"><em>模型实例参考</em></a> 具有一个完整的<a href="../../ref/models/instances.html#model-instance-methods"><em>为模型自动生成的方法</em></a> 列表。你可以覆盖它们 —— 参见下文<a href="#overriding-predefined-model-methods">覆盖模型预定义的方法</a> —— 但是有些方法你会始终想要重新定义：</p>
<p><a href="../../ref/models/instances.html#django.db.models.Model.__str__" title="django.db.models.Model.__str__"><code>__str__()</code></a> (Python 3)</p>
<p>Python 3 equivalent of <code>__unicode__()</code>.</p>
<p><a href="../../ref/models/instances.html#django.db.models.Model.__unicode__" title="django.db.models.Model.__unicode__"><code>__unicode__()</code></a> (Python 2)</p>
<p>一个Python “魔法方法”，返回对象的Unicode “表示形式”。当模型实例需要强制转换并显示为普通的字符串时，Python 和Django 将使用这个方法。最明显是在交互式控制台或者管理站点显示一个对象的时候。</p>
<p>将将永远想要定义这个方法；默认的方法几乎没有意义。</p>
<p><a href="../../ref/models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><code>get_absolute_url()</code></a></p>
<p>它告诉Django 如何计算一个对象的URL。Django 在它的管理站点中使用到这个方法，在其它任何需要计算一个对象的URL 时也将用到。</p>
<p>任何具有唯一标识自己的URL 的对象都应该定义这个方法。</p>
<h3 id="覆盖预定义的模型方法">覆盖预定义的模型方法</h3>
<p>还有另外一部分封装数据库行为的<a href="../../ref/models/instances.html#model-instance-methods"><em>模型方法</em></a>，你可能想要自定义它们。特别是，你将要经常改变<a href="../../ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code>save()</code></a> 和<a href="../../ref/models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code>delete()</code></a> 的工作方式。</p>
<p>你可以自由覆盖这些方法（和其它任何模型方法）来改变它们的行为。</p>
<p>覆盖内建模型方法的一个典型的使用场景是，你想在保存一个对象时做一些其它事情。例如（参见<a href="../../ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code>save()</code></a> 中关于它接受的参数的文档）：</p>
<pre><code>from django.db import models

class Blog(models.Model):
    name = models.CharField(max_length=100)
    tagline = models.TextField()

    def save(self, *args, **kwargs):
        do_something()
        super(Blog, self).save(*args, **kwargs) # Call the "real" save() method.
        do_something_else()

</code></pre>
<p>你还可以阻止保存：</p>
<pre><code>from django.db import models

class Blog(models.Model):
    name = models.CharField(max_length=100)
    tagline = models.TextField()

    def save(self, *args, **kwargs):
        if self.name == "Yoko Ono's blog":
            return # Yoko shall never have her own blog!
        else:
            super(Blog, self).save(*args, **kwargs) # Call the "real" save() method.

</code></pre>
<p>必须要记住调用超类的方法—— <code>super(Blog, self).save(*args, **kwargs)</code> —— 来确保对象被保存到数据库中。如果你忘记调用超类的这个方法，默认的行为将不会发生且数据库不会有任何改变。</p>
<p>还要记住传递参数给这个模型方法 —— 即<code>*args, **kwargs</code>。 Django 未来将一直会扩展内建模型方法的功能并添加新的参数。如果在你的方法定义中使用<code>*args, **kwargs</code>，将保证你的代码自动支持这些新的参数。</p>
<p>Overridden model methods are not called on bulk operations</p>
<p>注意，当<a href="queries.html#topics-db-queries-delete"><em>使用查询集批量删除对象时</em></a>，将不会为每个对象调用<a href="../../ref/models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code>delete()</code></a> 方法。为确保自定义的删除逻辑得到执行，你可以使用<a href="../../ref/signals.html#django.db.models.signals.pre_delete" title="django.db.models.signals.pre_delete"><code>pre_delete</code></a> 和/或<a href="../../ref/signals.html#django.db.models.signals.post_delete" title="django.db.models.signals.post_delete"><code>post_delete</code></a> 信号。</p>
<p>不幸的是，当批量<a href="../../ref/models/querysets.html#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code>creating</code></a> 或<a href="../../ref/models/querysets.html#django.db.models.query.QuerySet.update" title="django.db.models.query.QuerySet.update"><code>updating</code></a> 对象时没有变通方法，因为不会调用<a href="../../ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code>save()</code></a>、<a href="../../ref/signals.html#django.db.models.signals.pre_save" title="django.db.models.signals.pre_save"><code>pre_save</code></a>和 <a href="../../ref/signals.html#django.db.models.signals.post_save" title="django.db.models.signals.post_save"><code>post_save</code></a>。</p>
<h3 id="执行自定义的sql">执行自定义的SQL</h3>
<p>另外一个常见的需求是在模型方法和模块级别的方法中编写自定义的SQL 语句。关于使用原始SQL 语句的更多细节，参见<a href="sql.html"><em>使用原始 SQL</em></a> 的文档。</p>
<h2 id="模型继承">模型继承</h2>
<p>Django 中的模型继承与 Python 中普通类继承方式几乎完全相同，但是本页头部列出的模型基本的要求还是要遵守。这表示自定义的模型类应该继承<a href="../../ref/models/instances.html#django.db.models.Model" title="django.db.models.Model"><code>django.db.models.Model</code></a>。</p>
<p>你唯一需要作出的决定就是你是想让父模型具有它们自己的数据库表，还是让父模型只持有一些共同的信息而这些信息只有在子模型中才能看到。</p>
<p>在Django 中有3中风格的继承。</p>
<ol>
<li>通常，你只想使用父类来持有一些信息，你不想在每个子模型中都敲一遍。这个类永远不会单独使用，所以你使用<a href="#abstract-base-classes"><em>抽象基类</em></a>。</li>
<li>如果你继承一个已经存在的模型且想让每个模型具有它自己的数据库表，那么应该使用<a href="#multi-table-inheritance"><em>多表继承</em></a>。</li>
<li>最后，如果你只是想改变模块Python 级别的行为，而不用修改模型的字段，你可以使用<a href="#proxy-models"><em>代理模型</em></a>。</li>
</ol>
<h3 id="抽象基类">抽象基类</h3>
<p>当你想将一些常见信息存储到很多model的时候，抽象化类是十分有用的。你编写完基类之后，在 <a href="#meta-options"><em>Meta</em></a>类中设置 <code>abstract=True</code> ，该类就不能创建任何数据表。取而代之的是，当它被用来作为一个其他model的基础类时，它将被加入那一子类中。如果抽象化基础类和它的子类有相同的项，那么将会出现error（并且Django将返回一个exception）。</p>
<p>一个例子</p>
<pre><code>from django.db import models

class CommonInfo(models.Model):
    name = models.CharField(max_length=100)
    age = models.PositiveIntegerField()

    class Meta:
        abstract = True

class Student(CommonInfo):
    home_group = models.CharField(max_length=5)

</code></pre>
<p><code>Student</code> 模型将有三个项：<code>name</code>, <code>age</code> 和 <code>home_group</code>。<code>CommonInfo</code> 模型无法像一般的Django模型一样使用，因为它是一个抽象化基础类。它无法生成数据表单或者管理器，并且不能实例化或者储存。</p>
<p>对很多用户来说, 这种类型的模型继承就是你想要的。它提供一种在 Python 语言层级上提取公共信息的方式，但在数据库层级上，各个子类仍然只创建一个数据库。</p>
<h4 id="元-继承"><code>元</code> 继承</h4>
<p>当一个抽象类被创建的时候, Django会自动把你在基类中定义的 <a href="#meta-options"><em>Meta</em></a> 作为子类的一个属性。如果子类没有声明自己的<a href="#meta-options"><em>Meta</em></a> 类, 他将会继承父类的<a href="#meta-options"><em>Meta</em></a>. 如果子类想要扩展父类&nbsp;&nbsp;的，可以继承父类的&nbsp;<a href="#meta-options"><em>Meta</em></a>&nbsp;即可，例如</p>
<pre><code>from django.db import models

class CommonInfo(models.Model):
    # ...
    class Meta:
        abstract = True
        ordering = ['name']

class Student(CommonInfo):
    # ...
    class Meta(CommonInfo.Meta):
        db_table = 'student_info'

</code></pre>
<p>继承时，Django 会对基类的 <a href="#meta-options"><em>Meta</em></a>类做一个调整：在安装 <a href="#meta-options"><em>Meta</em></a>属性之前，Django 会设置 <code>abstract=False</code>。这意味着抽象基类的子类不会自动变成抽象类。 当然，你可以让一个抽象类继承另一个抽象基类，不过每次都要显式地设置 <code>abstract=True</code>。</p>
<p>对于抽象基类而言，有些属性放在 &nbsp;<a href="#meta-options"><em>Meta</em></a>&nbsp;内嵌类里面是没有意义的。例如，包含 <code>db_table</code>将意味着所有的子类(是指那些没有指定自己的 <a href="#meta-options"><em>Meta</em></a> 类的子类)都使用同一张数据表，一般来说，这并不是我们想要的。</p>
<h4 id="小心使用-related-name">小心使用 <code>related_name</code></h4>
<p>如果你在 <code>ForeignKey</code>或 &nbsp;<code>ManyToManyField</code>字段上使用 &nbsp;<a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>属性，你必须总是为该字段指定一个_唯一_的反向名称。但在抽象基类上这样做就会引发一个很严重的问题。因为 Django 会将基类字段添加到每个子类当中，而每个子类的字段属性值都完全相同 (这里面就包括<a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>)。</p>
<p>当你在(且仅在)抽象基类中使用 <a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a> 时，如果想绕过这个问题，名称中就要包含<code>'%(app_label)s'</code>和&nbsp;<code>'%(class)s'</code>。</p>
<ul>
<li><code>'%(class)s'</code> 会替换为子类的小写加下划线格式的名称，字段在子类中使用。</li>
<li><code>'%(app_label)s'</code> 会替换为应用的小写加下划线格式的名称，应用包含子类。每个安装的应用名称都应该是唯一的，而且应用里每个模型类的名称也应该是唯一的，所以产生的名称应该彼此不同。</li>
</ul>
<p>例如，假设有一个app叫做<code>common/models.py</code>：</p>
<pre><code>from django.db import models

class Base(models.Model):
    m2m = models.ManyToManyField(OtherModel, related_name="%(app_label)s_%(class)s_related")

    class Meta:
        abstract = True

class ChildA(Base):
    pass

class ChildB(Base):
    pass

</code></pre>
<p>以及另一个应用 <code>rare/models.py</code>：</p>
<pre><code>from common.models import Base

class ChildB(Base):
    pass

</code></pre>
<p>ChildA.m2m 字段的反向名称是 childa_related，而 ChildB.m2m 字段的反向名称是 childb_related。这取决于你如何使用 &nbsp;<code>'%(class)s'</code> 和<code>'%(app_label)s</code>来构造你的反向名称。如果你没有这样做，Django 就会在验证 model (或运行 <a href="../../ref/django-admin.html#django-admin-migrate"><code>migrate</code></a>) 时抛出错误。</p>
<p>果你没有在抽象基类中为某个关联字段定义 <a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>&nbsp;属性，那么默认的反向名称就是子类名称加上<code>'_set'</code>，它能否正常工作取决于你是否在子类中定义了同名字段。例如，在上面的代码中，如果去掉 <a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>属性，在 <code>ChildA</code>中，<code>m2m</code> 字段的反向名称就是 <code>childa_set</code>；而 <code>ChildB</code>的 m2m 字段的反向名称就是 <code>childb_set</code>。</p>
<h3 id="多表继承">多表继承</h3>
<p>这是 Django 支持的第二种继承方式。使用这种继承方式时，同一层级下的每个子 model 都是一个真正意义上完整的 model 。 每个子 model 都有专属的数据表，都可以查询和创建数据表。 继承关系在子 model 和它的每个父类之间都添加一个链接 (通过一个自动创建的 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>来实现)。&nbsp;例如：</p>
<pre><code>from django.db import models

class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

class Restaurant(Place):
    serves_hot_dogs = models.BooleanField(default=False)
    serves_pizza = models.BooleanField(default=False)

</code></pre>
<p><code>Place</code>里面的所有字段在 <code>Restaurant</code>中也是有效的，只不过数据保存在另外一张数据表当中。所以下面两个语句都是可以运行的：</p>
<pre><code>&gt;&gt;&gt; Place.objects.filter(name="Bob's Cafe")
&gt;&gt;&gt; Restaurant.objects.filter(name="Bob's Cafe")

</code></pre>
<p>如果你有一个 <code>Place</code>&nbsp;，那么它同时也是一个 <code>Restaurant</code>， 那么你可以使用子 model 的小写形式从 Pl<code>Place</code> 对象中获得与其对应的 <code>Restaurant</code>对象：</p>
<pre><code>&gt;&gt;&gt; p = Place.objects.get(id=12)
# If p is a Restaurant object, this will give the child class:
&gt;&gt;&gt; p.restaurant
&lt;Restaurant: ...&gt;

</code></pre>
<p>但是，如果上例中的 <code>p</code> 并_不是_<code>Restaurant</code>&nbsp;(比如它仅仅只是 <code>Place</code>对象，或者它是其他类的父类)，那么在引用 <code>p.restaurant</code>就会抛出<code>Restaurant.DoesNotExist</code> 异常。</p>
<h4 id="多表继承中的meta">多表继承中的<code>Meta</code></h4>
<p>在多表继承中，子类继承父类的 <a href="#meta-options"><em>Meta</em></a>类是没什么意义的。所有的 <a href="#meta-options"><em>Meta</em></a>&nbsp;选项已经对父类起了作用，再次使用只会起反作用。(这与使用抽象基类的情况正好相反，因为抽象基类并没有属于它自己的内容)</p>
<p>所以子 model 并不能访问它父类的 <a href="#meta-options"><em>Meta</em></a>&nbsp;类。但是在某些受限的情况下，子类可以从父类继承某些 Meta ：如果子类没有指定 <a href="../../ref/models/options.html#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code>ordering</code></a>属性或 <a href="../../ref/models/options.html#django.db.models.Options.get_latest_by" title="django.db.models.Options.get_latest_by"><code>get_latest_by</code></a> 属性，它就会从父类中继承这些属性。</p>
<p>如果父类有了排序设置，而你并不想让子类有任何排序设置，你就可以显式地禁用排序：</p>
<pre><code>class ChildModel(ParentModel):
    # ...
    class Meta:
        # Remove parent's ordering effect
        ordering = []

</code></pre>
<h4 id="继承与反向关联">继承与反向关联</h4>
<p>因为多表继承使用了一个隐含的 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>来链接子类与父类，所以象上例那样，你可以用父类来指代子类。但是这个 OnetoOneField 字段默认的 <a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a> 值与 <a href="../../ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code>ForeignKey</code></a> 和 <a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a>&nbsp;默认的反向名称相同。如果你与其他 model 的子类做多对一或是多对多关系，你就<strong>必须</strong>在每个多对一和多对多字段上强制指定 <a href="../../ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code>related_name</code></a>。如果你没这么做，Django 就会在你运行 验证(validation) &nbsp;时抛出异常。</p>
<p>例如，仍以上面 <code>Place</code>类为例，我们创建一个带有 <a href="../../ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code>ManyToManyField</code></a>字段的子类：</p>
<pre><code>class Supplier(Place):
    customers = models.ManyToManyField(Place)

</code></pre>
<p>这会产生一个错误：</p>
<pre><code>Reverse query name for 'Supplier.customers' clashes with reverse query
name for 'Supplier.place_ptr'.

HINT: Add or change a related_name argument to the definition for
'Supplier.customers' or 'Supplier.place_ptr'.

</code></pre>
<p>像下面那样，向<code>customers</code>字段中添加<code>related_name</code>可以解决这个错误：<code>models.ManyToManyField(Place, related_name='provider')</code>。</p>
<h4 id="指定链接父类的字段">指定链接父类的字段</h4>
<p>之前我们提到，Django 会自动创建一个 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>字段将子类链接至非抽象的父 model 。如果你想指定链接父类的属性名称，你可以创建你自己的 <a href="../../ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code>OneToOneField</code></a>字段并设置 <a href="../../ref/models/fields.html#django.db.models.OneToOneField.parent_link" title="django.db.models.OneToOneField.parent_link"><code>parent_link=True</code></a> ，从而使用该字段链接父类。</p>
<h3 id="代理模型">代理模型</h3>
<p>使用 &nbsp;<a href="#multi-table-inheritance"><em>多表继承</em></a>时，model 的每个子类都会创建一张新数据表，通常情况下，这正是我们想要的操作。这是因为子类需要一个空间来存储不包含在基类中的字段数据。 但有时，你可能只想更改 model 在 Python 层的行为实现。比如：更改默认的 manager ，或是添加一个新方法。</p>
<p>而这，正是代理 model 继承方式要做的：为原始 model 创建一个_代理_&nbsp;。你可以创建，删除，更新代理 model 的实例，而且所有的数据都可以象使用原始 model 一样被保存。 不同之处在于：你可以在代理 model 中改变默认的排序设置和默认的 manager ，更不会对原始 model 产生影响。</p>
<p>声明代理 model 和声明普通 model 没有什么不同。 设置<code>Meta</code>类中 <a href="../../ref/models/options.html#django.db.models.Options.proxy" title="django.db.models.Options.proxy"><code>proxy</code></a>&nbsp;的值为 <code>True</code>，就完成了对代理 model 的声明。</p>
<p>举个例子，假设你想给 Django 自带的标准 <code>Person</code> model添加一个方法。你可以这样做：</p>
<pre><code>from django.db import models

class Person(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)

class MyPerson(Person):
    class Meta:
        proxy = True

    def do_something(self):
        # ...
        pass

</code></pre>
<p><code>MyPerson</code>类和它的父类 <code>Person</code>&nbsp;操作同一个数据表。特别的是，<code>Person</code>&nbsp;的任何实例也可以通过 <code>MyPerson</code>访问，反之亦然：</p>
<pre><code>&gt;&gt;&gt; p = Person.objects.create(first_name="foobar")
&gt;&gt;&gt; MyPerson.objects.get(first_name="foobar")
&lt;MyPerson: foobar&gt;

</code></pre>
<p>你也可以使用代理 model 给 model 定义不同的默认排序设置。 你可能并不想每次都给<code>Person</code>模型排序，但是使用代理的时候总是按照<code>last_name</code>属性排序。这非常容易：</p>
<pre><code>class OrderedPerson(Person):
    class Meta:
        ordering = ["last_name"]
        proxy = True

</code></pre>
<p>现在，普通的<code>Person</code>查询时无序的，而&nbsp;<code>OrderedPerson</code>查询会按照<code>last_name</code>排序。</p>
<h4 id="查询集始终返回请求的模型">查询集始终返回请求的模型</h4>
<p>也就是说，没有办法让DJango在查询<code>Person</code>对象时返回<code>MyPerson</code>对象。<code>Person</code> 对象的查询集会返回相同类型的对象。代理对象的要点是，依赖于原生<code>Person</code>对象的代码仍然使用它，而你可以使用你添加进来的扩展对象（它不会依赖其它任何代码）。而并不是将<code>Person</code>模型（或者其它）在所有地方替换为其它你自己创建的模型。</p>
<h4 id="基类的限制">基类的限制</h4>
<p>代理 模型必须继承自一个非抽象基类。 你不能继承自多个非抽象基类，这是因为一个代理 model 不能连接不同的数据表。 代理 model 也可以继承任意多个抽象基类，但前提是它们_没有_&nbsp;定义任何 model 字段。</p>
<h4 id="代理模型的管理器">代理模型的管理器</h4>
<p>如果你没有在代理 模型中定义任何 管理器 ，代理模型就会从父类中继承 管理器&nbsp;。 如果你在代理 模型中定义了一个 管理器 ，它就会变成默认的管理器&nbsp;，不过定义在父类中的管理器仍然有效。</p>
<p>继续上面的例子，当你查询<code>Person</code>模型的时候，你可以改变默认 管理器，例如：</p>
<pre><code>from django.db import models

class NewManager(models.Manager):
    # ...
    pass

class MyPerson(Person):
    objects = NewManager()

    class Meta:
        proxy = True

</code></pre>
<p>如果你想要向代理中添加新的管理器，而不是替换现有的默认管理器，你可以使用<a href="managers.html#custom-managers-and-inheritance"><em>自定义管理器</em></a>管理器文档中描述的技巧：创建一个含有新的管理器的基类，并且在主基类之后继承它：</p>
<pre><code># Create an abstract class for the new manager.
class ExtraManagers(models.Model):
    secondary = NewManager()

    class Meta:
        abstract = True

class MyPerson(Person, ExtraManagers):
    class Meta:
        proxy = True

</code></pre>
<p>你可能不需要经常这样做，但这样做是可行的。</p>
<h4 id="代理-模型与非托管-模型之间的差异">代理 模型与非托管 模型之间的差异</h4>
<p>代理 model 继承看上去和使用<code>Meta</code>类中的 <a href="../../ref/models/options.html#django.db.models.Options.managed" title="django.db.models.Options.managed"><code>managed</code></a>&nbsp;属性的非托管 model 非常相似。但两者并不相同，你应当考虑选用哪种方案。</p>
<p>一个不同之处是你可以在<code>Meta.managed=False</code>的 model 中定义字段(事实上，是必须指定，除非你真的想得到一个空 model )。在创建非托管 model 时要谨慎设置<a href="../../ref/models/options.html#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><code>Meta.db_table</code></a> ，这是因为创建的非托管 model 映射某个已存在的 model ，并且有自己的方法。因此，如果你要保证这两个 model 同步并对程序进行改动，那么就会变得繁冗而脆弱。</p>
<p>另一个不同之处是两者对 管理器的处理方式不同。 代理 model 要与它所代理的 model 行为相似，所以代理 model 要继承父 model 的 managers ，包括它的默认 manager 。 但在普通的多表继承中，子类不能继承父类的 manager ，这是因为在处理非基类字段时，父类的 manager 未必适用。 后一种情况在 <a href="managers.html#custom-managers-and-inheritance"><em>管理器文档</em></a>有详细介绍。</p>
<p>我们实现了这两种特性之后，曾尝试把两者结合到一起。 结果证明，宏观的继承关系和微观的 管理器揉在一起，不仅导致 API 复杂难用，而且还难以理解。 由于任何场合下都可能需要这两个选项，所以目前二者仍是各自独立使用的。</p>
<p>所以，一般规则是：</p>
<ol>
<li>如果你要借鉴一个已有的 模型或数据表，且不想涉及所有的原始数据表的列，那就令 <code>Meta.managed=False</code>。通常情况下，对数据库视图创建 模型或是数据表不需要由 Django 控制时，就使用这个选项。</li>
<li>如果你想对 model 做 Python 层级的改动，又想保留字段不变，那就令 <code>Meta.proxy=True</code>。因此在数据保存时，代理 model 相当于完全复制了原始 模型的存储结构。</li>
</ol>
<h3 id="多重继承">多重继承</h3>
<p>就像Python的子类那样，DJango的模型可以继承自多个父类模型。切记一般的Python名称解析规则也会适用。出现特定名称的第一个基类(比如<a href="#meta-options"><em>Meta</em></a>)是所使用的那个。例如，这意味着如果多个父类含有&nbsp;<a href="#meta-options"><em>Meta</em></a>类，只有第一个会被使用，剩下的会忽略掉。</p>
<p>一般来说，你并不需要继承多个父类。多重继承主要对“mix-in”类有用：向每个继承mix-in的类添加一个特定的、额外的字段或者方法。你应该尝试将你的继承关系保持得尽可能简洁和直接，这样你就不必费很大力气来弄清楚某段特定的信息来自哪里。</p>
<p>Changed in Django 1.7.</p>
<p>Django 1.7之前，继承多个含有<code>id</code>主键字段的模型不会抛出异常，但是会导致数据丢失。例如，考虑这些模型（由于<code>id</code>字段的冲突，它们不再有效）：</p>
<pre><code>class Article(models.Model):
    headline = models.CharField(max_length=50)
    body = models.TextField()

class Book(models.Model):
    title = models.CharField(max_length=50)

class BookReview(Book, Article):
    pass

</code></pre>
<p>这段代码展示了如何创建子类的对象，并覆写之前创建的父类对象中的值。</p>
<pre><code>&gt;&gt;&gt; article = Article.objects.create(headline='Some piece of news.')
&gt;&gt;&gt; review = BookReview.objects.create(
...     headline='Review of Little Red Riding Hood.',
...     title='Little Red Riding Hood')
&gt;&gt;&gt;
&gt;&gt;&gt; assert Article.objects.get(pk=article.pk).headline == article.headline
Traceback (most recent call last):
  File "&lt;console&gt;", line 1, in &lt;module&gt;
AssertionError
&gt;&gt;&gt; # the "Some piece of news." headline has been overwritten.
&gt;&gt;&gt; Article.objects.get(pk=article.pk).headline
'Review of Little Red Riding Hood.'

</code></pre>
<p>你可以在模型基类中使用显式的<a href="../../ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a>来合理使用多重继承：</p>
<pre><code>class Article(models.Model):
    article_id = models.AutoField(primary_key=True)
    ...

class Book(models.Model):
    book_id = models.AutoField(primary_key=True)
    ...

class BookReview(Book, Article):
    pass

</code></pre>
<p>或者是使用一个公共的祖先来持有<a href="../../ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><code>AutoField</code></a>：</p>
<pre><code>class Piece(models.Model):
    pass

class Article(Piece):
    ...

class Book(Piece):
    ...

class BookReview(Book, Article):
    pass

</code></pre>
<h3 id="field-name-hiding-is-not-permitted">Field name “hiding” is not permitted</h3>
<p>普通的 Python 类继承允许子类覆盖父类的任何属性。 但在 Django 中，重写 <a href="../../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a>实例是不允许的(至少现在还不行)。如果基类中有一个 <code>author</code>字段，你就不能在子类中创建任何名为 <code>author</code>的字段。</p>
<p>重写父类的字段会导致很多麻烦，比如：初始化实例(指定在 <code>Model.__init__</code> 中被实例化的字段) 和序列化。而普通的 Python 类继承机制并不能处理好这些特性。所以 Django 的继承机制被设计成与 Python 有所不同，这样做并不是随意而为的。</p>
<p>这些限制仅仅针对做为属性使用的 <a href="../../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code>Field</code></a>实例，并不是针对 Python 属性，Python 属性仍是可以被重写的。 在 Python 看来，上面的限制仅仅针对字段实例的名称：如果你手动指定了数据库的列名称，那么在多重继承中，你就可以在子类和某个祖先类当中使用同一个列名称。(因为它们使用的是两个不同数据表的字段)。</p>
<p>如果你在任何一个祖先类中重写了某个 model 字段，Django 都会抛出 <a href="../../ref/exceptions.html#django.core.exceptions.FieldError" title="django.core.exceptions.FieldError"><code>FieldError</code></a>异常。</p>
<p>另见</p>
<p><a href="../../ref/models/index.html"><em>The Models Reference</em></a></p>
<p>Covers all the model related APIs including model fields, related objects, and <code>QuerySet</code>.</p>
<blockquote>
<p>译者：<a href="http://python.usyiyi.cn/django/index.html">Django 文档协作翻译小组</a>，原文：<a href="https://docs.djangoproject.com/en/1.8/topics/db/models/">Model syntax</a>。</p>
<p>本文以 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">CC BY-NC-SA 3.0</a> 协议发布，转载请保留作者署名和文章出处。</p>
<p><a href="http://python.usyiyi.cn/django/index.html">Django 文档协作翻译小组</a>人手紧缺，有兴趣的朋友可以加入我们，完全公益性质。交流群：467338606。</p>
</blockquote>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/112/index.html">
<img class="uk-book-cover" src="../../static/icons/48/django_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/112/index.html">从Python到Django入门教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="django">django</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">41页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/5/index.html">
<img class="uk-book-cover" src="../../static/icons/48/python_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/5/index.html">超级棒的"派神"书</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/5.html">zhaoolee</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">34页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/97/index.html">
<img class="uk-book-cover" src="../../static/icons/48/python_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/97/index.html">Twisted与异步编程入门</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/60.html">likebeta</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">23页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月29日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 158个">158</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/18/index.html">
<img class="uk-book-cover" src="../../static/icons/48/go_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/18/index.html">Go社区的知识图谱</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/13.html">golang foundation</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="go">go</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">1页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1356个">1356</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/60/index.html">
<img class="uk-book-cover" src="../../static/icons/48/react_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/60/index.html">React 入门教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/36.html">hulufei</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="react">react</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">23页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月5日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 328个">328</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/49/index.html">
<img class="uk-book-cover" src="../../static/icons/48/cplusplus_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/49/index.html">如何设计计算机操作系统</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/26.html">SamyPesse</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="cplusplus">cplusplus</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">11页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月2日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 17175个">17175</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../" title="返回首页"><img class="" src="../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../book/35/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../book/35/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_First%20steps.html" title="新手入门" data-book-page-rel-url="1_First%20steps.html" data-book-page-id="2038">新手入门</a>
<ul>
<li>
<a class="pjax" href="../../book/35/1_1.html" title="从零开始" data-book-page-rel-url="1_1.html" data-book-page-id="2039">从零开始</a>
<ul>
<li>
<a class="pjax" href="../../book/35/1_1_1_Django%20at%20a%20glance.html" title="概览" data-book-page-rel-url="1_1_1_Django%20at%20a%20glance.html" data-book-page-id="2040">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_1_2_Quick%20install%20guide.html" title="安装" data-book-page-rel-url="1_1_2_Quick%20install%20guide.html" data-book-page-id="2041">安装</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/1_2.html" title="教程" data-book-page-rel-url="1_2.html" data-book-page-id="2042">教程</a>
<ul>
<li>
<a class="pjax" href="../../book/35/1_2_1_Part%201%20Models.html" title="第1部分：模型" data-book-page-rel-url="1_2_1_Part%201%20Models.html" data-book-page-id="2043">第1部分：模型</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_2_2_Part%202%20The%20admin%20site.html" title="第2部分：管理站点" data-book-page-rel-url="1_2_2_Part%202%20The%20admin%20site.html" data-book-page-id="2044">第2部分：管理站点</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_2_3_Part%203%20Views%20and%20templates.html" title="第3部分：视图和模板" data-book-page-rel-url="1_2_3_Part%203%20Views%20and%20templates.html" data-book-page-id="2045">第3部分：视图和模板</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_2_4_Part%204%20Forms%20and%20generic%20views.html" title="第4部分：表单和通用视图" data-book-page-rel-url="1_2_4_Part%204%20Forms%20and%20generic%20views.html" data-book-page-id="2046">第4部分：表单和通用视图</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_2_5_Part%205%20Testing.html" title="第5部分：测试" data-book-page-rel-url="1_2_5_Part%205%20Testing.html" data-book-page-id="2047">第5部分：测试</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_2_6_Part%206%20Static%20files.html" title="第6部分：静态文件" data-book-page-rel-url="1_2_6_Part%206%20Static%20files.html" data-book-page-id="2048">第6部分：静态文件</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/1_3.html" title="高级教程" data-book-page-rel-url="1_3.html" data-book-page-id="2049">高级教程</a>
<ul>
<li>
<a class="pjax" href="../../book/35/1_3_1_How%20to%20write%20reusable%20apps.html" title="如何编写可重用的应用" data-book-page-rel-url="1_3_1_How%20to%20write%20reusable%20apps.html" data-book-page-id="2050">如何编写可重用的应用</a>
</li>
<li>
<a class="pjax" href="../../book/35/1_3_2_Writing%20your%20first%20patch%20for%20Django.html" title="为Django编写首个补丁" data-book-page-rel-url="1_3_2_Writing%20your%20first%20patch%20for%20Django.html" data-book-page-id="2051">为Django编写首个补丁</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_The%20model%20layer.html" title="模型层" data-book-page-rel-url="2_The%20model%20layer.html" data-book-page-id="2052">模型层</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_1.html" title="模型" data-book-page-rel-url="2_1.html" data-book-page-id="2053">模型</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_1_1_Model%20syntax.html" title="模型语法" data-book-page-rel-url="2_1_1_Model%20syntax.html" data-book-page-id="2054">模型语法</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_1_2_Field%20types.html" title="字段类型" data-book-page-rel-url="2_1_2_Field%20types.html" data-book-page-id="2055">字段类型</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_1_3_Meta%20options.html" title="元选项" data-book-page-rel-url="2_1_3_Meta%20options.html" data-book-page-id="2056">元选项</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_1_4_Model%20class.html" title="模型类" data-book-page-rel-url="2_1_4_Model%20class.html" data-book-page-id="2057">模型类</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_2.html" title="查询集" data-book-page-rel-url="2_2.html" data-book-page-id="2058">查询集</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_2_1_Making%20queries.html" title="执行查询" data-book-page-rel-url="2_2_1_Making%20queries.html" data-book-page-id="2059">执行查询</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_2_2_QuerySet%20method%20reference.html" title="查询集方法参考" data-book-page-rel-url="2_2_2_QuerySet%20method%20reference.html" data-book-page-id="2060">查询集方法参考</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_2_3_Lookup%20expressions.html" title="查找表达式" data-book-page-rel-url="2_2_3_Lookup%20expressions.html" data-book-page-id="2061">查找表达式</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_3.html" title="模型的实例" data-book-page-rel-url="2_3.html" data-book-page-id="2062">模型的实例</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_3_1_Instance%20methods.html" title="实例方法" data-book-page-rel-url="2_3_1_Instance%20methods.html" data-book-page-id="2063">实例方法</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_3_2_Accessing%20related%20objects.html" title="访问关联对象" data-book-page-rel-url="2_3_2_Accessing%20related%20objects.html" data-book-page-id="2064">访问关联对象</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_4.html" title="迁移" data-book-page-rel-url="2_4.html" data-book-page-id="2065">迁移</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_4_1_Introduction%20to%20Migrations.html" title="迁移简介" data-book-page-rel-url="2_4_1_Introduction%20to%20Migrations.html" data-book-page-id="2066">迁移简介</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_4_2_Operations%20reference.html" title="操作参考" data-book-page-rel-url="2_4_2_Operations%20reference.html" data-book-page-id="2067">操作参考</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_4_3_SchemaEditor.html" title="模式编辑器" data-book-page-rel-url="2_4_3_SchemaEditor.html" data-book-page-id="2068">模式编辑器</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_4_4_Writing%20migrations.html" title="编写迁移" data-book-page-rel-url="2_4_4_Writing%20migrations.html" data-book-page-id="2069">编写迁移</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_5.html" title="高级" data-book-page-rel-url="2_5.html" data-book-page-id="2070">高级</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_5_1_Manager.html" title="管理器" data-book-page-rel-url="2_5_1_Manager.html" data-book-page-id="2071">管理器</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_2_Performing%20raw%20SQL%20queries.html" title="原始的SQL查询" data-book-page-rel-url="2_5_2_Performing%20raw%20SQL%20queries.html" data-book-page-id="2072">原始的SQL查询</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_3_Transactions.html" title="事务" data-book-page-rel-url="2_5_3_Transactions.html" data-book-page-id="2073">事务</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_4_Aggregation.html" title="聚合" data-book-page-rel-url="2_5_4_Aggregation.html" data-book-page-id="2074">聚合</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_5_Custom%20fields.html" title="自定义字段" data-book-page-rel-url="2_5_5_Custom%20fields.html" data-book-page-id="2075">自定义字段</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_6_Multiple%20databases.html" title="多数据库" data-book-page-rel-url="2_5_6_Multiple%20databases.html" data-book-page-id="2076">多数据库</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_7_Custom%20lookups.html" title="自定义查找" data-book-page-rel-url="2_5_7_Custom%20lookups.html" data-book-page-id="2077">自定义查找</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_8_Query%20Expressions.html" title="查询表达式" data-book-page-rel-url="2_5_8_Query%20Expressions.html" data-book-page-id="2078">查询表达式</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_9_Conditional%20Expressions.html" title="条件表达式" data-book-page-rel-url="2_5_9_Conditional%20Expressions.html" data-book-page-id="2079">条件表达式</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_5_10_Database%20Functions.html" title="数据库函数" data-book-page-rel-url="2_5_10_Database%20Functions.html" data-book-page-id="2080">数据库函数</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/2_6.html" title="其它" data-book-page-rel-url="2_6.html" data-book-page-id="2081">其它</a>
<ul>
<li>
<a class="pjax" href="../../book/35/2_6_1_Supported%20databases.html" title="支持的数据库" data-book-page-rel-url="2_6_1_Supported%20databases.html" data-book-page-id="2082">支持的数据库</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_6_2_Legacy%20databases.html" title="遗留的数据库" data-book-page-rel-url="2_6_2_Legacy%20databases.html" data-book-page-id="2083">遗留的数据库</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_6_3_Providing%20initial%20data.html" title="提供初始数据" data-book-page-rel-url="2_6_3_Providing%20initial%20data.html" data-book-page-id="2084">提供初始数据</a>
</li>
<li>
<a class="pjax" href="../../book/35/2_6_4_Optimize%20database%20access.html" title="优化数据库访问" data-book-page-rel-url="2_6_4_Optimize%20database%20access.html" data-book-page-id="2085">优化数据库访问</a>
</li>
<li>
<a class="pjax" href="../../book/35/SUMMARY.html" title="PostgreSQL特色功能" data-book-page-rel-url="SUMMARY.html" data-book-page-id="2086">PostgreSQL特色功能</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_The%20view%20layer.html" title="视图层" data-book-page-rel-url="3_The%20view%20layer.html" data-book-page-id="2087">视图层</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_1.html" title="基础" data-book-page-rel-url="3_1.html" data-book-page-id="2088">基础</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_1_1_URLconfs.html" title="URL配置" data-book-page-rel-url="3_1_1_URLconfs.html" data-book-page-id="2089">URL配置</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_1_2_View%20functions.html" title="视图函数" data-book-page-rel-url="3_1_2_View%20functions.html" data-book-page-id="2090">视图函数</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_1_3_Shortcuts.html" title="快捷函数" data-book-page-rel-url="3_1_3_Shortcuts.html" data-book-page-id="2091">快捷函数</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_1_4_Decorators.html" title="装饰器" data-book-page-rel-url="3_1_4_Decorators.html" data-book-page-id="2092">装饰器</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_2.html" title="参考" data-book-page-rel-url="3_2.html" data-book-page-id="2093">参考</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_2_1_Built-in%20Views.html" title="内建的视图" data-book-page-rel-url="3_2_1_Built-in%20Views.html" data-book-page-id="2094">内建的视图</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_2_2_Request%20response%20objects.html" title="请求/响应 对象" data-book-page-rel-url="3_2_2_Request%20response%20objects.html" data-book-page-id="2095">请求/响应 对象</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_2_3_TemplateResponse%20objects.html" title="TemplateResponse 对象" data-book-page-rel-url="3_2_3_TemplateResponse%20objects.html" data-book-page-id="2096">TemplateResponse 对象</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_2_4_TemplateResponse%20objects.html" title="TemplateResponse 和SimpleTemplateResponse" data-book-page-rel-url="3_2_4_TemplateResponse%20objects.html" data-book-page-id="2097">TemplateResponse 和SimpleTemplateResponse</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_3.html" title="文件上传" data-book-page-rel-url="3_3.html" data-book-page-id="2098">文件上传</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_3_1_Overview.html" title="概览" data-book-page-rel-url="3_3_1_Overview.html" data-book-page-id="2099">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_3_2_File%20objects.html" title="File 对象" data-book-page-rel-url="3_3_2_File%20objects.html" data-book-page-id="2100">File 对象</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_3_3_Storage%20API.html" title="储存API" data-book-page-rel-url="3_3_3_Storage%20API.html" data-book-page-id="2101">储存API</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_3_4_Managing%20files.html" title="管理文件" data-book-page-rel-url="3_3_4_Managing%20files.html" data-book-page-id="2102">管理文件</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_3_5_Custom%20storage.html" title="自定义存储" data-book-page-rel-url="3_3_5_Custom%20storage.html" data-book-page-id="2103">自定义存储</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_4.html" title="基于类的视图" data-book-page-rel-url="3_4.html" data-book-page-id="2104">基于类的视图</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_4_1_Overview.html" title="概览" data-book-page-rel-url="3_4_1_Overview.html" data-book-page-id="2105">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_4_2_Built-in%20display%20views.html" title="内建显示视图" data-book-page-rel-url="3_4_2_Built-in%20display%20views.html" data-book-page-id="2106">内建显示视图</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_4_3_Built-in%20editing%20views.html" title="内建编辑视图" data-book-page-rel-url="3_4_3_Built-in%20editing%20views.html" data-book-page-id="2107">内建编辑视图</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_4_4_Using%20mixins.html" title="使用Mixin" data-book-page-rel-url="3_4_4_Using%20mixins.html" data-book-page-id="2108">使用Mixin</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_4_5_API%20reference.html" title="API参考" data-book-page-rel-url="3_4_5_API%20reference.html" data-book-page-id="2109">API参考</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_4_6_Flattened%20index.html" title="分类索引" data-book-page-rel-url="3_4_6_Flattened%20index.html" data-book-page-id="2110">分类索引</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_5.html" title="高级" data-book-page-rel-url="3_5.html" data-book-page-id="2111">高级</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_5_1_Generating%20CSV.html" title="生成 CSV" data-book-page-rel-url="3_5_1_Generating%20CSV.html" data-book-page-id="2112">生成 CSV</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_5_2_Generating%20PDF.html" title="生成 PDF" data-book-page-rel-url="3_5_2_Generating%20PDF.html" data-book-page-id="2113">生成 PDF</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/3_6.html" title="中间件" data-book-page-rel-url="3_6.html" data-book-page-id="2114">中间件</a>
<ul>
<li>
<a class="pjax" href="../../book/35/3_6_1_Overview.html" title="概览" data-book-page-rel-url="3_6_1_Overview.html" data-book-page-id="2115">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/3_6_2_Built-in%20middleware%20classes.html" title="内建的中间件类" data-book-page-rel-url="3_6_2_Built-in%20middleware%20classes.html" data-book-page-id="2116">内建的中间件类</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/4_The%20template%20layer.html" title="模板层" data-book-page-rel-url="4_The%20template%20layer.html" data-book-page-id="2117">模板层</a>
<ul>
<li>
<a class="pjax" href="../../book/35/4_1.html" title="基础" data-book-page-rel-url="4_1.html" data-book-page-id="2118">基础</a>
<ul>
<li>
<a class="pjax" href="../../book/35/4_1_1_Overview.html" title="概览" data-book-page-rel-url="4_1_1_Overview.html" data-book-page-id="2119">概览</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/4_2.html" title="面向设计师" data-book-page-rel-url="4_2.html" data-book-page-id="2120">面向设计师</a>
<ul>
<li>
<a class="pjax" href="../../book/35/4_2_1_Language%20overview.html" title="语言概览" data-book-page-rel-url="4_2_1_Language%20overview.html" data-book-page-id="2121">语言概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/4_2_2_Built-in%20tags%20and%20filters.html" title="内建标签和过滤器" data-book-page-rel-url="4_2_2_Built-in%20tags%20and%20filters.html" data-book-page-id="2122">内建标签和过滤器</a>
</li>
<li>
<a class="pjax" href="../../book/35/4_2_3_Web%20design%20helpers.html" title="网页设计助手(已废弃)" data-book-page-rel-url="4_2_3_Web%20design%20helpers.html" data-book-page-id="2123">网页设计助手(已废弃)</a>
</li>
<li>
<a class="pjax" href="../../book/35/4_2_4_Humanization.html" title="人性化" data-book-page-rel-url="4_2_4_Humanization.html" data-book-page-id="2124">人性化</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/4_3.html" title="面向程序员" data-book-page-rel-url="4_3.html" data-book-page-id="2125">面向程序员</a>
<ul>
<li>
<a class="pjax" href="../../book/35/4_3_1_Template%20API.html" title="模板API" data-book-page-rel-url="4_3_1_Template%20API.html" data-book-page-id="2126">模板API</a>
</li>
<li>
<a class="pjax" href="../../book/35/4_3_2_Custom%20tags%20and%20filters.html" title="自定义标签和过滤器" data-book-page-rel-url="4_3_2_Custom%20tags%20and%20filters.html" data-book-page-id="2127">自定义标签和过滤器</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/5_Forms.html" title="表单" data-book-page-rel-url="5_Forms.html" data-book-page-id="2128">表单</a>
<ul>
<li>
<a class="pjax" href="../../book/35/5_1.html" title="基础" data-book-page-rel-url="5_1.html" data-book-page-id="2129">基础</a>
<ul>
<li>
<a class="pjax" href="../../book/35/5_1_1_Overview.html" title="概览" data-book-page-rel-url="5_1_1_Overview.html" data-book-page-id="2130">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_1_2_Form%20API.html" title="表单API" data-book-page-rel-url="5_1_2_Form%20API.html" data-book-page-id="2131">表单API</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_1_3_Built-in%20widgets.html" title="内建的字段" data-book-page-rel-url="5_1_3_Built-in%20widgets.html" data-book-page-id="2132">内建的字段</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_1_4_Built-in%20widgets.html" title="内建的Widget" data-book-page-rel-url="5_1_4_Built-in%20widgets.html" data-book-page-id="2133">内建的Widget</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/5_2.html" title="高级" data-book-page-rel-url="5_2.html" data-book-page-id="2134">高级</a>
<ul>
<li>
<a class="pjax" href="../../book/35/5_2_1_Forms%20for%20models.html" title="模型表单" data-book-page-rel-url="5_2_1_Forms%20for%20models.html" data-book-page-id="2135">模型表单</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_2_2_Integrating%20media.html" title="整合媒体" data-book-page-rel-url="5_2_2_Integrating%20media.html" data-book-page-id="2136">整合媒体</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_2_3_Formsets.html" title="表单集" data-book-page-rel-url="5_2_3_Formsets.html" data-book-page-id="2137">表单集</a>
</li>
<li>
<a class="pjax" href="../../book/35/5_2_4_Customizing%20validation.html" title="自定义验证" data-book-page-rel-url="5_2_4_Customizing%20validation.html" data-book-page-id="2138">自定义验证</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_The%20development%20process.html" title="开发过程" data-book-page-rel-url="6_The%20development%20process.html" data-book-page-id="2139">开发过程</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_1.html" title="设置" data-book-page-rel-url="6_1.html" data-book-page-id="2140">设置</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_1_1_Overview.html" title="概览" data-book-page-rel-url="6_1_1_Overview.html" data-book-page-id="2141">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_1_2_Full%20list%20of%20settings.html" title="完整设置列表" data-book-page-rel-url="6_1_2_Full%20list%20of%20settings.html" data-book-page-id="2142">完整设置列表</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_2.html" title="应用程序" data-book-page-rel-url="6_2.html" data-book-page-id="2143">应用程序</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_2_Overview.html" title="概览" data-book-page-rel-url="6_2_Overview.html" data-book-page-id="2144">概览</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_3.html" title="异常" data-book-page-rel-url="6_3.html" data-book-page-id="2145">异常</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_3_Overview.html" title="概览" data-book-page-rel-url="6_3_Overview.html" data-book-page-id="2146">概览</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_4.html" title="django-admin 和 manage.py" data-book-page-rel-url="6_4.html" data-book-page-id="2147">django-admin 和 manage.py</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_4_1_Overview.html" title="概览" data-book-page-rel-url="6_4_1_Overview.html" data-book-page-id="2148">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_4_2_Adding%20custom%20commands.html" title="添加自定义的命令" data-book-page-rel-url="6_4_2_Adding%20custom%20commands.html" data-book-page-id="2149">添加自定义的命令</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_5.html" title="测试" data-book-page-rel-url="6_5.html" data-book-page-id="2150">测试</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_5_1_Introduction.html" title="介绍" data-book-page-rel-url="6_5_1_Introduction.html" data-book-page-id="2151">介绍</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_5_2_Writing%20and%20running%20tests.html" title="编写并运行测试" data-book-page-rel-url="6_5_2_Writing%20and%20running%20tests.html" data-book-page-id="2152">编写并运行测试</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_5_3_Included%20testing%20tools.html" title="包含的测试工具" data-book-page-rel-url="6_5_3_Included%20testing%20tools.html" data-book-page-id="2153">包含的测试工具</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_5_4_Advanced%20topics.html" title="高级主题" data-book-page-rel-url="6_5_4_Advanced%20topics.html" data-book-page-id="2154">高级主题</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/6_6.html" title="部署" data-book-page-rel-url="6_6.html" data-book-page-id="2155">部署</a>
<ul>
<li>
<a class="pjax" href="../../book/35/6_6_1_Overview.html" title="概述" data-book-page-rel-url="6_6_1_Overview.html" data-book-page-id="2156">概述</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_6_2_WSGI%20servers.html" title="WSGI服务器" data-book-page-rel-url="6_6_2_WSGI%20servers.html" data-book-page-id="2157">WSGI服务器</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_6_3_FastCGI%20SCGI%20AJP.html" title="FastCGI/SCGI/AJP (已废弃)" data-book-page-rel-url="6_6_3_FastCGI%20SCGI%20AJP.html" data-book-page-id="2158">FastCGI/SCGI/AJP (已废弃)</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_6_4_Deploying%20static%20files.html" title="部署静态文件" data-book-page-rel-url="6_6_4_Deploying%20static%20files.html" data-book-page-id="2159">部署静态文件</a>
</li>
<li>
<a class="pjax" href="../../book/35/6_6_5_Tracking%20code%20errors%20by%20email.html" title="通过email追踪代码错误" data-book-page-rel-url="6_6_5_Tracking%20code%20errors%20by%20email.html" data-book-page-id="2160">通过email追踪代码错误</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/7_Admin.html" title="Admin" data-book-page-rel-url="7_Admin.html" data-book-page-id="2161">Admin</a>
<ul>
<li>
<a class="pjax" href="../../book/35/7_1_Admin%20site.html" title="管理站点" data-book-page-rel-url="7_1_Admin%20site.html" data-book-page-id="2162">管理站点</a>
</li>
<li>
<a class="pjax" href="../../book/35/7_2_Admin%20actions.html" title="管理操作" data-book-page-rel-url="7_2_Admin%20actions.html" data-book-page-id="2163">管理操作</a>
</li>
<li>
<a class="pjax" href="../../book/35/7_3_Admin%20documentation%20generator.html" title="管理文档生成器" data-book-page-rel-url="7_3_Admin%20documentation%20generator.html" data-book-page-id="2164">管理文档生成器</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/8_Security.html" title="安全" data-book-page-rel-url="8_Security.html" data-book-page-id="2165">安全</a>
<ul>
<li>
<a class="pjax" href="../../book/35/8_1_Security%20overview.html" title="安全概述" data-book-page-rel-url="8_1_Security%20overview.html" data-book-page-id="2166">安全概述</a>
</li>
<li>
<a class="pjax" href="../../book/35/8_2_Disclosed%20security%20issues%20in%20Django.html" title="说明Django中的安全问题" data-book-page-rel-url="8_2_Disclosed%20security%20issues%20in%20Django.html" data-book-page-id="2167">说明Django中的安全问题</a>
</li>
<li>
<a class="pjax" href="../../book/35/8_3_Clickjacking%20protection.html" title="点击劫持保护" data-book-page-rel-url="8_3_Clickjacking%20protection.html" data-book-page-id="2168">点击劫持保护</a>
</li>
<li>
<a class="pjax" href="../../book/35/8_4_Cross%20Site%20Request%20Forgery%20protection.html" title="伪造跨站请求保护" data-book-page-rel-url="8_4_Cross%20Site%20Request%20Forgery%20protection.html" data-book-page-id="2169">伪造跨站请求保护</a>
</li>
<li>
<a class="pjax" href="../../book/35/8_5_Cryptographic%20signing.html" title="加密签名" data-book-page-rel-url="8_5_Cryptographic%20signing.html" data-book-page-id="2170">加密签名</a>
</li>
<li>
<a class="pjax" href="../../book/35/8_6_Security%20Middleware.html" title="安全中间件" data-book-page-rel-url="8_6_Security%20Middleware.html" data-book-page-id="2171">安全中间件</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/9_Internationalization%20and%20localization.html" title="国际化和本地化" data-book-page-rel-url="9_Internationalization%20and%20localization.html" data-book-page-id="2172">国际化和本地化</a>
<ul>
<li>
<a class="pjax" href="../../book/35/9_1_1_Overview.html" title="概述" data-book-page-rel-url="9_1_1_Overview.html" data-book-page-id="2173">概述</a>
</li>
<li>
<a class="pjax" href="../../book/35/9_1_2_Internationalization.html" title="国际化" data-book-page-rel-url="9_1_2_Internationalization.html" data-book-page-id="2174">国际化</a>
</li>
<li>
<a class="pjax" href="../../book/35/9_1_4_Localized%20Web%20UI%20formatting%20and%20form%20input.html" title="本地化WEB UI格式化输入" data-book-page-rel-url="9_1_4_Localized%20Web%20UI%20formatting%20and%20form%20input.html" data-book-page-id="2175">本地化WEB UI格式化输入</a>
</li>
<li>
<a class="pjax" href="../../book/35/9_2_“Local%20flavor”.html" title="“本地特色”" data-book-page-rel-url="9_2_“Local%20flavor”.html" data-book-page-id="2176">“本地特色”</a>
</li>
<li>
<a class="pjax" href="../../book/35/9_3_Time%20zones.html" title="时区" data-book-page-rel-url="9_3_Time%20zones.html" data-book-page-id="2177">时区</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/10_Performance%20and%20optimization%20overview.html" title="性能和优化" data-book-page-rel-url="10_Performance%20and%20optimization%20overview.html" data-book-page-id="2178">性能和优化</a>
</li>
<li>
<a class="pjax" href="../../book/35/11_Python%20compatibility.html" title="Python 的兼容性" data-book-page-rel-url="11_Python%20compatibility.html" data-book-page-id="2179">Python 的兼容性</a>
<ul>
<li>
<a class="pjax" href="../../book/35/11_1_Jython%20support.html" title="Jython 支持" data-book-page-rel-url="11_1_Jython%20support.html" data-book-page-id="2180">Jython 支持</a>
</li>
<li>
<a class="pjax" href="../../book/35/11_2_Python%203%20compatibility.html" title="Python 3 兼容性" data-book-page-rel-url="11_2_Python%203%20compatibility.html" data-book-page-id="2181">Python 3 兼容性</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/13_Common%20Web%20application%20tools.html" title="常见的网站应用工具" data-book-page-rel-url="13_Common%20Web%20application%20tools.html" data-book-page-id="2182">常见的网站应用工具</a>
<ul>
<li>
<a class="pjax" href="../../book/35/13_1.html" title="认证" data-book-page-rel-url="13_1.html" data-book-page-id="2183">认证</a>
<ul>
<li>
<a class="pjax" href="../../book/35/13_1_1_Overview.html" title="概览" data-book-page-rel-url="13_1_1_Overview.html" data-book-page-id="2184">概览</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_1_2_Using%20the%20authentication%20system.html" title="使用认证系统" data-book-page-rel-url="13_1_2_Using%20the%20authentication%20system.html" data-book-page-id="2185">使用认证系统</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_1_3_Password%20management.html" title="密码管理" data-book-page-rel-url="13_1_3_Password%20management.html" data-book-page-id="2186">密码管理</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_1_4_Customizing%20authentication.html" title="自定义认证" data-book-page-rel-url="13_1_4_Customizing%20authentication.html" data-book-page-id="2187">自定义认证</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_1_5_API%20Reference.html" title="API参考" data-book-page-rel-url="13_1_5_API%20Reference.html" data-book-page-id="2188">API参考</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/13_2_Caching.html" title="缓存" data-book-page-rel-url="13_2_Caching.html" data-book-page-id="2189">缓存</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_3_Logging.html" title="日志" data-book-page-rel-url="13_3_Logging.html" data-book-page-id="2190">日志</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_4_Sending%20emails.html" title="发送邮件" data-book-page-rel-url="13_4_Sending%20emails.html" data-book-page-id="2191">发送邮件</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_5_Syndication%20feeds.html" title="组织 feeds (RSS/Atom)" data-book-page-rel-url="13_5_Syndication%20feeds.html" data-book-page-id="2192">组织 feeds (RSS/Atom)</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_6_Pagination.html" title="分页" data-book-page-rel-url="13_6_Pagination.html" data-book-page-id="2193">分页</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_7_Messages%20framework.html" title="消息框架" data-book-page-rel-url="13_7_Messages%20framework.html" data-book-page-id="2194">消息框架</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_8_Serialization.html" title="序列化" data-book-page-rel-url="13_8_Serialization.html" data-book-page-id="2195">序列化</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_9_1_Sessions.html" title="会话" data-book-page-rel-url="13_9_1_Sessions.html" data-book-page-id="2196">会话</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_10_Sitemaps.html" title="网站地图" data-book-page-rel-url="13_10_Sitemaps.html" data-book-page-id="2197">网站地图</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_11_Static%20files%20management.html" title="静态文件处理" data-book-page-rel-url="13_11_Static%20files%20management.html" data-book-page-id="2198">静态文件处理</a>
</li>
<li>
<a class="pjax" href="../../book/35/13_12_Data%20validation.html" title="数据验证" data-book-page-rel-url="13_12_Data%20validation.html" data-book-page-id="2199">数据验证</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/35/14_Other%20core%20functionalities.html" title="其它核心功能" data-book-page-rel-url="14_Other%20core%20functionalities.html" data-book-page-id="2200">其它核心功能</a>
<ul>
<li>
<a class="pjax" href="../../book/35/14_1_Conditional%20content%20processing.html" title="按需内容处理" data-book-page-rel-url="14_1_Conditional%20content%20processing.html" data-book-page-id="2201">按需内容处理</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_2_Content%20types%20and%20generic%20relations.html" title="内容类型和泛型关系" data-book-page-rel-url="14_2_Content%20types%20and%20generic%20relations.html" data-book-page-id="2202">内容类型和泛型关系</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_3_Flatpages.html" title="Flatpage" data-book-page-rel-url="14_3_Flatpages.html" data-book-page-id="2203">Flatpage</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_4_1_Redirects.html" title="重定向" data-book-page-rel-url="14_4_1_Redirects.html" data-book-page-id="2204">重定向</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_5_Signals.html" title="信号" data-book-page-rel-url="14_5_Signals.html" data-book-page-id="2205">信号</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_6_System%20check%20framework.html" title="系统检查框架" data-book-page-rel-url="14_6_System%20check%20framework.html" data-book-page-id="2206">系统检查框架</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_7_The%20sites%20framework.html" title="网站框架" data-book-page-rel-url="14_7_The%20sites%20framework.html" data-book-page-id="2207">网站框架</a>
</li>
<li>
<a class="pjax" href="../../book/35/14_8_Unicode%20in%20Django.html" title="Django中的Unicode编码" data-book-page-rel-url="14_8_Unicode%20in%20Django.html" data-book-page-id="2208">Django中的Unicode编码</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =35;var bookPageId =2054;var bookPageRelUrl ='2_1_1_Model%20syntax.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>