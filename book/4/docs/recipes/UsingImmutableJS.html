
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>结合 Immutable.JS 使用 Redux-Redux 中文文档(Redux in Chinese)</title>
<meta content='结合 Immutable.JS 使用 Redux,Redux 中文文档,Redux in Chinese' name='keywords'>
<meta content='结合 Immutable.JS 使用 Redux,Redux 中文文档,Redux in Chinese' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../../../static/components/css/base.css">
<link rel="stylesheet" href="../../../../static/components/css/reader.css">
<link rel="stylesheet" href="../../../../static/components/css/markdown.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../../../book/4/docs/recipes/reducers/InitializingState.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">初始化 State</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../../../book/4/docs/FAQ.html">
<span class="">常见问题</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../../../book/4/index.html">Redux 中文文档 (Redux in Chinese)</a>
<a target="_blank" rel="nofollow" href="https://github.com/camsong/redux-in-chinese" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  md-content-section  uk-margin-bottom">
<h1 id="结合-immutablejs-使用-redux">结合 Immutable.JS 使用 Redux</h1>
<h2 id="目录">目录</h2>
<ul>
<li><a href="#why-use-immutable-library">为什么应该使用 Immutable.JS 等不可变的库？</a></li>
<li><a href="#why-choose-immutable-js">为什么应该选择 Immutable.JS 作为不可变的库？</a></li>
<li><a href="#issues-with-immutable-js">使用 Immutable.JS 有什么问题？</a></li>
<li><a href="#is-immutable-js-worth-effort">Immutable.JS 是否值得使用？</a></li>
<li><a href="#immutable-js-best-practices">在 Redux 中使用 Immutable.JS 有哪些最佳实践？</a></li>
</ul>
<p><a id="why-use-immutable-library"></a></p>
<h2 id="为什么应该使用-immutablejs-等不可变的库">为什么应该使用 Immutable.JS 等不可变的库？</h2>
<p>Immutable.JS 不可变的库被设计旨在解决 JavaScript 中固有的不可变（Immutability）问题，为应用程序提供不可变带来的所有好处。</p>
<p>你是选择使用这样的库，还是坚持使用简单的 JavaScript，完全取决于你对向应用程序中添加另一个依赖是满意程度，或者取决于你是否确信使用它可以避免 JavaScript 处理不可变的方法中固有的缺陷。</p>
<p>无论你做何选择，请确保你熟悉<a href="http://cn.redux.js.org/docs/recipes/reducers/PrerequisiteConcepts.html#note-on-immutability-side-effects-and-mutation">不可变，副作用和突变</a>的概念。尤其要确保你深入了解 JavaScript 在更新和复制值时所做的操作，以防止意外的突变（mutation）导致应用程序性能的降低，甚至完全破坏应用程序的性能。</p>
<h4 id="更多信息">更多信息</h4>
<p><strong>文档</strong></p>
<ul>
<li><a href="http://cn.redux.js.org/docs/recipes/reducers/PrerequisiteConcepts.html#note-on-immutability-side-effects-and-mutation">技巧：不可变，副作用和突变</a></li>
</ul>
<p><strong>文章</strong></p>
<ul>
<li><a href="https://auth0.com/blog/intro-to-immutable-js/">Immutable.js 和函数式编程概念介绍</a></li>
<li><a href="http://reactkungfu.com/2015/08/pros-and-cons-of-using-immutability-with-react-js/">React.js 使用不可变的优点和缺点</a></li>
</ul>
<p><a id="why-choose-immutable-js"></a></p>
<h2 id="为什么应该选择-immutablejs-作为不可变的库">为什么应该选择 Immutable.JS 作为不可变的库？</h2>
<p>Immutable.JS 旨在以一种高性能的方式提供不可变，以克服 JavaScript 不可变的局限性。其主要优点包括：</p>
<h4 id="保证不可变">保证不可变</h4>
<p>封装在 Immutable.JS 对象中的数据永远不会发生变换（mutate）。总是会返回一个新的拷贝对象。这与 JavaScript 相反，其中一些操作不会改变数据（例如，一些数组方法，包括 map，filter，concat，forEach 等），但有一些操作会改变数据（Array 的 pop，push，splice 等）。</p>
<h4 id="拥有-api">拥有 API</h4>
<p>Immutable.JS 提供了一组丰富的不可变对象来封装数据（例如，Maps，Lists，Sets，Records等），以及一系列操作它们的方法，包括 sort，filter，数据分组，reverse，flatten 以及创建子集等方法。</p>
<h4 id="性能">性能</h4>
<p>Immutable.JS 在实现过程中针对性能优化做了很多工作。这是非常关键的功能，因为使用不可变的数据结构可能需要进行大量昂贵的复制。尤其是对大型复杂数据集（如嵌套的 Redux state tree(状态树)）进行不可变操作时，中间可能会产生很多拷贝对象，当浏览器的垃圾回收器清理对象时，这些拷贝对象会消耗内存并降低性能。</p>
<p>Immutable.JS 内部通过<a href="https://medium.com/@dtinth/immutable-js-persistent-data-structures-and-structural-sharing-6d163fbd73d2#.z1g1ofrsi">巧妙共享数据结构</a>避免了这种情况，最大限度地减少了拷贝数据的情况。它还能执行复杂的操作链，而不会产生不必要的（且昂贵的）中间数据克隆，这些数据很快就会被丢弃。</p>
<p>你决不会看到这些，当然 - 你给 Immutable.JS 对象的数据永远不会发生变化。但是，它从 Immutable.JS 中生成的 <em>intermediate</em> 数据，可以通过链式调用序列中的数据进行自由的变换。因此，你可以拥有不可变数据结构的所有优势，并且不会产生任何潜在的（或很少）性能问题。</p>
<h4 id="更多信息-1">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="https://medium.com/@dtinth/immutable-js-persistent-data-structures-and-structural-sharing-6d163fbd73d2#.6nwctunlc">Immutable.js，持续化数据结构与结构共享</a></li>
<li><a href="https://www.jfokus.se/jfokus16/preso/JavaScript-Immutability--Dont-Go-Changing.pdf">PDF： JavaScript Immutability - 不要更改</a></li>
</ul>
<p><strong>库</strong></p>
<ul>
<li><a href="https://facebook.github.io/immutable-js/">Immutable.js</a></li>
</ul>
<p><a id="issues-with-immutable-js"></a></p>
<h2 id="使用-immutablejs-有什么问题">使用 Immutable.JS 有什么问题？</h2>
<p>尽管功能强大，但 Immutable.JS 还是需要谨慎使用，因为它存在它自己的问题。注意，所有这些问题都可以通过谨慎编码轻松解决。</p>
<h4 id="交互操作困难">交互操作困难</h4>
<p>JavaScript 没有提供不可变的数据结构。因此，要保证 Immutable.JS 其不可变，你的数据就必须封装在 Immutable.JS 对象（例如：<code>Map</code> 或 <code>List</code> 等）中。一旦使用这种方式包裹数据，这些数据就很难与其他普通的 JavaScript 对象进行交互操作。</p>
<p>例如，你将不再能够通过标准 JavaScript 中的点语法或中括号引用对象的属性。相反，你必须通过 Immutable.JS 提供的 <code>get()</code> 或 <code>getIn()</code> 方法来引用它们，这些方法使用了一种笨拙的语法，通过一个字符串字符串数组访问属性，每个字符串代表一个属性的 key。</p>
<p>例如，你将使用 <code>myImmutableMap.getIn(['prop1', 'prop2', 'prop3'])</code> 替代 <code>myObj.prop1.prop2.prop3</code>。</p>
<p>这不仅使得与你自己的代码进行交互操作变得尴尬，而且还与其他库（如 lodash 或 ramda）的交互也会很尴尬，这些库都需要普通的 JavaScript 对象。</p>
<p>注意，Immutable.JS 对象确实包含 <code>toJS()</code> 方法，该方法会返回普通 JavaScript 数据结构形式的对象，但这种方法非常慢，广泛使用将会失去 Immutable.JS 提供的性能优势。</p>
<h3 id="一旦使用immutablejs-将遍布整个代码库">一旦使用，Immutable.JS 将遍布整个代码库</h3>
<p>一旦使用 Immutable.JS 封装数据，你必须使用 Immutable.JS 的 <code>get()</code> 和 <code>getIn()</code> 属性访问器来访问它。</p>
<p>这将会在整个代码库中传播 Immutable.JS，包括潜在组件，你可能不喜欢拥有这种外部依赖关系。你的整个代码库必须知道哪些应该是 Immutable.JS 对象，哪些不是。这也会使得当你想从应用程序中移除 Immutable.JS 变得非常困难。</p>
<p>如下面<a href="#immutable-js-best-practices">最佳实践部分</a>所述，可以通过将<a href="https://medium.com/@dtinth/immutable-js-persistent-data-structures-and-structural-sharing-6d163fbd73d2#.z1g1ofrsi">应用程序逻辑与数据结构解耦</a>来避免此问题。</p>
<h3 id="没有解构或展开运算符spread-operators">没有解构或展开运算符(Spread Operators)</h3>
<p>因为你必须通过 Immutable.JS 本身的 <code>get()</code> 和 <code>getIn()</code> 方法来访问你的数据，所以你不能再使用 JavaScript 的解构运算符（或者提案中的 Object 扩展运算符），这使得你的代码更加冗余。</p>
<h3 id="不适用于经常改变的小数值">不适用于经常改变的小数值</h3>
<p>Immutable.JS 最适用于数据集合，越大越好。当你的数据包含大量小而简单的 JavaScript 对象时，速度会很慢，每个对象都包含几个基本数据类型的 key。</p>
<p>注意：无论如何，这都不适用于 Redux state tree，该树通常为大量数据的集合。</p>
<h3 id="难以调试">难以调试</h3>
<p>Immutable.JS 对象，如 <code>Map</code>，<code>List</code> 等可能很难调试，因为检查这样的对象会看到整个嵌套层级结构，这些层级是你不关心的 Immutable.JS 特定的属性，而且你真正关心的是实际数据被封装了几层。</p>
<p>要解决此问题，请使用浏览器扩展程序，如 <a href="https://chrome.google.com/webstore/detail/immutablejs-object-format/hgldghadipiblonfkkicmgcbbijnpeog">Immutable.js 对象格式化扩展</a>，它在 Chrome 开发工具中显示数据，并在检查数据时隐藏 Immutable.JS 的属性。</p>
<h3 id="破坏对象引用导致性能较差">破坏对象引用，导致性能较差</h3>
<p>不可变的一个主要优点是它可以浅层平等检查，大大提高了性能。</p>
<p>如果两个不同的变量引用同一个不可变对象，那么对这两个变量进行简单的相等检查就足以确定它们是否相等，并且它们所引用的对象是不可变的。等式检查从不必检查任何对象属性的值，因为它是不可变的。</p>
<p>然而，如果封装在 Immutable.JS 对象中的数据本身就是一个对象，渐层检查起不到任何作用。这是因为 Immutable.JS 的 <code>toJS()</code> 方法会将 Immutable.JS 对象中的数据作为 JavaScript 值并返回，每次调用它时都会创建一个新对象，并且使用封装数据来分解引用。</p>
<p>因此，如果调用 <code>toJS()</code> 两次，并将结果赋值给两个不同的变量将导致这两个变量的等式检查失败，即时对象值本身没有改变。</p>
<p>如果在包装组件的 <code>mapStateToProps</code> 函数中使用 <code>toJS()</code>，这就是一个特殊的问题了，因为 React-Redux 对返回的 props 对象中的每个值都进行了简单的比较。例如，下面代码中的 <code>mapStateToProps</code> 返回的 <code>todos</code> prop 所引用的值将始终是不同的对象，因此无法通过渐层等式检查。</p>
<pre><code class="language-js">// 避免在 mapStateToProps 中使用 .toJS() 
function mapStateToProps(state) {
  return {
    todos: state.get('todos').toJS() // 总为新对象
  }
}
</code></pre>
<p>当浅层检查失败时，React-Redux 将导致组件重新渲染。因此，在 <code>mapStateToProps</code> 中使用 <code>toJS()</code> 的方式，将导致组件重新渲染，即时值未发生变化，也会严重影响性能。</p>
<p>该问题可以通过在高阶组件中使用 <code>toJS()</code> 来避免，如下面<a href="#immutable-js-best-practices">最佳实践部分</a>所述。</p>
<h4 id="更多信息-2">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="https://medium.com/@dtinth/immutable-js-persistent-data-structures-and-structural-sharing-6d163fbd73d2#.hzgz7ghbe">Immutable.js，持续化数据结构与结构共享</a></li>
<li><a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">不可变的数据结构与 JavaScript</a></li>
<li><a href="https://medium.com/@esamatti/react-js-pure-render-performance-anti-pattern-fb88c101332f#.9ucv6hwk4">React.js 纯粹渲染性能反面模式（anti-pattern）</a></li>
<li><a href="https://www.toptal.com/react/react-redux-and-immutablejs">使用 React 和 Redux 构建高效的用户界面</a></li>
</ul>
<p><strong>Chrome 扩展程序</strong></p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/immutablejs-object-format/hgldghadipiblonfkkicmgcbbijnpeog">Immutable 对象格式化扩展</a></li>
</ul>
<p><a id="is-immutable-js-worth-effort"></a></p>
<h2 id="immutablejs-是否值得使用">Immutable.JS 是否值得使用？</h2>
<p>通常来说，是的。有各种各样的权衡和意见参考，但有很多很好的理由推荐使用。不要低估尝试追踪无意间突变的 state tree 中的属性的难度。</p>
<p>组件在不必要时重新渲染，在它必要时拒绝渲染，以及追踪致使出现渲染问题的错误都是非常困难的，因为渲染不正确的组件不一定是属性突变的组件。</p>
<p>这个问题主要是由 Redux 的 reducer 返回一个突变的 state 对象引起的。使用 Immutable.JS，此类问题根本不会出现，因此，你的应用程序中就排除了这类错误。</p>
<p>以上这些与它的性能以及丰富的数据操作 API 组合在一起，就是为什么值得使用 Immutable.JS 的原因了。</p>
<h4 id="更多信息-3">更多信息</h4>
<p><strong>文档</strong></p>
<ul>
<li><a href="https://cn.redux.js.org/docs/Troubleshooting.html#nothing-happens-when-i-dispatch-an-action">排错：dispatch action 后什么也没有发生</a></li>
</ul>
<p><a id="immutable-js-best-practices"></a></p>
<h2 id="在-redux-中使用-immutablejs-有哪些最佳实践">在 Redux 中使用 Immutable.JS 有哪些最佳实践？</h2>
<p>Immutable.JS 可以为你的应用程序提供可靠性和显著的性能优化，但必须正确使用。如果你选择使用 Immutable.JS（记住，并不是必须使用它，还有其他不可变库可以使用），请遵循这些有见地的最佳实践，你将能充分利用它，从而不会被它可能导致的任何问题绊倒。</p>
<h3 id="永远不要将普通的-javascript-对象与-immutablejs-混合使用">永远不要将普通的 JavaScript 对象与 Immutable.JS 混合使用</h3>
<p>永远不要让一个普通的 JavaScript 对象包含 Immutable.JS 属性。同样，永远不要让 Immutable.JS 对象包含一个普通的 JavaScript 对象。</p>
<h4 id="更多信息-4">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">不可变的数据结构与 JavaScript</a></li>
</ul>
<h3 id="使整个-redux-state-tree-成为-immutablejs-对象">使整个 Redux state tree 成为 Immutable.JS 对象</h3>
<p>对于使用 Redux 的应用程序来说，你的整个 state tree 应该是 Immutable.JS 对象，根本不需要使用普通的 JavaScript 对象。</p>
<ul>
<li> <p>使用 Immutable.JS 的 <code>fromJS()</code> 函数创建树。</p> </li>
<li> <p>使用 <code>combineReducers</code> 函数的 Immutable.JS 的感知版本，比如 <a href="https://www.npmjs.com/package/redux-immutable">redux-immutable</a> 中的版本，因为 Redux 本身会将 state tree 变成一个普通的 JavaScript 对象。</p> </li>
<li> <p>当使用 Immutable.JS 的 <code>update</code>，<code>merge</code> 或 <code>set</code> 方法将一个 JavaScript 对象添加到一个 Immutable.JS 的 Map 或者 List 中时，要确保被添加的对象事先使用了 <code>fromJS()</code> 转为一个 Immutable 的对象。</p> </li>
</ul>
<p><strong>示例</strong></p>
<pre><code class="language-js">// 避免
const newObj = { key: value }
const newState = state.setIn(['prop1'], newObj)
// newObj 作为普通的 JavaScript 对象，而不是 Immutable.JS 的 Map 类型。

// 推荐
const newObj = { key: value }
const newState = state.setIn(['prop1'], fromJS(newObj))
// newObj 现在是 Immutable.JS 的 Map 类型。
</code></pre>
<h4 id="更多信息-5">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">不可变的数据结构与 JavaScript</a></li>
</ul>
<p><strong>库</strong></p>
<ul>
<li><a href="https://www.npmjs.com/package/redux-immutable">redux-immutable</a></li>
</ul>
<h3 id="在除了-dumb-组件外的组件使用-immutablejs">在除了 Dumb 组件外的组件使用 Immutable.JS</h3>
<p>在任何地方使用 Immutable.JS 都可以保证代码的高性能。在你的 smart 组件中，选择器中，saga 或 thunk中，action 创建函数 中，特别是你的 reducer 中都可以使用它。</p>
<p>但是，请不要在你的 Dumb 组件中使用 Immutable.JS。</p>
<h4 id="更多信息-6">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">不可变的数据结构与 JavaScript</a></li>
<li><a href="http://jaketrent.com/post/smart-dumb-components-react/">React 中的 Smart 和 Dumb 组件</a></li>
</ul>
<h3 id="限制对-tojs-的使用">限制对 <code>toJS()</code> 的使用</h3>
<p><code>toJS()</code> 是一个昂贵(性能)的函数，并且与使用 Immutable.JS 的目的相违背。避免使用它。</p>
<h4 id="更多信息-7">更多信息</h4>
<p><strong>议题</strong></p>
<ul>
<li><a href="https://twitter.com/leeb/status/746733697093668864">Lee Byron 的 Twitter: "Perf tip for #immutablejs…"</a></li>
</ul>
<h3 id="你的选择器应该返回-immutablejs-对象">你的选择器应该返回 Immutable.JS 对象</h3>
<p>总是返回 Immutable.JS 对象。</p>
<h3 id="在-smart-组件中使用-immutablejs-对象">在 Smart 组件中使用 Immutable.JS 对象</h3>
<p>通过 React Redux 的 <code>connect</code> 函数访问 store 的 Smart 组件必须使用 Immutable.JS 作为选择器的返回值。以确保你避免了由于不必要的组件重新渲染而导致的潜在问题。必要时使用库来记忆选择器（例如：reselect）。</p>
<h4 id="更多信息-8">更多信息</h4>
<p><strong>文档</strong></p>
<ul>
<li><a href="http://cn.redux.js.org/docs/recipes/ComputingDerivedData.html">技巧：计算衍生数据</a></li>
<li><a href="../../../../book/4/faq/ImmutableData.html#immutability-issues-with-react-redux">FAQ：Immutable 数据</a></li>
<li><a href="https://github.com/reactjs/reselect/#q-how-do-i-use-reselect-with-immutablejs">Reselect 文档：如何使用 Reselect 结合 Immutable.js？</a></li>
</ul>
<p><strong>文章</strong></p>
<ul>
<li><a href="https://tech.affirm.com/redux-patterns-and-anti-patterns-7d80ef3d53bc#.451p9ycfy">Redux 模式和反面模式</a></li>
</ul>
<p><strong>库</strong></p>
<ul>
<li><a href="https://github.com/reactjs/reselect">Reselect: Redux 的选择器库</a></li>
</ul>
<h3 id="绝对不要在-mapstatetoprops-中使用-tojs">绝对不要在 <code>mapStateToProps</code> 中使用 <code>toJS()</code></h3>
<p>使用 <code>toJS()</code> 将 Immutable.JS 对象转换为 JavaScript 对象时，每次都会返回一个新的对象。如果在 <code>mapStateToProps</code> 中执行此操作，则会导致组件在每次 state tree 更改时都认为该对象已更改，因此会触发不必要的重新渲染。</p>
<h4 id="更多信息-9">更多信息</h4>
<p><strong>文档</strong></p>
<ul>
<li><a href="http://cn.redux.js.org/docs/faq/ImmutableData.html#how-can-immutability-in-mapstatetoprops-cause-components-to-render-unnecessarily">FAQ: Immutable 数据</a></li>
</ul>
<h3 id="永远不要在你的-dumb-组件中使用-immutablejs">永远不要在你的 Dumb 组件中使用 Immutable.JS</h3>
<p>你的 dumb 组件应该是纯粹的；也就是说，它们应该在给定相同的输入的情况下产生相同的输出，并不具有外部依赖性。如果你将这一一个组件作为 props 传递给一个 Immutable.JS 对象，那么你需要依赖 Immutable.JS 来提取 props 的值，并以其他的方式操纵它。</p>
<p>这种依赖性会导致组件不纯，使组件测试更加困难，并且使组件复用和重构变得非常困难。</p>
<h4 id="更多信息-10">更多信息</h4>
<p><strong>文章</strong></p>
<ul>
<li><a href="http://jlongster.com/Using-Immutable-Data-Structures-in-JavaScript">不可变的数据结构与 JavaScript</a></li>
<li><a href="http://jaketrent.com/post/smart-dumb-components-react/">React 中的 Smart 和 Dumb 组件</a></li>
<li><a href="https://hashnode.com/post/tips-for-a-better-redux-architecture-lessons-for-enterprise-scale-civrlqhuy0keqc6539boivk2f">更好的 Redux 体系结构的小贴士：企业规模的经验教训</a></li>
</ul>
<h3 id="使用高阶组件来转换从-smart-组件的-immutablejs-props-到-dumb-组件的-javascript-props">使用高阶组件来转换从 Smart 组件的 Immutable.JS props 到 Dumb 组件的 JavaScript props</h3>
<p>有些东西需要将 Smart 组件中的 Immutable.JS props 映射到 Dumb 组件中的纯 JavaScript props。这里的有些东西是指高阶组件（HOC），它只需从 Smart 组件中获取 Immutable.JS props，然后使用 <code>toJS()</code> 将它们转换为普通 JavaScript props，然后传递给你的 Dumb 组件。</p>
<p>这是一个关于 HOC 的例子：</p>
<pre><code class="language-js">import React from 'react'
import { Iterable } from 'immutable'

export const toJS = WrappedComponent =&gt; wrappedComponentProps =&gt; {
  const KEY = 0
  const VALUE = 1

  const propsJS = Object.entries(
    wrappedComponentProps
  ).reduce((newProps, wrappedComponentProp) =&gt; {
    newProps[wrappedComponentProp[KEY]] = Iterable.isIterable(
      wrappedComponentProp[VALUE]
    )
      ? wrappedComponentProp[VALUE].toJS()
      : wrappedComponentProp[VALUE]
    return newProps
  }, {})

  return &lt;WrappedComponent {...propsJS} /&gt;
}
</code></pre>
<p>以下为如何在 Smart 组件中使用它：</p>
<pre><code class="language-js">import { connect } from 'react-redux'

import { toJS } from './to-js'
import DumbComponent from './dumb.component'

const mapStateToProps = state =&gt; {
  return {
    // obj 是一个 Smart 组件中的不可变对象，
    // 但它通过 toJS 被转换为普通 JavaScript 对象，并以纯 JavaScript 的形式传递给 Dumb 组件对象。
    // 因为它在 mapStateToProps 中仍然是 Immutable.JS 对象，
    // 虽然，这是无疑是错误重新渲染。
    obj: getImmutableObjectFromStateTree(state)
  }
}
export default connect(mapStateToProps)(toJS(DumbComponent))
</code></pre>
<p>通过在 HOC 中将 Immutable.JS 对象转换为纯 JavaScript 值，我们实现了 Dumb 的可移植性，也没在 Smart 组件中使用 <code>toJS()</code> 影响性能。</p>
<p><em>注意: 如果你的应用程序需要高性能，你可能需要完全避免使用 <code>toJS()</code>，所以必须在你的 Dumb 组件中使用 Immutable.JS。但是，对于大多数应用程序来说并非如此，将 Immutable 保留在 Dumb 组件（可维护性，可移植性和更简单的测试）等方面的好处远远超过了保持它任何方面性能优化。</em></p>
<p><em>另外，在高阶组件中使用 <code>toJS</code> 应该不会引起任何性能的下降，因为只有在 connect 组件的 props 改变时才会调用组件。与任何性能问题一样，在决定优化什么之前先进行性能检测。</em></p>
<h4 id="更多信息-11">更多信息</h4>
<p><strong>文档</strong></p>
<ul>
<li><a href="https://facebook.github.io/react/docs/higher-order-components.html">React：高阶组件</a></li>
</ul>
<p><strong>文章</strong></p>
<ul>
<li><a href="https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e#.dw2qd1o1g">深入了解 React 的高阶组件</a></li>
</ul>
<p><strong>议题</strong></p>
<ul>
<li><a href="https://www.reddit.com/r/javascript/comments/4rcqpx/dan_abramov_redux_is_not_an_architecture_or/d5rw0p9/?context=3">Reddit: acemarke 和 cpsubrian 对 Dan Abramov 的评论：Redux 不是一种架构或设计模式，它只是一个库。</a></li>
</ul>
<p><strong>Gists</strong></p>
<ul>
<li><a href="https://gist.github.com/cpsubrian/79e97b6116ab68bd189eb4917203242c#file-tojs-js">cpsubrian: React decorators for redux/react-router/immutable ‘smart’ components</a></li>
</ul>
<h3 id="使用不可变对象格式化-chrome-扩展来辅助调试">使用不可变对象格式化 Chrome 扩展来辅助调试</h3>
<p>安装 <a href="https://chrome.google.com/webstore/detail/immutablejs-object-format/hgldghadipiblonfkkicmgcbbijnpeog">Immutable 对象格式化扩展</a>，并检查你的 Immutable.JS 数据，而不会看到 Immutable.JS 本身的对象属性混淆视听。</p>
<h4 id="更多信息-12">更多信息</h4>
<p><strong>Chrome 扩展</strong></p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/immutablejs-object-format/hgldghadipiblonfkkicmgcbbijnpeog">Immutable 对象格式化扩展</a></li>
</ul>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/177/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/redux_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/177/index.html">30秒学会常用React代码</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/98.html">30 seconds</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="redux">redux</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">52页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年5月26日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1894个">1894</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/5/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/python_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/5/index.html">超级棒的"派神"书</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/5.html">zhaoolee</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">34页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/119/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/code_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/119/index.html">给小白看的设计模式书</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="code">code</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">13页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/40/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/elasticsearch_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/40/index.html">Elasticsearch权威指南</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/21.html">Elastic 中文社区</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="elasticsearch">elasticsearch</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">65页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月26日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2182个">2182</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/12/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/swift_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/12/index.html">Swift 官方教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/8.html">numbbbbb</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="swift">swift</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">51页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 18022个">18022</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../../book/122/index.html">
<img class="uk-book-cover" src="../../../../static/icons/48/spark_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../../book/122/index.html">Databricks Spark 知识库简体中文版</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="spark">spark</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">15页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1个">1</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../../../" title="返回首页"><img class="" src="../../../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../../../book/4/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/README.html" title="自述" data-book-page-rel-url="README.html" data-book-page-id="224">自述</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/README.html" title="介绍" data-book-page-rel-url="docs/introduction/README.html" data-book-page-id="225">介绍</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/Motivation.html" title="动机" data-book-page-rel-url="docs/introduction/Motivation.html" data-book-page-id="226">动机</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/CoreConcepts.html" title="核心概念" data-book-page-rel-url="docs/introduction/CoreConcepts.html" data-book-page-id="227">核心概念</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/ThreePrinciples.html" title="三大原则" data-book-page-rel-url="docs/introduction/ThreePrinciples.html" data-book-page-id="228">三大原则</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/PriorArt.html" title="先前技术" data-book-page-rel-url="docs/introduction/PriorArt.html" data-book-page-id="229">先前技术</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/Ecosystem.html" title="生态系统" data-book-page-rel-url="docs/introduction/Ecosystem.html" data-book-page-id="230">生态系统</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/introduction/Examples.html" title="示例" data-book-page-rel-url="docs/introduction/Examples.html" data-book-page-id="231">示例</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/README.html" title="基础" data-book-page-rel-url="docs/basics/README.html" data-book-page-id="232">基础</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/Actions.html" title="Action" data-book-page-rel-url="docs/basics/Actions.html" data-book-page-id="233">Action</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/Reducers.html" title="Reducer" data-book-page-rel-url="docs/basics/Reducers.html" data-book-page-id="234">Reducer</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/Store.html" title="Store" data-book-page-rel-url="docs/basics/Store.html" data-book-page-id="235">Store</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/DataFlow.html" title="数据流" data-book-page-rel-url="docs/basics/DataFlow.html" data-book-page-id="236">数据流</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/UsageWithReact.html" title="搭配 React" data-book-page-rel-url="docs/basics/UsageWithReact.html" data-book-page-id="237">搭配 React</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/basics/ExampleTodoList.html" title="示例：Todo List" data-book-page-rel-url="docs/basics/ExampleTodoList.html" data-book-page-id="238">示例：Todo List</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/README.html" title="高级" data-book-page-rel-url="docs/advanced/README.html" data-book-page-id="239">高级</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/AsyncActions.html" title="异步 Action" data-book-page-rel-url="docs/advanced/AsyncActions.html" data-book-page-id="240">异步 Action</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/AsyncFlow.html" title="异步数据流" data-book-page-rel-url="docs/advanced/AsyncFlow.html" data-book-page-id="241">异步数据流</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/Middleware.html" title="Middleware" data-book-page-rel-url="docs/advanced/Middleware.html" data-book-page-id="242">Middleware</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/UsageWithReactRouter.html" title="搭配 React Router" data-book-page-rel-url="docs/advanced/UsageWithReactRouter.html" data-book-page-id="243">搭配 React Router</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/ExampleRedditAPI.html" title="示例：Reddit API" data-book-page-rel-url="docs/advanced/ExampleRedditAPI.html" data-book-page-id="244">示例：Reddit API</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/advanced/NextSteps.html" title="下一步" data-book-page-rel-url="docs/advanced/NextSteps.html" data-book-page-id="245">下一步</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/README.html" title="技巧" data-book-page-rel-url="docs/recipes/README.html" data-book-page-id="246">技巧</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/MigratingToRedux.html" title="迁移到 Redux" data-book-page-rel-url="docs/recipes/MigratingToRedux.html" data-book-page-id="247">迁移到 Redux</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/UsingObjectSpreadOperator.html" title="使用对象展开运算符" data-book-page-rel-url="docs/recipes/UsingObjectSpreadOperator.html" data-book-page-id="248">使用对象展开运算符</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/ReducingBoilerplate.html" title="减少样板代码" data-book-page-rel-url="docs/recipes/ReducingBoilerplate.html" data-book-page-id="249">减少样板代码</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/ServerRendering.html" title="服务端渲染" data-book-page-rel-url="docs/recipes/ServerRendering.html" data-book-page-id="250">服务端渲染</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/WritingTests.html" title="编写测试" data-book-page-rel-url="docs/recipes/WritingTests.html" data-book-page-id="251">编写测试</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/ComputingDerivedData.html" title="计算衍生数据" data-book-page-rel-url="docs/recipes/ComputingDerivedData.html" data-book-page-id="252">计算衍生数据</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/ImplementingUndoHistory.html" title="实现撤销重做" data-book-page-rel-url="docs/recipes/ImplementingUndoHistory.html" data-book-page-id="253">实现撤销重做</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/IsolatingSubapps.html" title="子应用隔离" data-book-page-rel-url="docs/recipes/IsolatingSubapps.html" data-book-page-id="254">子应用隔离</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/StructuringReducers.html" title="组织 Reducer" data-book-page-rel-url="docs/recipes/StructuringReducers.html" data-book-page-id="255">组织 Reducer</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/PrerequisiteConcepts.html" title="Reducer 基础概念" data-book-page-rel-url="docs/recipes/reducers/PrerequisiteConcepts.html" data-book-page-id="256">Reducer 基础概念</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/BasicReducerStructure.html" title="Reducer 基础结构" data-book-page-rel-url="docs/recipes/reducers/BasicReducerStructure.html" data-book-page-id="257">Reducer 基础结构</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/SplittingReducerLogic.html" title="Reducer 逻辑拆分" data-book-page-rel-url="docs/recipes/reducers/SplittingReducerLogic.html" data-book-page-id="258">Reducer 逻辑拆分</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/RefactoringReducersExample.html" title="Reducer 重构示例" data-book-page-rel-url="docs/recipes/reducers/RefactoringReducersExample.html" data-book-page-id="259">Reducer 重构示例</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/UsingCombineReducers.html" title="`combineReducers` 用法" data-book-page-rel-url="docs/recipes/reducers/UsingCombineReducers.html" data-book-page-id="260">`combineReducers` 用法</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/BeyondCombineReducers.html" title="`combineReducers` 进阶" data-book-page-rel-url="docs/recipes/reducers/BeyondCombineReducers.html" data-book-page-id="261">`combineReducers` 进阶</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/NormalizingStateShape.html" title="State 范式化" data-book-page-rel-url="docs/recipes/reducers/NormalizingStateShape.html" data-book-page-id="262">State 范式化</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/UpdatingNormalizedData.html" title="管理范式化数据" data-book-page-rel-url="docs/recipes/reducers/UpdatingNormalizedData.html" data-book-page-id="263">管理范式化数据</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/ReusingReducerLogic.html" title="Reducer 逻辑复用" data-book-page-rel-url="docs/recipes/reducers/ReusingReducerLogic.html" data-book-page-id="264">Reducer 逻辑复用</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/ImmutableUpdatePatterns.html" title="不可变更新模式" data-book-page-rel-url="docs/recipes/reducers/ImmutableUpdatePatterns.html" data-book-page-id="265">不可变更新模式</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/reducers/InitializingState.html" title="初始化 State" data-book-page-rel-url="docs/recipes/reducers/InitializingState.html" data-book-page-id="266">初始化 State</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/recipes/UsingImmutableJS.html" title="结合 Immutable.JS 使用 Redux" data-book-page-rel-url="docs/recipes/UsingImmutableJS.html" data-book-page-id="267">结合 Immutable.JS 使用 Redux</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/FAQ.html" title="常见问题" data-book-page-rel-url="docs/FAQ.html" data-book-page-id="268">常见问题</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/General.html" title="综合" data-book-page-rel-url="docs/faq/General.html" data-book-page-id="269">综合</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/Reducers.html" title="Reducer" data-book-page-rel-url="docs/faq/Reducers.html" data-book-page-id="270">Reducer</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/OrganizingState.html" title="组织 State" data-book-page-rel-url="docs/faq/OrganizingState.html" data-book-page-id="271">组织 State</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/StoreSetup.html" title="创建 Store" data-book-page-rel-url="docs/faq/StoreSetup.html" data-book-page-id="272">创建 Store</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/Actions.html" title="Action" data-book-page-rel-url="docs/faq/Actions.html" data-book-page-id="273">Action</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/ImmutableData.html" title="不可变数据" data-book-page-rel-url="docs/faq/ImmutableData.html" data-book-page-id="274">不可变数据</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/CodeStructure.html" title="代码结构" data-book-page-rel-url="docs/faq/CodeStructure.html" data-book-page-id="275">代码结构</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/Performance.html" title="性能" data-book-page-rel-url="docs/faq/Performance.html" data-book-page-id="276">性能</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/DesignDecisions.html" title="设计哲学" data-book-page-rel-url="docs/faq/DesignDecisions.html" data-book-page-id="277">设计哲学</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/ReactRedux.html" title="React Redux" data-book-page-rel-url="docs/faq/ReactRedux.html" data-book-page-id="278">React Redux</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/faq/Miscellaneous.html" title="其它" data-book-page-rel-url="docs/faq/Miscellaneous.html" data-book-page-id="279">其它</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/Troubleshooting.html" title="排错" data-book-page-rel-url="docs/Troubleshooting.html" data-book-page-id="280">排错</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/Glossary.html" title="词汇表" data-book-page-rel-url="docs/Glossary.html" data-book-page-id="281">词汇表</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/README.html" title="API 文档" data-book-page-rel-url="docs/api/README.html" data-book-page-id="282">API 文档</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/api/createStore.html" title="createStore" data-book-page-rel-url="docs/api/createStore.html" data-book-page-id="283">createStore</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/Store.html" title="Store" data-book-page-rel-url="docs/api/Store.html" data-book-page-id="284">Store</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/combineReducers.html" title="combineReducers" data-book-page-rel-url="docs/api/combineReducers.html" data-book-page-id="285">combineReducers</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/applyMiddleware.html" title="applyMiddleware" data-book-page-rel-url="docs/api/applyMiddleware.html" data-book-page-id="286">applyMiddleware</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/bindActionCreators.html" title="bindActionCreators" data-book-page-rel-url="docs/api/bindActionCreators.html" data-book-page-id="287">bindActionCreators</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/api/compose.html" title="compose" data-book-page-rel-url="docs/api/compose.html" data-book-page-id="288">compose</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/react-redux/README.html" title="react-redux 文档" data-book-page-rel-url="docs/react-redux/README.html" data-book-page-id="289">react-redux 文档</a>
<ul>
<li>
<a class="pjax" href="../../../../book/4/docs/react-redux/api.html" title="API" data-book-page-rel-url="docs/react-redux/api.html" data-book-page-id="290">API</a>
</li>
<li>
<a class="pjax" href="../../../../book/4/docs/react-redux/troubleshooting.html" title="排错" data-book-page-rel-url="docs/react-redux/troubleshooting.html" data-book-page-id="291">排错</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../../../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =4;var bookPageId =267;var bookPageRelUrl ='docs/recipes/UsingImmutableJS.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>