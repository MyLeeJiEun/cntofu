
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>开始处理各种语言-Elasticsearch权威指南(Elasticsearch Definitive Guide)</title>
<meta content='开始处理各种语言,Elasticsearch权威指南,Elasticsearch Definitive Guide' name='keywords'>
<meta content='开始处理各种语言,Elasticsearch权威指南,Elasticsearch Definitive Guide' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../static/components/css/base.css">
<link rel="stylesheet" href="../../static/components/css/reader.css">
<link rel="stylesheet" href="../../static/components/css/asciidoc.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../book/40/languages.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">处理人类语言</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../book/40/identifying-words.html">
<span class="">词汇识别</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../book/40/index.html">Elasticsearch权威指南 (Elasticsearch Definitive Guide)</a>
<a target="_blank" rel="nofollow" href="https://github.com/elasticsearch-cn/elasticsearch-definitive-guide" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  asc-content-section  uk-margin-bottom">
<h2 id="language-intro">开始处理各种语言</h2>
<div class="paragraph">
<p>Elasticsearch 为很多世界流行语言提供良好的、简单的、开箱即用的语言分析器集合：</p>
</div>
<div class="paragraph">
<p>阿拉伯语、亚美尼亚语、巴斯克语、巴西语、保加利亚语、加泰罗尼亚语、中文、捷克语、丹麦、荷兰语、英语、芬兰语、法语、加里西亚语、德语、希腊语、北印度语、匈牙利语、印度尼西亚、爱尔兰语、意大利语、日语、韩国语、库尔德语、挪威语、波斯语、葡萄牙语、罗马尼亚语、俄语、西班牙语、瑞典语、土耳其语和泰语。</p>
</div>
<div class="paragraph">
<p>这些分析器承担以下四种角色：</p>
</div>
<div class="ulist">
<ul>
<li> <p>文本拆分为单词：</p>
<div class="paragraph">
<p><code>The quick brown foxes</code> → [ <code>The</code>, <code>quick</code>, <code>brown</code>, <code>foxes</code>]</p>
</div> </li>
<li> <p>大写转小写：</p>
<div class="paragraph">
<p><code>The</code> → <code>the</code></p>
</div> </li>
<li> <p>移除常用的 <em>停用词</em>：</p>
<div class="paragraph">
<p>[ <code>The</code>, <code>quick</code>, <code>brown</code>, <code>foxes</code>] → [ <code>quick</code>, <code>brown</code>, <code>foxes</code>]</p>
</div> </li>
<li> <p>将变型词（例如复数词，过去式）转化为词根：</p>
<div class="paragraph">
<p><code>foxes</code> → <code>fox</code></p>
</div> </li>
</ul>
</div>
<div class="paragraph">
<p>为了更好的搜索性，每个语言的分析器提供了该语言词汇的具体转换规则：</p>
</div>
<div class="ulist">
<ul>
<li> <p><code>英语</code> 分析器移除了所有格 <code>'s</code></p>
<div class="paragraph">
<p><code>John’s</code> → <code>john</code></p>
</div> </li>
<li> <p><code>法语</code> 分析器移除了 <em>元音省略</em> 例如 <code>l'</code> 和 <code>qu'</code> 和 <em>变音符号</em> 例如 <code>¨</code> 或 <code>^</code> ：</p>
<div class="paragraph">
<p><code>l’église</code> → <code>eglis</code></p>
</div> </li>
<li> <p><code>德语</code> 分析器规范化了切词， 将切词中的 <code>ä</code> 和 <code>ae</code> 替换为 <code>a</code> ， 或将 <code>ß</code> 替换为 <code>ss</code> ：</p>
<div class="paragraph">
<p><code>äußerst</code> → <code>ausserst</code></p>
</div> </li>
</ul>
</div>
<div class="sect2">
<h3 id="using-language-analyzers">使用语言分析器</h3>
<div class="paragraph">
<p>Elasticsearch 的内置分析器都是全局可用的，不需要提前配置，它们也可以在字段映射中直接指定在某字段上：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /my_index
{
  "mappings": {
    "blog": {
      "properties": {
        "title": {
          "type":     "string",
          "analyzer": "english" <b class="conum">(1)</b>
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p><code>title</code> 字段将会用 <code>english</code>（英语）分析器替换默认的 <code>standard</code>（标准）分析器</p> </li>
</ol>
</div>
<div class="paragraph">
<p>当然，文本经过 <code>english</code> 分析处理，我们会丢失源数据：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">GET /my_index/_analyze?field=title <b class="conum">(1)</b>
I'm not happy about the foxes</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>切词为: <code>i’m</code>，<code>happi</code>，<code>about</code>，<code>fox</code></p> </li>
</ol>
</div>
<div class="paragraph">
<p>我们无法分辨源文档中是包含单数 <code>fox</code> 还是复数 <code>foxes</code> ；单词 <code>not</code> 因为是停用词所以被移除了， 所以我们无法分辨源文档中是happy about foxes还是not happy about foxes，虽然通过使用 <code>english</code> （英语）分析器，使得匹配规则更加宽松，我们也因此提高了召回率，但却降低了精准匹配文档的能力。</p>
</div>
<div class="paragraph">
<p>为了获得两方面的优势，我们可以使用<a href="#multi-fields">multifields</a>（多字段）对 <code>title</code> 字段建立两次索引： 一次使用 <code>english</code>（英语）分析器，另一次使用 <code>standard</code>（标准）分析器:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /my_index
{
  "mappings": {
    "blog": {
      "properties": {
        "title": { <b class="conum">(1)</b>
          "type": "string",
          "fields": {
            "english": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "english"
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>主 <code>title</code> 字段使用 <code>standard</code>（标准）分析器。</p> </li>
<li> <p><code>title.english</code> 子字段使用 <code>english</code>（英语）分析器。</p> </li>
</ol>
</div>
<div class="paragraph">
<p>替换为该字段映射后，我们可以索引一些测试文档来展示怎么在搜索时使用两个字段：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /my_index/blog/1
{ "title": "I'm happy for this fox" }

PUT /my_index/blog/2
{ "title": "I'm not happy about my fox problem" }

GET /_search
{
  "query": {
    "multi_match": {
      "type":     "most_fields", <b class="conum">(1)</b>
      "query":    "not happy foxes",
      "fields": [ "title", "title.english" ]
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>使用<a href="#most-fields"><code>most_fields</code></a> query type（多字段搜索语法来）让我们可以用多个字段来匹配同一段文本。</p> </li>
</ol>
</div>
<div class="paragraph">
<p>感谢 <code>title.english</code> 字段的切词，无论我们的文档中是否含有单词 <code>foxes</code> 都会被搜索到，第二份文档的相关性排行要比第一份高， 因为在 <code>title</code> 字段中匹配到了单词 <code>not</code> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-language-analyzers">配置语言分析器</h3>
<div class="paragraph">
<p>语言分析器都不需要任何配置，开箱即用， 它们中的大多数都允许你控制它们的各方面行为，具体来说：</p>
</div>
<div id="stem-exclusion" class="dlist">
<dl>
<dt class="hdlist1">
词干提取排除
</dt>
<dd>
<div class="paragraph">
<p>想象下某个场景，用户们想要搜索 <code>World Health Organization</code> 的结果， 但是却被替换为搜索 <code>organ health</code> 的结果。有这个困惑是因为 <code>organ</code> 和 <code>organization</code> 有相同的词根： <code>organ</code> 。 通常这不是什么问题，但是在一些特殊的文档中就会导致有歧义的结果，所以我们希望防止单词 <code>organization</code> 和 <code>organizations</code> 被缩减为词干。</p>
</div>
</dd>
<dt class="hdlist1">
自定义停用词
</dt>
<dd>
<p>英语中默认的停用词列表如下：</p>
<div class="literalblock">
<div class="content">
<pre>a, an, and, are, as, at, be, but, by, for, if, in, into, is, it,
no, not, of, on, or, such, that, the, their, then, there, these,
they, this, to, was, will, with</pre>
</div>
</div>
<div class="paragraph">
<p>关于单词 <code>no</code> 和 <code>not</code> 有点特别，这俩词会反转跟在它们后面的词汇的含义。或许我们应该认为这两个词很重要，不应该把他们看成停用词。</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>为了自定义 <code>english</code> （英语）分词器的行为，我们需要基于 <code>english</code> （英语）分析器创建一个自定义分析器，然后添加一些配置：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type": "english",
          "stem_exclusion": [ "organization", "organizations" ], <b class="conum">(1)</b>
          "stopwords": [ <b class="conum">(2)</b>
            "a", "an", "and", "are", "as", "at", "be", "but", "by", "for",
            "if", "in", "into", "is", "it", "of", "on", "or", "such", "that",
            "the", "their", "then", "there", "these", "they", "this", "to",
            "was", "will", "with"
          ]
        }
      }
    }
  }
}

GET /my_index/_analyze?analyzer=my_english <b class="conum">(3)</b>
The World Health Organization does not sell organs.</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>防止 <code>organization</code> 和 <code>organizations</code> 被缩减为词干</p> </li>
<li> <p>指定一个自定义停用词列表</p> </li>
<li> <p>切词为 <code>world</code> 、 <code>health</code> 、 <code>organization</code> 、 <code>does</code> 、 <code>not</code> 、 <code>sell</code> 、 <code>organ</code></p> </li>
</ol>
</div>
<div class="paragraph">
<p>我们在 <a href="#stemming">将单词还原为词根</a> 和 <a href="#stopwords">停用词: 性能与精度</a> 中分别详细讨论了词干提取和停用词。</p>
</div>
</div>
<div class="sect2">
<h3 id="language-pitfalls">混合语言的陷阱</h3>
<div class="paragraph">
<p>如果你只需要处理一种语言，那么你很幸运。找到一个正确的策略用于处理多语言文档是一项巨大的挑战。</p>
</div>
<div class="sect3">
<h4 id="_在索引的时候">在索引的时候</h4>
<div class="paragraph">
<p>多语言文档主要有以下三个类型：</p>
</div>
<div class="ulist">
<ul>
<li> <p>一种是每份 <em>document</em> （文档）有自己的主语言，并包含一些其他语言的片段（参考 <a href="#one-lang-docs">每份文档一种语言</a>。）</p> </li>
<li> <p>一种是每个 <em>field</em> （域）有自己的主语言, 并包含一些其他语言的片段（参考 <a href="#one-lang-fields">每个域一种语言</a>。）</p> </li>
<li> <p>一种是每个 <em>field</em> （域）都是混合语言（参考 <a href="#mixed-lang-fields">混合语言域</a>。）</p> </li>
</ul>
</div>
<div class="paragraph">
<p>（分词）目标不总是可以实现，我们应当保持将不同语言分隔开。在同一份倒排索引内混合多种语言可能造成一些问题。</p>
</div>
<div class="sect4">
<h5 id="_不合理的词干提取">不合理的词干提取</h5>
<div class="paragraph">
<p>德语的词干提取规则跟英语，法语，瑞典语等是不一样的。 为不同的语言提供同样的词干提规则 将会导致有的词的词根找的正确，有的词的词根找的不正确，有的词根本找不到词根。 甚至是将不同语言的不同含义的词切为同一个词根，合并这些词根的搜索结果会给用户带来困恼。</p>
</div>
<div class="paragraph">
<p>提供多种的词干提取器轮流切分同一份文档的结果很有可能得到一堆垃圾，因为下一个词干提取器会尝试切分一个已经被缩减为词干的单词，这加剧了上面提到的问题。</p>
</div>
<div id="different-scripts" class="sidebarblock">
<div class="content">
<div class="title">
每种书写方式一种词干提取器
</div>
<div class="paragraph">
<p>只有一种情况, <em>only-one-stemmer</em> （唯一词干提取器）会发生，就是每种语言都有自己的书写方式。例如，在以色列就有很大的可能一个文档包含希伯来语， 阿拉伯语，俄语（古代斯拉夫语），和英语。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>אזהרה - Предупреждение - تحذير - Warning</pre>
</div>
</div>
<div class="paragraph">
<p>每种语言使用不同的书写方式，所以一种语言的词干提取器就不会干扰其他语言的，允许为同一份文本提供多种词干提取器。</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_不正确的倒排文档频率">不正确的倒排文档频率</h5>
<div class="paragraph">
<p>在 <a href="#relevance-intro">什么是相关性?</a> （相关性教程）中，一个 term （词）在一份文档中出现的频率越高，该term（词）的权重就越低。 为了精确的计算相关性，你需要精确的统计 term-frequency （词频）。</p>
</div>
<div class="paragraph">
<p>一段德文出现在英语为主的文本中会给与德语单词更高的权重，给那么高权重是因为德语单词相对来说更稀有。 但是如果这份文档跟以德语为主的文档混合在一起，那么这段德文就会有很低的权重。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_在搜索的时候">在搜索的时候</h4>
<div class="paragraph">
<p>然而仅仅考虑你的文档是不够的 。你也需要考虑你的用户会怎么搜索这些文档。 通常你能从用户选择的语言界面来确定用户的主语言，（例如， <code>mysite.de</code> 和 <code>mysite.fr</code> ） 或者从用户的浏览器的HTTP header（HTTP头文件） <a href="http://www.w3.org/International/questions/qa-lang-priorities.en.php"><code>accept-language</code></a> 确定。</p>
</div>
<div class="paragraph">
<p>用户的搜索也注意有三个方面:</p>
</div>
<div class="ulist">
<ul>
<li> <p>用户使用他的主语言搜索。</p> </li>
<li> <p>用户使用其他的语言搜索，但希望获取主语言的搜索结果。</p> </li>
<li> <p>用户使用其他语言搜索，并希望获取该语言的搜索结果。（例如，精通双语的人，或者网络咖啡馆的外国访问者）。</p> </li>
</ul>
</div>
<div class="paragraph">
<p>根据你搜索数据的类型，或许会返回单语言的合适结果（例如，一个用户在西班牙网站搜索商品），也可能是用户主语言的搜索结果和其他语言的搜索结果混合。</p>
</div>
<div class="paragraph">
<p>通常来说，给与用户语言偏好的搜索很有意义。一个使用英语的用户搜索时更希望看到英语 Wikipedia 页面而不是法语 Wikipedia 页面。</p>
</div>
</div>
<div class="sect3">
<h4 id="identifying-language">语言识别</h4>
<div class="paragraph">
<p>你很可能已经知道你的文档所选用的语言，或者你的文档只是在你自己的组织内编写并被翻译成确定的一系列语言。人类的预识别可能是最可靠的将语言正确归类的方法。</p>
</div>
<div class="paragraph">
<p>然而，或许你的文档来自第三方资源且没经过语言归类，或者是不正确的归类。这种情况下，你需要一个学习算法来归类你文档的主语言。幸运的是，一些语言有现成的工具包可以帮你解决这个问题。</p>
</div>
<div class="paragraph">
<p>详细内容是来自 <a href="http://blog.mikemccandless.com/2013/08/a-new-version-of-compact-language.html">Mike McCandless</a> 的 <a href="https://github.com/mikemccand/chromium-compact-language-detector">chromium-compact-language-detector</a> 工具包，使用的是google开发的基于 (<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>)的开源工具包 <a href="https://code.google.com/p/cld2/">Compact Language Detector</a> (CLD) 。 它小巧，快速，且精确，并能根据短短的两句话就可以检测 160+ 的语言。 它甚至能对单块文本检测多种语言。支持多种开发语言包括 Python，Perl，JavaScript，PHP，C#/.NET，和 R 。</p>
</div>
<div class="paragraph">
<p>确定用户搜索请求的语言并不是那么简单。 CLD 是为了至少 200 字符长的文本设计的。字符短的文本，例如搜索关键字，会产生不精确的结果。 这种情况下，或许采取一些简单的启发式算法会更好些，例如该国家的官方语言，用户选择的语言，和 HTTP <code>accept-language</code> headers （HTTP头文件）。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="one-lang-docs">每份文档一种语言</h3>
<div class="paragraph">
<p>每个主语言文档 只需要相当简单的设置。 不同语言的文档被分别存放在不同的索引中 — <code>blogs-en</code> 、 <code>blogs-fr</code> ， 如此等等 — 这样每个索引就可以使用相同的类型和相同的域，只是使用不同的分析器：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /blogs-en
{
  "mappings": {
    "post": {
      "properties": {
        "title": {
          "type": "string", <b class="conum">(1)</b>
          "fields": {
            "stemmed": {
              "type":     "string",
              "analyzer": "english" <b class="conum">(2)</b>
            }
}}}}}}

PUT /blogs-fr
{
  "mappings": {
    "post": {
      "properties": {
        "title": {
          "type": "string", <b class="conum">(1)</b>
          "fields": {
            "stemmed": {
              "type":     "string",
              "analyzer": "french" <b class="conum">(2)</b>
            }
}}}}}}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>索引 <code>blogs-en</code> 和 <code>blogs-fr</code> 的 <code>post</code> 类型都有一个包含 <code>title</code> 域。</p> </li>
<li> <p><code>title.stemmed</code> 子域使用了具体语言的分析器。</p> </li>
</ol>
</div>
<div class="paragraph">
<p>这个方法干净且灵活。新语言很容易被添加 — 仅仅是创建一个新索引—​因为每种语言都是彻底的被分开， 我们不用遭受在 <a href="#language-pitfalls">混合语言的陷阱</a> 中描述的词频和词干提取的问题。</p>
</div>
<div class="paragraph">
<p>每一种语言的文档都可被独立查询，或者通过查询多种索引来查询多种语言。 我们甚至可以使用 <code>indices_boost</code> 参数为特定的语言添加优先权：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">GET /blogs-*/post/_search <b class="conum">(1)</b>
{
    "query": {
        "multi_match": {
            "query":   "deja vu",
            "fields":  [ "title", "title.stemmed" ] <b class="conum">(2)</b>
            "type":    "most_fields"
        }
    },
    "indices_boost": { <b class="conum">(3)</b>
        "blogs-en": 3,
        "blogs-fr": 2
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>这个查询会在所有以 <code>blogs-</code> 开头的索引中执行。</p> </li>
<li> <p><code>title.stemmed</code> 字段使用每个索引中指定的分析器查询。</p> </li>
<li> <p>也许用户接受语言标头表明，更倾向于英语，然后是法语，所以相应的，我们会为每个索引的结果添加权重。任何其他语言会有一个中性的权重 1 。</p> </li>
</ol>
</div>
<div class="sect3">
<h4 id="_外语单词">外语单词</h4>
<div class="paragraph">
<p>当然，有些文档含有一些其他语言的单词或句子，且不幸的是这些单词被切为了正确的词根。对于主语言文档，这通常并不是主要的问题。用户经常需要搜索很精确的单词—​例如，一个其他语言的引用—​而不是语型变化过的单词。召回率 (Recall)可以通过使用 <a href="#token-normalization">归一化词元</a> 中讲解的技术提升。</p>
</div>
<div class="paragraph">
<p>假设有些单词例如地名应当能被主语言和原始语言都能检索，例如 <em>Munich</em> 和 <em>München</em> 。 这些单词实际上是我们在 <a href="#synonyms">同义词</a> 解释过的同义词。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">
不要对语言使用类型
</div>
<div class="paragraph">
<p>你也许很倾向于为每个语言使用分开的类型，来代替使用分开的索引。 为了达到最佳效果，你应当避免使用类型。在 <a href="#mapping">类型和映射</a> 解释过，不同类型但有相同域名的域会被索引在 <em>相同的倒排索引</em> 中。这意味着不同类型（和不同语言）的词频混合在了一起。</p>
</div>
<div class="paragraph">
<p>为了确保一种语言的词频不会污染其他语言的词频，在后面的章节中会介绍到，无论是为每个语言使用单独的索引，还是使用单独的域都可以。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="one-lang-fields">每个域一种语言</h3>
<div class="paragraph">
<p>对于一些实体类，例如:产品、电影、法律声明， 通常这样的一份文本会被翻译成不同语言的文档。虽然这些不同语言的文档可以单独保存在各自的索引中。但另一种更合理的方式是同一份文本的所有翻译统一保存在一个索引中。。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
   "title":     "Fight club",
   "title_br":  "Clube de Luta",
   "title_cz":  "Klub rváčů",
   "title_en":  "Fight club",
   "title_es":  "El club de la lucha",
   ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>每份翻译存储在不同的域中，根据域的语言决定使用相应的分析器：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /movies
{
  "mappings": {
    "movie": {
      "properties": {
        "title": { <b class="conum">(1)</b>
          "type":       "string"
        },
        "title_br": { <b class="conum">(2)</b>
            "type":     "string",
            "analyzer": "brazilian"
        },
        "title_cz": { <b class="conum">(2)</b>
            "type":     "string",
            "analyzer": "czech"
        },
        "title_en": { <b class="conum">(2)</b>
            "type":     "string",
            "analyzer": "english"
        },
        "title_es": { <b class="conum">(2)</b>
            "type":     "string",
            "analyzer": "spanish"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p><code>title</code> 域含有title的原文，并使用 <code>standard</code> （标准）分析器。</p> </li>
<li> <p>其他字段使用适合自己语言的分析器。</p> </li>
</ol>
</div>
<div class="paragraph">
<p>在维持干净的词频方面，虽然 <em>index-per-language</em> （一种语言一份索引的方法），不像 <em>field-per-language</em> （一种语言一个域的方法）分开索引那么灵活。但是使用 <a href="#updating-a-mapping"><code>update-mapping</code> API</a> 添加一个新域也很简单，那些新域需要新的自定义分析器，这些新分析器只能在索引创建时被装配。有一个变通的方案，你可以先关闭这个索引 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/indices-open-close.html">close</a> ，然后使用 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/indices-update-settings.html"><code>update-settings</code> API</a> ，重新打开这个索引，但是关掉这个索引意味着得停止服务一段时间。</p>
</div>
<div class="paragraph">
<p>文档的一种语言可以单独查询，也可以通过查询多个域来查询多种语言。我们甚至可以通过对特定语言设置偏好来提高字段优先级：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">GET /movies/movie/_search
{
    "query": {
        "multi_match": {
            "query":    "club de la lucha",
            "fields": [ "title*", "title_es^2" ], <b class="conum">(1)</b>
            "type":     "most_fields"
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>这个搜索查询所有以 <code>title</code> 为前缀的域，但是对 <code>title_es</code> 域加权重 <code>2</code> 。其他的所有域是中性权重 <code>1</code> 。</p> </li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="mixed-lang-fields">混合语言域</h3>
<div class="paragraph">
<p>通常,那些从源数据中获得的多种语言混合在一个域中的文档会超出你的控制， 例如从网上爬取的页面：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{ "body": "Page not found / Seite nicht gefunden / Page non trouvée" }</code></pre>
</div>
</div>
<div class="paragraph">
<p>正确的处理多语言类型文档是非常困难的。即使你简单对所有的域使用 <code>standard</code> （标准）分析器， 但你的文档会变得不利于搜索，除非你使用了合适的词干提取器。当然，你不可能只选择一个词干提取器。 词干提取器是由语言具体决定的。或者，词干提取器是由语言和脚本所具体决定的。像在 <a href="#different-scripts">每种书写方式一种词干提取器</a> 讨论中那样。 如果每个语言都使用不同的脚本，那么词干提取器就可以合并了。</p>
</div>
<div class="paragraph">
<p>假设你的混合语言使用的是一样的脚本，例如拉丁文，你有三个可用的选择：</p>
</div>
<div class="ulist">
<ul>
<li> <p>切分到不同的域</p> </li>
<li> <p>进行多次分析</p> </li>
<li> <p>使用 n-grams</p> </li>
</ul>
</div>
<div class="sect3">
<h4 id="_切分到不同的域">切分到不同的域</h4>
<div class="paragraph">
<p>在 <a href="#identifying-language">语言识别</a> 提到过的紧凑的语言检测可以告诉你哪部分文档属于哪种语言。 你可以用 <a href="#one-lang-fields">每个域一种语言</a> 中用过的一样的方法来根据语言切分文本。</p>
</div>
</div>
<div class="sect3">
<h4 id="_进行多次分析">进行多次分析</h4>
<div class="paragraph">
<p>如果你主要处理数量有限的语言， 你可以使用多个域，每种语言都分析文本一次。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /movies
{
  "mappings": {
    "title": {
      "properties": {
        "title": { <b class="conum">(1)</b>
          "type": "string",
          "fields": {
            "de": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "german"
            },
            "en": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "english"
            },
            "fr": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "french"
            },
            "es": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "spanish"
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>主域 <code>title</code> 使用 <code>standard</code> （标准）分析器</p> </li>
<li> <p>每个子域提供不同的语言分析器来对 <code>title</code> 域文本进行分析。</p> </li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_使用_n_grams">使用 n-grams</h4>
<div class="paragraph">
<p>你可以使用 <a href="#ngrams-compound-words">Ngrams 在复合词的应用</a> 中描述的方法索引所有的词汇为 n-grams。 大多数语型变化包含给单词添加一个后缀（或在一些语言中添加前缀），所以通过将单词拆成 n-grams，你有很大的机会匹配到相似但不完全一样的单词。 这个可以结合 <em>analyze-multiple times</em> （多次分析）方法为不支持的语言提供全域抓取：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT /movies
{
  "settings": {
    "analysis": {...} <b class="conum">(1)</b>
  },
  "mappings": {
    "title": {
      "properties": {
        "title": {
          "type": "string",
          "fields": {
            "de": {
              "type":     "string",
              "analyzer": "german"
            },
            "en": {
              "type":     "string",
              "analyzer": "english"
            },
            "fr": {
              "type":     "string",
              "analyzer": "french"
            },
            "es": {
              "type":     "string",
              "analyzer": "spanish"
            },
            "general": { <b class="conum">(2)</b>
              "type":     "string",
              "analyzer": "trigrams"
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>在 <code>analysis</code> 章节, 我们按照 <a href="#ngrams-compound-words">Ngrams 在复合词的应用</a> 中描述的定义了同样的 <code>trigrams</code> 分析器。</p> </li>
<li> <p>在 <code>title.general</code> 域使用 <code>trigrams</code> 分析器索引所有的语言。</p> </li>
</ol>
</div>
<div class="paragraph">
<p>当查询抓取所有 <code>general</code> 域时，你可以使用 <code>minimum_should_match</code> （最少应当匹配数）来减少低质量的匹配。 或许也需要对其他字段进行稍微的加权，给与主语言域的权重要高于其他的在 <code>general</code> 上的域：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">GET /movies/movie/_search
{
    "query": {
        "multi_match": {
            "query":    "club de la lucha",
            "fields": [ "title*^1.5", "title.general" ], <b class="conum">(1)</b>
            "type":     "most_fields",
            "minimum_should_match": "75%" <b class="conum">(2)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li> <p>所有 <code>title</code> 或 <code>title.*</code> 域给与了比 <code>title.general</code> 域稍微高的加权。</p> </li>
<li> <p><code>minimum_should_match</code>（最少应当匹配数） 参数减少了低质量匹配的返回数, 这对 <code>title.general</code> 域尤其重要。</p> </li>
</ol>
</div>
</div>
</div>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/111/index.html">
<img class="uk-book-cover" src="../../static/icons/48/kubernetes_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/111/index.html">和我一步步部署 kubernetes 集群</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="kubernetes">kubernetes</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">17页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/60/index.html">
<img class="uk-book-cover" src="../../static/icons/48/react_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/60/index.html">React 入门教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/36.html">hulufei</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="react">react</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">23页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月5日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 328个">328</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/158/index.html">
<img class="uk-book-cover" src="../../static/icons/48/java_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/158/index.html">java语法整理</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/90.html">niliv</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="java">java</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">42页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年5月26日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 2个">2</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/10/index.html">
<img class="uk-book-cover" src="../../static/icons/48/java_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/10/index.html">Java 编码规范</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/6.html">waylau</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="java">java</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">12页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 127个">127</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/193/index.html">
<img class="uk-book-cover" src="../../static/icons/48/html5_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/193/index.html">Pixi教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/109.html">Zainking</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="html5">html5</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">56页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2020年5月17日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 个"></span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/147/index.html">
<img class="uk-book-cover" src="../../static/icons/48/javascript_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/147/index.html">JSON风格指南</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/79.html">darcyliu</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="javascript">javascript</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">1页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年3月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1139个">1139</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../" title="返回首页"><img class="" src="../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../book/40/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../book/40/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../book/40/foreword_id.html" title="序言" data-book-page-rel-url="foreword_id.html" data-book-page-id="9242">序言</a>
</li>
<li>
<a class="pjax" href="../../book/40/preface.html" title="前言" data-book-page-rel-url="preface.html" data-book-page-id="9243">前言</a>
<ul>
<li>
<a class="pjax" href="../../book/40/_who_should_read_this_book.html" title="谁应该读这本书" data-book-page-rel-url="_who_should_read_this_book.html" data-book-page-id="9244">谁应该读这本书</a>
</li>
<li>
<a class="pjax" href="../../book/40/_why_we_wrote_this_book.html" title="为什么我们要写这本书" data-book-page-rel-url="_why_we_wrote_this_book.html" data-book-page-id="9245">为什么我们要写这本书</a>
</li>
<li>
<a class="pjax" href="../../book/40/_elasticsearch_version.html" title="Elasticsearch 版本" data-book-page-rel-url="_elasticsearch_version.html" data-book-page-id="9246">Elasticsearch 版本</a>
</li>
<li>
<a class="pjax" href="../../book/40/_how_to_read_this_book.html" title="如何读这本书" data-book-page-rel-url="_how_to_read_this_book.html" data-book-page-id="9247">如何读这本书</a>
</li>
<li>
<a class="pjax" href="../../book/40/_navigating_this_book.html" title="本书导航" data-book-page-rel-url="_navigating_this_book.html" data-book-page-id="9248">本书导航</a>
</li>
<li>
<a class="pjax" href="../../book/40/_online_resources.html" title="在线资源" data-book-page-rel-url="_online_resources.html" data-book-page-id="9249">在线资源</a>
</li>
<li>
<a class="pjax" href="../../book/40/_conventions_used_in_this_book.html" title="本书协议约定" data-book-page-rel-url="_conventions_used_in_this_book.html" data-book-page-id="9250">本书协议约定</a>
</li>
<li>
<a class="pjax" href="../../book/40/_using_code_examples.html" title="使用代码示例" data-book-page-rel-url="_using_code_examples.html" data-book-page-id="9251">使用代码示例</a>
</li>
<li>
<a class="pjax" href="../../book/40/_acknowledgments.html" title="鸣谢" data-book-page-rel-url="_acknowledgments.html" data-book-page-id="9252">鸣谢</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/getting-started.html" title="基础入门" data-book-page-rel-url="getting-started.html" data-book-page-id="9253">基础入门</a>
<ul>
<li>
<a class="pjax" href="../../book/40/intro.html" title="你知道的, 为了搜索&#8230;&#8203;" data-book-page-rel-url="intro.html" data-book-page-id="9254">你知道的, 为了搜索&#8230;&#8203;</a>
</li>
<li>
<a class="pjax" href="../../book/40/distributed-cluster.html" title="集群内的原理" data-book-page-rel-url="distributed-cluster.html" data-book-page-id="9255">集群内的原理</a>
</li>
<li>
<a class="pjax" href="../../book/40/data-in-data-out.html" title="数据输入和输出" data-book-page-rel-url="data-in-data-out.html" data-book-page-id="9256">数据输入和输出</a>
</li>
<li>
<a class="pjax" href="../../book/40/distributed-docs.html" title="分布式文档存储" data-book-page-rel-url="distributed-docs.html" data-book-page-id="9257">分布式文档存储</a>
</li>
<li>
<a class="pjax" href="../../book/40/search.html" title="搜索——最基本的工具" data-book-page-rel-url="search.html" data-book-page-id="9258">搜索——最基本的工具</a>
</li>
<li>
<a class="pjax" href="../../book/40/mapping-analysis.html" title="映射和分析" data-book-page-rel-url="mapping-analysis.html" data-book-page-id="9259">映射和分析</a>
</li>
<li>
<a class="pjax" href="../../book/40/full-body-search.html" title="请求体查询" data-book-page-rel-url="full-body-search.html" data-book-page-id="9260">请求体查询</a>
</li>
<li>
<a class="pjax" href="../../book/40/sorting.html" title="排序与相关性" data-book-page-rel-url="sorting.html" data-book-page-id="9261">排序与相关性</a>
</li>
<li>
<a class="pjax" href="../../book/40/distributed-search.html" title="执行分布式检索" data-book-page-rel-url="distributed-search.html" data-book-page-id="9262">执行分布式检索</a>
</li>
<li>
<a class="pjax" href="../../book/40/index-management.html" title="索引管理" data-book-page-rel-url="index-management.html" data-book-page-id="9263">索引管理</a>
</li>
<li>
<a class="pjax" href="../../book/40/inside-a-shard.html" title="分片内部原理" data-book-page-rel-url="inside-a-shard.html" data-book-page-id="9264">分片内部原理</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/search-in-depth.html" title="深入搜索" data-book-page-rel-url="search-in-depth.html" data-book-page-id="9265">深入搜索</a>
<ul>
<li>
<a class="pjax" href="../../book/40/structured-search.html" title="结构化搜索" data-book-page-rel-url="structured-search.html" data-book-page-id="9266">结构化搜索</a>
</li>
<li>
<a class="pjax" href="../../book/40/full-text-search.html" title="全文搜索" data-book-page-rel-url="full-text-search.html" data-book-page-id="9267">全文搜索</a>
</li>
<li>
<a class="pjax" href="../../book/40/multi-field-search.html" title="多字段搜索" data-book-page-rel-url="multi-field-search.html" data-book-page-id="9268">多字段搜索</a>
</li>
<li>
<a class="pjax" href="../../book/40/proximity-matching.html" title="近似匹配" data-book-page-rel-url="proximity-matching.html" data-book-page-id="9269">近似匹配</a>
</li>
<li>
<a class="pjax" href="../../book/40/partial-matching.html" title="部分匹配" data-book-page-rel-url="partial-matching.html" data-book-page-id="9270">部分匹配</a>
</li>
<li>
<a class="pjax" href="../../book/40/controlling-relevance.html" title="控制相关度" data-book-page-rel-url="controlling-relevance.html" data-book-page-id="9271">控制相关度</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/languages.html" title="处理人类语言" data-book-page-rel-url="languages.html" data-book-page-id="9272">处理人类语言</a>
<ul>
<li>
<a class="pjax" href="../../book/40/language-intro.html" title="开始处理各种语言" data-book-page-rel-url="language-intro.html" data-book-page-id="9273">开始处理各种语言</a>
</li>
<li>
<a class="pjax" href="../../book/40/identifying-words.html" title="词汇识别" data-book-page-rel-url="identifying-words.html" data-book-page-id="9274">词汇识别</a>
</li>
<li>
<a class="pjax" href="../../book/40/token-normalization.html" title="归一化词元" data-book-page-rel-url="token-normalization.html" data-book-page-id="9275">归一化词元</a>
</li>
<li>
<a class="pjax" href="../../book/40/stemming.html" title="将单词还原为词根" data-book-page-rel-url="stemming.html" data-book-page-id="9276">将单词还原为词根</a>
</li>
<li>
<a class="pjax" href="../../book/40/stopwords.html" title="停用词: 性能与精度" data-book-page-rel-url="stopwords.html" data-book-page-id="9277">停用词: 性能与精度</a>
</li>
<li>
<a class="pjax" href="../../book/40/synonyms.html" title="同义词" data-book-page-rel-url="synonyms.html" data-book-page-id="9278">同义词</a>
</li>
<li>
<a class="pjax" href="../../book/40/fuzzy-matching.html" title="拼写错误" data-book-page-rel-url="fuzzy-matching.html" data-book-page-id="9279">拼写错误</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/aggregations.html" title="聚合" data-book-page-rel-url="aggregations.html" data-book-page-id="9280">聚合</a>
<ul>
<li>
<a class="pjax" href="../../book/40/aggs-high-level.html" title="高阶概念" data-book-page-rel-url="aggs-high-level.html" data-book-page-id="9281">高阶概念</a>
</li>
<li>
<a class="pjax" href="../../book/40/_aggregation_test_drive.html" title="尝试聚合" data-book-page-rel-url="_aggregation_test_drive.html" data-book-page-id="9282">尝试聚合</a>
</li>
<li>
<a class="pjax" href="../../book/40/_building_bar_charts.html" title="条形图" data-book-page-rel-url="_building_bar_charts.html" data-book-page-id="9283">条形图</a>
</li>
<li>
<a class="pjax" href="../../book/40/_looking_at_time.html" title="按时间统计" data-book-page-rel-url="_looking_at_time.html" data-book-page-id="9284">按时间统计</a>
</li>
<li>
<a class="pjax" href="../../book/40/_scoping_aggregations.html" title="范围限定的聚合" data-book-page-rel-url="_scoping_aggregations.html" data-book-page-id="9285">范围限定的聚合</a>
</li>
<li>
<a class="pjax" href="../../book/40/_filtering_queries_and_aggregations.html" title="过滤和聚合" data-book-page-rel-url="_filtering_queries_and_aggregations.html" data-book-page-id="9286">过滤和聚合</a>
</li>
<li>
<a class="pjax" href="../../book/40/_sorting_multivalue_buckets.html" title="多桶排序" data-book-page-rel-url="_sorting_multivalue_buckets.html" data-book-page-id="9287">多桶排序</a>
</li>
<li>
<a class="pjax" href="../../book/40/_approximate_aggregations.html" title="近似聚合" data-book-page-rel-url="_approximate_aggregations.html" data-book-page-id="9288">近似聚合</a>
</li>
<li>
<a class="pjax" href="../../book/40/significant-terms.html" title="通过聚合发现异常指标" data-book-page-rel-url="significant-terms.html" data-book-page-id="9289">通过聚合发现异常指标</a>
</li>
<li>
<a class="pjax" href="../../book/40/docvalues-and-fielddata.html" title="Doc Values and Fielddata" data-book-page-rel-url="docvalues-and-fielddata.html" data-book-page-id="9290">Doc Values and Fielddata</a>
</li>
<li>
<a class="pjax" href="../../book/40/_closing_thoughts.html" title="总结" data-book-page-rel-url="_closing_thoughts.html" data-book-page-id="9291">总结</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/geoloc.html" title="地理位置" data-book-page-rel-url="geoloc.html" data-book-page-id="9292">地理位置</a>
<ul>
<li>
<a class="pjax" href="../../book/40/geopoints.html" title="地理坐标点" data-book-page-rel-url="geopoints.html" data-book-page-id="9293">地理坐标点</a>
</li>
<li>
<a class="pjax" href="../../book/40/geohashes.html" title="Geohashes" data-book-page-rel-url="geohashes.html" data-book-page-id="9294">Geohashes</a>
</li>
<li>
<a class="pjax" href="../../book/40/geo-aggs.html" title="地理位置聚合" data-book-page-rel-url="geo-aggs.html" data-book-page-id="9295">地理位置聚合</a>
</li>
<li>
<a class="pjax" href="../../book/40/geo-shapes.html" title="地理形状" data-book-page-rel-url="geo-shapes.html" data-book-page-id="9296">地理形状</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/modeling-your-data.html" title="数据建模" data-book-page-rel-url="modeling-your-data.html" data-book-page-id="9297">数据建模</a>
<ul>
<li>
<a class="pjax" href="../../book/40/relations.html" title="关联关系处理" data-book-page-rel-url="relations.html" data-book-page-id="9298">关联关系处理</a>
</li>
<li>
<a class="pjax" href="../../book/40/nested-objects.html" title="嵌套对象" data-book-page-rel-url="nested-objects.html" data-book-page-id="9299">嵌套对象</a>
</li>
<li>
<a class="pjax" href="../../book/40/parent-child.html" title="父-子关系文档" data-book-page-rel-url="parent-child.html" data-book-page-id="9300">父-子关系文档</a>
</li>
<li>
<a class="pjax" href="../../book/40/scale.html" title="扩容设计" data-book-page-rel-url="scale.html" data-book-page-id="9301">扩容设计</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="../../book/40/administration.html" title="管理、监控和部署" data-book-page-rel-url="administration.html" data-book-page-id="9302">管理、监控和部署</a>
<ul>
<li>
<a class="pjax" href="../../book/40/cluster-admin.html" title="监控" data-book-page-rel-url="cluster-admin.html" data-book-page-id="9303">监控</a>
</li>
<li>
<a class="pjax" href="../../book/40/deploy.html" title="部署" data-book-page-rel-url="deploy.html" data-book-page-id="9304">部署</a>
</li>
<li>
<a class="pjax" href="../../book/40/post_deploy.html" title="部署后" data-book-page-rel-url="post_deploy.html" data-book-page-id="9305">部署后</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =40;var bookPageId =9273;var bookPageRelUrl ='language-intro.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>