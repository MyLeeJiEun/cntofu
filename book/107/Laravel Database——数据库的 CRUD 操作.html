
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>Laravel Database——数据库的 CRUD 操作-Laravel 源码详解</title>
<meta content='Laravel Database——数据库的 CRUD 操作,Laravel 源码详解' name='keywords'>
<meta content='Laravel Database——数据库的 CRUD 操作,Laravel 源码详解' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../static/components/css/base.css">
<link rel="stylesheet" href="../../static/components/css/reader.css">
<link rel="stylesheet" href="../../static/components/css/markdown.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../book/107/Laravel%20Database——数据库服务的启动与连接.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">Laravel Dat..</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../book/107/Laravel%20Database——查询构造器与语法编译器源码分析%28上%29.html">
<span class="">Laravel Dat..</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../book/107/index.html">Laravel 源码详解</a>
<a target="_blank" rel="nofollow" href="https://github.com/tzivanmoe/laravel-source-analysis" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  md-content-section  uk-margin-bottom">
<h2 id="前言">前言</h2>
<p>当 <code>connection</code> 对象构建初始化完成后，我们就可以利用 <code>DB</code> 来进行数据库的 <code>CRUD</code> ( <code>Create</code>、<code>Retrieve</code>、<code>Update</code>、<code>Delete</code>)操作。本篇文章，我们将会讲述 <code>laravel</code> 如何与 <code>pdo</code> 交互，实现基本数据库服务的原理。</p>
<h2 id="run">run</h2>
<p><code>laravel</code> 中任何数据库的操作都要经过 <code>run</code> 这个函数，这个函数作用在于重新连接数据库、记录数据库日志、数据库异常处理：</p>
<pre><code class="language-php">protected function run($query, $bindings, Closure $callback)
{
    $this-&gt;reconnectIfMissingConnection();

    $start = microtime(true);

    try {
        $result = $this-&gt;runQueryCallback($query, $bindings, $callback);
    } catch (QueryException $e) {
        $result = $this-&gt;handleQueryException(
            $e, $query, $bindings, $callback
        );
    }

    $this-&gt;logQuery(
        $query, $bindings, $this-&gt;getElapsedTime($start)
    );

    return $result;
}
</code></pre>
<h3 id="重新连接数据库-reconnect">重新连接数据库 reconnect</h3>
<p>如果当期的 <code>pdo</code> 是空，那么就会调用 <code>reconnector</code> 重新与数据库进行连接：</p>
<pre><code class="language-php">protected function reconnectIfMissingConnection()
{
    if (is_null($this-&gt;pdo)) {
        $this-&gt;reconnect();
    }
}

public function reconnect()
{
    if (is_callable($this-&gt;reconnector)) {
        return call_user_func($this-&gt;reconnector, $this);
    }

    throw new LogicException('Lost connection and no reconnector available.');
}

</code></pre>
<h3 id="运行数据库操作">运行数据库操作</h3>
<p>数据库的 curd 操作会被包装成为一个闭包函数，作为 <code>runQueryCallback</code> 的一个参数，当运行正常时，会返回结果，如果遇到异常的话，会将异常转化为 <code>QueryException</code>，并且抛出。</p>
<pre><code class="language-php">protected function runQueryCallback($query, $bindings, Closure $callback)
{
    try {
        $result = $callback($query, $bindings);
    }

    catch (Exception $e) {
        throw new QueryException(
            $query, $this-&gt;prepareBindings($bindings), $e
        );
    }

    return $result;
}

</code></pre>
<h3 id="数据库异常处理">数据库异常处理</h3>
<p>当 <code>pdo</code> 查询返回异常的时候，如果当前是事务进行时，那么直接返回异常，让上一层事务来处理。</p>
<p>如果是由于与数据库事情连接导致的异常，那么就要重新与数据库进行连接：</p>
<pre><code class="language-php">protected function handleQueryException($e, $query, $bindings, Closure $callback)
{
    if ($this-&gt;transactions &gt;= 1) {
        throw $e;
    }

    return $this-&gt;tryAgainIfCausedByLostConnection(
        $e, $query, $bindings, $callback
    );
}

</code></pre>
<p>与数据库失去连接：</p>
<pre><code class="language-php">protected function tryAgainIfCausedByLostConnection(QueryException $e, $query, $bindings, Closure $callback)
{
    if ($this-&gt;causedByLostConnection($e-&gt;getPrevious())) {
        $this-&gt;reconnect();

        return $this-&gt;runQueryCallback($query, $bindings, $callback);
    }

    throw $e;
}

protected function causedByLostConnection(Exception $e)
{
    $message = $e-&gt;getMessage();

    return Str::contains($message, [
        'server has gone away',
        'no connection to the server',
        'Lost connection',
        'is dead or not enabled',
        'Error while sending',
        'decryption failed or bad record mac',
        'server closed the connection unexpectedly',
        'SSL connection has been closed unexpectedly',
        'Error writing data to the connection',
        'Resource deadlock avoided',
        'Transaction() on null',
        'child connection forced to terminate due to client_idle_limit',
    ]);
}
</code></pre>
<h3 id="数据库日志">数据库日志</h3>
<pre><code class="language-php">public function logQuery($query, $bindings, $time = null)
{
    $this-&gt;event(new QueryExecuted($query, $bindings, $time, $this));

    if ($this-&gt;loggingQueries) {
        $this-&gt;queryLog[] = compact('query', 'bindings', 'time');
    }
}

</code></pre>
<p>想要开启或关闭日志功能：</p>
<pre><code class="language-php">public function enableQueryLog()
{
    $this-&gt;loggingQueries = true;
}

public function disableQueryLog()
{
    $this-&gt;loggingQueries = false;
}

</code></pre>
<h2 id="select-查询">Select 查询</h2>
<pre><code class="language-php">public function select($query, $bindings = [], $useReadPdo = true)
{
    return $this-&gt;run($query, $bindings, function ($query, $bindings) use ($useReadPdo) {
        if ($this-&gt;pretending()) {
            return [];
        }

        $statement = $this-&gt;prepared($this-&gt;getPdoForSelect($useReadPdo)
                          -&gt;prepare($query));

        $this-&gt;bindValues($statement, $this-&gt;prepareBindings($bindings));

        $statement-&gt;execute();

        return $statement-&gt;fetchAll();
    });
}
</code></pre>
<p>数据库的查询主要有一下几个步骤：</p>
<ul>
<li>获取 <code>$this-&gt;pdo</code> 成员变量，若当前未连接数据库，则进行数据库连接，获取 <code>pdo</code> 对象。</li>
<li>设置 <code>pdo</code> 数据 <code>fetch</code> 模式</li>
<li><code>pdo</code> 进行 <code>sql</code> 语句预处理，<code>pdo</code> 绑定参数</li>
<li><code>sql</code> 语句执行，并获取数据。</li>
</ul>
<h3 id="getpdoforselect-获取-pdo-对象">getPdoForSelect 获取 pdo 对象</h3>
<pre><code class="language-php">protected function getPdoForSelect($useReadPdo = true)
{
    return $useReadPdo ? $this-&gt;getReadPdo() : $this-&gt;getPdo();
}

public function getPdo()
{
    if ($this-&gt;pdo instanceof Closure) {
        return $this-&gt;pdo = call_user_func($this-&gt;pdo);
    }

    return $this-&gt;pdo;
}

public function getReadPdo()
{
    if ($this-&gt;transactions &gt; 0) {
        return $this-&gt;getPdo();
    }

    if ($this-&gt;getConfig('sticky') &amp;&amp; $this-&gt;recordsModified) {
        return $this-&gt;getPdo();
    }

    if ($this-&gt;readPdo instanceof Closure) {
        return $this-&gt;readPdo = call_user_func($this-&gt;readPdo);
    }

    return $this-&gt;readPdo ?: $this-&gt;getPdo();
}
</code></pre>
<p><code>getPdo</code> 这里逻辑比较简单，值得我们注意的是 <code>getReadPdo</code>。为了减缓数据库的压力，我们常常对数据库进行读写分离，也就是只要当写数据库这种操作发生时，才会使用写数据库，否则都会用读数据库。这种措施减少了数据库的压力，但是也带来了一些问题，那就是读写两个数据库在一定时间内会出现数据不一致的情况，原因就是写库的数据未能及时推送给读库，造成读库数据延迟的现象。为了在一定程度上解决这类问题，<code>laravel</code> 增添了 <code>sticky</code> 选项，</p>
<p>从程序中我们可以看出，当我们设置选项 <code>sticky</code> 为真，并且的确对数据库进行了写操作后，<code>getReadPdo</code> 会强制返回主库的连接，这样就避免了读写分离造成的延迟问题。</p>
<p>还有一种情况，当数据库在执行事务期间，所有的读取操作也会被强制连接主库。</p>
<h3 id="prepared-设置数据获取方式">prepared 设置数据获取方式</h3>
<pre><code class="language-php">protected $fetchMode = PDO::FETCH_OBJ;
protected function prepared(PDOStatement $statement)
{
    $statement-&gt;setFetchMode($this-&gt;fetchMode);

    $this-&gt;event(new Events\StatementPrepared(
        $this, $statement
    ));

    return $statement;
}
</code></pre>
<p><code>pdo</code> 的 <code>setFetchMode</code> 函数用于为语句设置默认的获取模式，通常模式有一下几种：</p>
<ul>
<li>PDO::FETCH_ASSOC //从结果集中获取以列名为索引的关联数组。</li>
<li>PDO::FETCH_NUM //从结果集中获取一个以列在行中的数值偏移量为索引的值数组。</li>
<li>PDO::FETCH_BOTH //这是默认值，包含上面两种数组。</li>
<li>PDO::FETCH_OBJ //从结果集当前行的记录中获取其属性对应各个列名的一个对象。</li>
<li>PDO::FETCH_BOUND //使用fetch()返回TRUE，并将获取的列值赋给在bindParm()方法中指定的相应变量。</li>
<li>PDO::FETCH_LAZY //创建关联数组和索引数组，以及包含列属性的一个对象，从而可以在这三种接口中任选一种。</li>
</ul>
<h3 id="pdo-的-prepare-函数">pdo 的 prepare 函数</h3>
<p><code>prepare</code> 函数会为 <code>PDOStatement::execute()</code> 方法准备要执行的 <code>SQL</code> 语句，<code>SQL</code> 语句可以包含零个或多个命名（<code>:name</code>）或问号（<code>?</code>）参数标记，参数在SQL执行时会被替换。</p>
<p>不能在 <code>SQL</code> 语句中同时包含命名（<code>:name</code>）或问号（<code>?</code>）参数标记，只能选择其中一种风格。</p>
<p>预处理 <code>SQL</code> 语句中的参数在使用 <code>PDOStatement::execute()</code> 方法时会传递真实的参数。</p>
<p>之所以使用 <code>prepare</code> 函数，是因为这个函数可以防止 <code>SQL</code> 注入，并且可以加快同一查询语句的速度。关于预处理与参数绑定防止 <code>SQL</code> 漏洞注入的原理可以参考：<a href="http://www.cnblogs.com/csniper/p/5802202.html">Web安全之SQL注入攻击技巧与防范</a>.</p>
<h3 id="pdo-的-bindvalues-函数">pdo 的 bindValues 函数</h3>
<p>在调用 <code>pdo</code> 的参数绑定函数之前，<code>laravel</code> 对参数值进一步进行了优化，把时间类型的对象利用 <code>grammer</code> 的设置重新格式化，<code>false</code> 也改为0。</p>
<p><code>pdo</code> 的参数绑定函数 <code>bindValue</code>，对于使用命名占位符的预处理语句，应是类似 :name 形式的参数名。对于使用问号占位符的预处理语句，应是以1开始索引的参数位置。</p>
<pre><code class="language-php">public function prepareBindings(array $bindings)
{
    $grammar = $this-&gt;getQueryGrammar();

    foreach ($bindings as $key =&gt; $value) {
        if ($value instanceof DateTimeInterface) {
            $bindings[$key] = $value-&gt;format($grammar-&gt;getDateFormat());
        } elseif ($value === false) {
            $bindings[$key] = 0;
        }
    }

    return $bindings;
}

public function bindValues($statement, $bindings)
{
    foreach ($bindings as $key =&gt; $value) {
        $statement-&gt;bindValue(
            is_string($key) ? $key : $key + 1, $value,
            is_int($value) ? PDO::PARAM_INT : PDO::PARAM_STR
        );
    }
}
</code></pre>
<h2 id="insert">insert</h2>
<pre><code class="language-php">public function insert($query, $bindings = [])
{
    return $this-&gt;statement($query, $bindings);
}

public function statement($query, $bindings = [])
{
    return $this-&gt;run($query, $bindings, function ($query, $bindings) {
        if ($this-&gt;pretending()) {
            return true;
        }

        $statement = $this-&gt;getPdo()-&gt;prepare($query);

        $this-&gt;bindValues($statement, $this-&gt;prepareBindings($bindings));

        $this-&gt;recordsHaveBeenModified();

        return $statement-&gt;execute();
    });
}

</code></pre>
<p>这部分的代码与 <code>select</code> 非常相似，不同之处有一下几个：</p>
<ul>
<li>直接获取写库的连接，不会考虑读库</li>
<li>由于不需要返回任何数据库数据，因此也不必设置 <code>fetchMode</code>。</li>
<li><code>recordsHaveBeenModified</code> 函数标志当前连接数据库已被写入。</li>
<li>不需要调用函数 <code>fetchAll</code></li>
</ul>
<pre><code class="language-php">public function recordsHaveBeenModified($value = true)
{
    if (! $this-&gt;recordsModified) {
        $this-&gt;recordsModified = $value;
    }
}

</code></pre>
<h2 id="updatedelete">update、delete</h2>
<p><code>affectingStatement</code> 这个函数与上面的 <code>statement</code> 函数一致，只是最后会返回更新、删除影响的行数。</p>
<pre><code class="language-php">public function update($query, $bindings = [])
{
    return $this-&gt;affectingStatement($query, $bindings);
}

public function delete($query, $bindings = [])
{
    return $this-&gt;affectingStatement($query, $bindings);
}

public function affectingStatement($query, $bindings = [])
{
    return $this-&gt;run($query, $bindings, function ($query, $bindings) {
        if ($this-&gt;pretending()) {
            return 0;
        }

        $statement = $this-&gt;getPdo()-&gt;prepare($query);

        $this-&gt;bindValues($statement, $this-&gt;prepareBindings($bindings));

        $statement-&gt;execute();

        $this-&gt;recordsHaveBeenModified(
            ($count = $statement-&gt;rowCount()) &gt; 0
        );

        return $count;
    });
}
</code></pre>
<h2 id="transaction-数据库事务">transaction 数据库事务</h2>
<p>为保持数据的一致性，对于重要的数据我们经常使用数据库事务，<code>transaction</code> 函数接受一个闭包函数，与一个重复尝试的次数：</p>
<pre><code class="language-php">public function transaction(Closure $callback, $attempts = 1)
{
    for ($currentAttempt = 1; $currentAttempt &lt;= $attempts; $currentAttempt++) {
        $this-&gt;beginTransaction();

        try {
            return tap($callback($this), function ($result) {
                $this-&gt;commit();
            });
        }

        catch (Exception $e) {
            $this-&gt;handleTransactionException(
                $e, $currentAttempt, $attempts
            );
        } catch (Throwable $e) {
            $this-&gt;rollBack();

            throw $e;
        }
    }
}

</code></pre>
<h3 id="开始事务">开始事务</h3>
<p>数据库事务中非常重要的成员变量是 <code>$this-&gt;transactions</code>，它标志着当前事务的进程：</p>
<pre><code class="language-php">public function beginTransaction()
{
    $this-&gt;createTransaction();

    ++$this-&gt;transactions;

    $this-&gt;fireConnectionEvent('beganTransaction');
}

</code></pre>
<p>可以看出，当创建事务成功后，就会累加 <code>$this-&gt;transactions</code>，并且启动 <code>event</code>，创建事务：</p>
<pre><code class="language-php">protected function createTransaction()
{
    if ($this-&gt;transactions == 0) {
        try {
            $this-&gt;getPdo()-&gt;beginTransaction();
        } catch (Exception $e) {
            $this-&gt;handleBeginTransactionException($e);
        }
    } elseif ($this-&gt;transactions &gt;= 1 &amp;&amp; $this-&gt;queryGrammar-&gt;supportsSavepoints()) {
        $this-&gt;createSavepoint();
    }
}
</code></pre>
<p>如果当前没有任何事务，那么就会调用 <code>pdo</code> 来开启事务。</p>
<p>如果当前已经在事务保护的范围内，那么就会创建 <code>SAVEPOINT</code>，实现数据库嵌套事务：</p>
<pre><code class="language-php">protected function createSavepoint()
{
    $this-&gt;getPdo()-&gt;exec(
        $this-&gt;queryGrammar-&gt;compileSavepoint('trans'.($this-&gt;transactions + 1))
    );
}

public function compileSavepoint($name)
{
    return 'SAVEPOINT '.$name;
}
</code></pre>
<p>如果创建事务失败，那么就会调用 <code>handleBeginTransactionException</code>：</p>
<pre><code class="language-php">protected function handleBeginTransactionException($e)
{
    if ($this-&gt;causedByLostConnection($e)) {
        $this-&gt;reconnect();

        $this-&gt;pdo-&gt;beginTransaction();
    } else {
        throw $e;
    }
}
</code></pre>
<p>如果创建事务失败是由于与数据库失去连接的话，那么就会重新连接数据库，否则就要抛出异常。</p>
<h3 id="事务异常">事务异常</h3>
<p>事务的异常处理比较复杂，可以先看一看代码：</p>
<pre><code class="language-php">protected function handleTransactionException($e, $currentAttempt, $maxAttempts)
{
    if ($this-&gt;causedByDeadlock($e) &amp;&amp;
        $this-&gt;transactions &gt; 1) {
        --$this-&gt;transactions;

        throw $e;
    }

    $this-&gt;rollBack();

    if ($this-&gt;causedByDeadlock($e) &amp;&amp;
        $currentAttempt &lt; $maxAttempts) {
        return;
    }

    throw $e;
}

protected function causedByDeadlock(Exception $e)
{
    $message = $e-&gt;getMessage();

    return Str::contains($message, [
        'Deadlock found when trying to get lock',
        'deadlock detected',
        'The database file is locked',
        'database is locked',
        'database table is locked',
        'A table in the database is locked',
        'has been chosen as the deadlock victim',
        'Lock wait timeout exceeded; try restarting transaction',
    ]);
}
</code></pre>
<p>这里可以分为四种情况：</p>
<ul>
<li>单一事务，非死锁导致的异常</li>
</ul>
<p>单一事务就是说，此时的事务只有一层，没有嵌套事务的存在。数据库的异常也不是死锁导致的，一般是由于 <code>sql</code> 语句不正确引起的。这个时候，<code>handleTransactionException</code> 会直接回滚事务，并且抛出异常到外层：</p>
<pre><code class="language-php">try {
      return tap($callback($this), function ($result) {
          $this-&gt;commit();
      });
}
catch (Exception $e) {
     $this-&gt;handleTransactionException(
         $e, $currentAttempt, $attempts
     );
} catch (Throwable $e) {
       $this-&gt;rollBack();

       throw $e;
}
</code></pre>
<p>接到异常之后，程序会再次回滚，但是由于 <code>$this-&gt;transactions</code> 已经为 0，因此回滚直接返回，并未真正执行，之后就会抛出异常。</p>
<ul>
<li>单一事务，死锁异常</li>
</ul>
<p>有死锁导致的单一事务异常，一般是由于其他程序同时更改了数据库，这个时候，就要判断当前重复尝试的次数是否大于用户设置的 <code>maxAttempts</code>，如果小于就继续尝试，如果大于，那么就会抛出异常。</p>
<ul>
<li>嵌套事务，非死锁异常</li>
</ul>
<p>如果出现嵌套事务，例如：</p>
<pre><code class="language-php">\DB::transaction(function(){
    ...
    //directly or indirectly call another transaction:
    \DB::transaction(function() {
        ...
        ...
    }, 2);//attempt twice
}, 2);//attempt twice

</code></pre>
<p>如果是非死锁导致的异常，那么就要首先回滚内层的事务，抛出异常到外层事务，再回滚外层事务，抛出异常，让用户来处理。也就是说，对于嵌套事务来说，内部事务异常，一定要回滚整个事务，而不是仅仅回滚内部事务。</p>
<ul>
<li>嵌套事务，死锁异常</li>
</ul>
<p>嵌套事务的死锁异常，仍然和嵌套事务非死锁异常一样，内部事务异常，一定要回滚整个事务。</p>
<p>但是，不同的是，<code>mysql</code> 对于嵌套事务的回滚会导致外部事务一并回滚:<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-error-handling.html">InnoDB Error Handling</a>，因此这时，我们仅仅将 <code>$this-&gt;transactions</code> 减一，并抛出异常，使得外层事务回滚抛出异常即可。</p>
<h3 id="回滚事务">回滚事务</h3>
<p>如果事务内的数据库更新操作失败，那么就要进行回滚：</p>
<pre><code class="language-php">public function rollBack($toLevel = null)
{
    $toLevel = is_null($toLevel)
                ? $this-&gt;transactions - 1
                : $toLevel;

    if ($toLevel &lt; 0 || $toLevel &gt;= $this-&gt;transactions) {
        return;
    }

    $this-&gt;performRollBack($toLevel);

    $this-&gt;transactions = $toLevel;

    $this-&gt;fireConnectionEvent('rollingBack');
}

</code></pre>
<p>回滚的第一件事就是要减少 <code>$this-&gt;transactions</code> 的值，标志当前事务失败。</p>
<p>回滚的时候仍然要判断当前事务的状态，如果当前处于嵌套事务的话，就要进行回滚到 <code>SAVEPOINT</code>，如果是单一事务的话，才会真正回滚退出事务：</p>
<pre><code class="language-php">protected function performRollBack($toLevel)
{
    if ($toLevel == 0) {
        $this-&gt;getPdo()-&gt;rollBack();
    } elseif ($this-&gt;queryGrammar-&gt;supportsSavepoints()) {
        $this-&gt;getPdo()-&gt;exec(
            $this-&gt;queryGrammar-&gt;compileSavepointRollBack('trans'.($toLevel + 1))
        );
    }
}

public function compileSavepointRollBack($name)
{
    return 'ROLLBACK TO SAVEPOINT '.$name;
}
</code></pre>
<h2 id="提交事务">提交事务</h2>
<p>提交事务比较简单，仅仅是调用 <code>pdo</code> 的 <code>commit</code> 即可。需要注意的是对于嵌套事务的事务提交，<code>commit</code> 函数仅仅更新了 <code>$this-&gt;transactions</code>，而并没有真正提交事务，原因是内层事务的提交对于 <code>mysql</code> 来说是无效的，只有外部事务的提交才能更新整个事务。</p>
<pre><code class="language-php">public function commit()
{
    if ($this-&gt;transactions == 1) {
        $this-&gt;getPdo()-&gt;commit();
    }

    $this-&gt;transactions = max(0, $this-&gt;transactions - 1);

    $this-&gt;fireConnectionEvent('committed');
}

</code></pre>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/196/index.html">
<img class="uk-book-cover" src="../../static/icons/48/code_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/196/index.html">全栈开发指南2021</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/112.html">frank-lam</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="code">code</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">51页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2021年10月24日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 个"></span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/7/index.html">
<img class="uk-book-cover" src="../../static/icons/48/netty_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/7/index.html">Netty 4.x 用户指南</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/6.html">waylau</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="netty">netty</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">20页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 1131个">1131</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/116/index.html">
<img class="uk-book-cover" src="../../static/icons/48/code_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/116/index.html">Protocol Buffer 3学习笔记</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="code">code</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">37页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/154/index.html">
<img class="uk-book-cover" src="../../static/icons/48/python_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/154/index.html">Python 学习总结</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/86.html">itroger</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">11页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年5月12日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/172/index.html">
<img class="uk-book-cover" src="../../static/icons/48/python_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/172/index.html">Seaborn 0.9 中文文档</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/18.html">ApacheCN</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="python">python</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">76页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年5月26日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 32个">32</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../book/135/index.html">
<img class="uk-book-cover" src="../../static/icons/48/html5_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../book/135/index.html">微前端的那些事儿</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../user/72.html">phodal</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="html5">html5</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">55页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年8月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../" title="返回首页"><img class="" src="../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../book/107/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../book/107/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../book/107/README.html" title="Introduction" data-book-page-rel-url="README.html" data-book-page-id="7730">Introduction</a>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="PHP Composer 自动加载" disabled data-book-page-rel-url="" data-book-page-id="7731">PHP Composer 自动加载</a>
<ul>
<li>
<a class="pjax" href="../../book/107/PHP%20Composer——自动加载原理.html" title="PHP Composer——自动加载原理" data-book-page-rel-url="PHP%20Composer——自动加载原理.html" data-book-page-id="7732">PHP Composer——自动加载原理</a>
</li>
<li>
<a class="pjax" href="../../book/107/PHP%20Composer——%20初始化源码分析.html" title="PHP Composer—— 初始化源码分析" data-book-page-rel-url="PHP%20Composer——%20初始化源码分析.html" data-book-page-id="7733">PHP Composer—— 初始化源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/PHP%20Composer-——-注册与运行源码分析.html" title="PHP Composer-——-注册与运行源码分析" data-book-page-rel-url="PHP%20Composer-——-注册与运行源码分析.html" data-book-page-id="7734">PHP Composer-——-注册与运行源码分析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Facade 门面" disabled data-book-page-rel-url="" data-book-page-id="7735">Laravel Facade 门面</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Facade——Facade%20门面源码分析.html" title="Laravel Facade——Facade 门面源码分析" data-book-page-rel-url="Laravel%20Facade——Facade%20门面源码分析.html" data-book-page-id="7736">Laravel Facade——Facade 门面源码分析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Ioc 容器" disabled data-book-page-rel-url="" data-book-page-id="7737">Laravel Ioc 容器</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Container——IoC%20服务容器.html" title="Laravel Container——IoC 服务容器" data-book-page-rel-url="Laravel%20Container——IoC%20服务容器.html" data-book-page-id="7738">Laravel Container——IoC 服务容器</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Container——IoC%20服务容器源码解析%28服务器绑定%29.html" title="Laravel Container——IoC 服务容器源码解析(服务器绑定)" data-book-page-rel-url="Laravel%20Container——IoC%20服务容器源码解析%28服务器绑定%29.html" data-book-page-id="7739">Laravel Container——IoC 服务容器源码解析(服务器绑定)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Container——IoC%20服务容器源码解析%28服务器解析%29.html" title="Laravel Container——IoC 服务容器源码解析(服务器解析)" data-book-page-rel-url="Laravel%20Container——IoC%20服务容器源码解析%28服务器解析%29.html" data-book-page-id="7740">Laravel Container——IoC 服务容器源码解析(服务器解析)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Container——服务容器的细节特性.html" title="Laravel Container——服务容器的细节特性" data-book-page-rel-url="Laravel%20Container——服务容器的细节特性.html" data-book-page-id="7741">Laravel Container——服务容器的细节特性</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Route 路由" disabled data-book-page-rel-url="" data-book-page-id="7742">Laravel Route 路由</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——路由.html" title="Laravel HTTP——路由" data-book-page-rel-url="Laravel%20HTTP——路由.html" data-book-page-id="7743">Laravel HTTP——路由</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——路由加载源码分析.html" title="Laravel HTTP——路由加载源码分析" data-book-page-rel-url="Laravel%20HTTP——路由加载源码分析.html" data-book-page-id="7744">Laravel HTTP——路由加载源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——Pipeline中间件处理源码分析.html" title="Laravel HTTP——Pipeline中间件处理源码分析" data-book-page-rel-url="Laravel%20HTTP——Pipeline中间件处理源码分析.html" data-book-page-id="7745">Laravel HTTP——Pipeline中间件处理源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——路由的正则编译.html" title="Laravel HTTP——路由的正则编译" data-book-page-rel-url="Laravel%20HTTP——路由的正则编译.html" data-book-page-id="7746">Laravel HTTP——路由的正则编译</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——路由的匹配与参数绑定.html" title="Laravel HTTP——路由的匹配与参数绑定" data-book-page-rel-url="Laravel%20HTTP——路由的匹配与参数绑定.html" data-book-page-id="7747">Laravel HTTP——路由的匹配与参数绑定</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——路由中间件源码分析.html" title="Laravel HTTP——路由中间件源码分析" data-book-page-rel-url="Laravel%20HTTP——路由中间件源码分析.html" data-book-page-id="7748">Laravel HTTP——路由中间件源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——SubstituteBindings%20参数绑定中间件的使用与源码解析.html" title="Laravel HTTP——SubstituteBindings 参数绑定中间件的使用与源码解析" data-book-page-rel-url="Laravel%20HTTP——SubstituteBindings%20参数绑定中间件的使用与源码解析.html" data-book-page-id="7749">Laravel HTTP——SubstituteBindings 参数绑定中间件的使用与源码解析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——控制器方法的参数构建与运行.html" title="Laravel HTTP——控制器方法的参数构建与运行" data-book-page-rel-url="Laravel%20HTTP——控制器方法的参数构建与运行.html" data-book-page-id="7750">Laravel HTTP——控制器方法的参数构建与运行</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——%20RESTFul%20风格路由的使用与源码分析.html" title="Laravel HTTP—— RESTFul 风格路由的使用与源码分析" data-book-page-rel-url="Laravel%20HTTP——%20RESTFul%20风格路由的使用与源码分析.html" data-book-page-id="7751">Laravel HTTP—— RESTFul 风格路由的使用与源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20HTTP——重定向的使用与源码分析.html" title="Laravel HTTP——重定向的使用与源码分析" data-book-page-rel-url="Laravel%20HTTP——重定向的使用与源码分析.html" data-book-page-id="7752">Laravel HTTP——重定向的使用与源码分析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel ENV 环境变量" disabled data-book-page-rel-url="" data-book-page-id="7753">Laravel ENV 环境变量</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20ENV——%20环境变量的加载与源码解析.html" title="Laravel ENV—— 环境变量的加载与源码解析" data-book-page-rel-url="Laravel%20ENV——%20环境变量的加载与源码解析.html" data-book-page-id="7754">Laravel ENV—— 环境变量的加载与源码解析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Config 配置文件" disabled data-book-page-rel-url="" data-book-page-id="7755">Laravel Config 配置文件</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Config——%20配置文件的加载与源码解析.html" title="Laravel Config—— 配置文件的加载与源码解析" data-book-page-rel-url="Laravel%20Config——%20配置文件的加载与源码解析.html" data-book-page-id="7756">Laravel Config—— 配置文件的加载与源码解析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Exceptions 异常处理" disabled data-book-page-rel-url="" data-book-page-id="7757">Laravel Exceptions 异常处理</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Exceptions——异常与错误处理.html" title="Laravel Exceptions——异常与错误处理.html" data-book-page-rel-url="Laravel%20Exceptions——异常与错误处理.html" data-book-page-id="7758">Laravel Exceptions——异常与错误处理.html</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Providers 服务提供者" disabled data-book-page-rel-url="" data-book-page-id="7759">Laravel Providers 服务提供者</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Providers——服务提供者的注册与启动源码解析.html" title="Laravel Providers——服务提供者的注册与启动源码解析" data-book-page-rel-url="Laravel%20Providers——服务提供者的注册与启动源码解析.html" data-book-page-id="7760">Laravel Providers——服务提供者的注册与启动源码解析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Database 数据库" disabled data-book-page-rel-url="" data-book-page-id="7761">Laravel Database 数据库</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——数据库服务的启动与连接.html" title="Laravel Database——数据库服务的启动与连接" data-book-page-rel-url="Laravel%20Database——数据库服务的启动与连接.html" data-book-page-id="7762">Laravel Database——数据库服务的启动与连接</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——数据库的%20CRUD%20操作.html" title="Laravel Database——数据库的 CRUD 操作" data-book-page-rel-url="Laravel%20Database——数据库的%20CRUD%20操作.html" data-book-page-id="7763">Laravel Database——数据库的 CRUD 操作</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——查询构造器与语法编译器源码分析%28上%29.html" title="Laravel Database——查询构造器与语法编译器源码分析(上)" data-book-page-rel-url="Laravel%20Database——查询构造器与语法编译器源码分析%28上%29.html" data-book-page-id="7764">Laravel Database——查询构造器与语法编译器源码分析(上)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——查询构造器与语法编译器源码分析%28中%29.html" title="Laravel Database——查询构造器与语法编译器源码分析(中)" data-book-page-rel-url="Laravel%20Database——查询构造器与语法编译器源码分析%28中%29.html" data-book-page-id="7765">Laravel Database——查询构造器与语法编译器源码分析(中)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——查询构造器与语法编译器源码分析%28下%29.html" title="Laravel Database——查询构造器与语法编译器源码分析(下)" data-book-page-rel-url="Laravel%20Database——查询构造器与语法编译器源码分析%28下%29.html" data-book-page-id="7766">Laravel Database——查询构造器与语法编译器源码分析(下)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——分页原理与源码分析.html" title="Laravel Database——分页原理与源码分析" data-book-page-rel-url="Laravel%20Database——分页原理与源码分析.html" data-book-page-id="7767">Laravel Database——分页原理与源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——Eloquent%20Model%20源码分析%28上%29.html" title="Laravel Database——Eloquent Model 源码分析(上)" data-book-page-rel-url="Laravel%20Database——Eloquent%20Model%20源码分析%28上%29.html" data-book-page-id="7768">Laravel Database——Eloquent Model 源码分析(上)</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——Eloquent%20Model%20源码分析（下）.html" title="Laravel Database——Eloquent Model 源码分析（下）" data-book-page-rel-url="Laravel%20Database——Eloquent%20Model%20源码分析（下）.html" data-book-page-id="7769">Laravel Database——Eloquent Model 源码分析（下）</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——Eloquent%20Model%20关联源码分析.html" title="Laravel Database——Eloquent Model 关联源码分析" data-book-page-rel-url="Laravel%20Database——Eloquent%20Model%20关联源码分析.html" data-book-page-id="7770">Laravel Database——Eloquent Model 关联源码分析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——Eloquent%20Model%20模型关系加载与查询.html" title="Laravel Database——Eloquent Model 模型关系加载与查询" data-book-page-rel-url="Laravel%20Database——Eloquent%20Model%20模型关系加载与查询.html" data-book-page-id="7771">Laravel Database——Eloquent Model 模型关系加载与查询</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Database——Eloquent%20Model%20更新关联模型.html" title="Laravel Database——Eloquent Model 更新关联模型" data-book-page-rel-url="Laravel%20Database——Eloquent%20Model%20更新关联模型.html" data-book-page-id="7772">Laravel Database——Eloquent Model 更新关联模型</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Session" disabled data-book-page-rel-url="" data-book-page-id="7773">Laravel Session</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Session——session%20的启动与运行源码分析.html" title="Laravel Session——session 的启动与运行源码分析" data-book-page-rel-url="Laravel%20Session——session%20的启动与运行源码分析.html" data-book-page-id="7774">Laravel Session——session 的启动与运行源码分析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Event 事件系统" disabled data-book-page-rel-url="" data-book-page-id="7775">Laravel Event 事件系统</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Event——事件系统的启动与运行源码分析.html" title="Laravel Event——事件系统的启动与运行源码分析" data-book-page-rel-url="Laravel%20Event——事件系统的启动与运行源码分析.html" data-book-page-id="7776">Laravel Event——事件系统的启动与运行源码分析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Queue 队列" disabled data-book-page-rel-url="" data-book-page-id="7777">Laravel Queue 队列</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Queue——消息队列任务与分发源码剖析.html" title="Laravel Queue——消息队列任务与分发源码剖析" data-book-page-rel-url="Laravel%20Queue——消息队列任务与分发源码剖析.html" data-book-page-id="7778">Laravel Queue——消息队列任务与分发源码剖析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Queue——消息队列任务处理器源码剖析.html" title="Laravel Queue——消息队列任务处理器源码剖析" data-book-page-rel-url="Laravel%20Queue——消息队列任务处理器源码剖析.html" data-book-page-id="7779">Laravel Queue——消息队列任务处理器源码剖析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel 广播系统" disabled data-book-page-rel-url="" data-book-page-id="7780">Laravel 广播系统</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Broadcast——广播系统源码剖析.html" title="Laravel Broadcast——广播系统源码剖析" data-book-page-rel-url="Laravel%20Broadcast——广播系统源码剖析.html" data-book-page-id="7781">Laravel Broadcast——广播系统源码剖析</a>
</li>
</ul>
</li>
<li>
<a class="pjax" href="javascript:;" class="uk-link-muted uk-text-muted" title="Laravel Passport" disabled data-book-page-rel-url="" data-book-page-id="7782">Laravel Passport</a>
<ul>
<li>
<a class="pjax" href="../../book/107/Laravel%20Passport——OAuth2%20API%20认证系统源码解析.html" title="Laravel Passport——OAuth2 API 认证系统源码解析" data-book-page-rel-url="Laravel%20Passport——OAuth2%20API%20认证系统源码解析.html" data-book-page-id="7783">Laravel Passport——OAuth2 API 认证系统源码解析</a>
</li>
<li>
<a class="pjax" href="../../book/107/Laravel%20Passport——OAuth2%20API%20认证系统源码解析（下）.html" title="Laravel Passport——OAuth2 API 认证系统源码解析(下)" data-book-page-rel-url="Laravel%20Passport——OAuth2%20API%20认证系统源码解析（下）.html" data-book-page-id="7784">Laravel Passport——OAuth2 API 认证系统源码解析(下)</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =107;var bookPageId =7763;var bookPageRelUrl ='Laravel%20Database——数据库的%20CRUD%20操作.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>