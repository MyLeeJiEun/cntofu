
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<title>HBase Java API-大数据入门指南</title>
<meta content='HBase Java API,大数据入门指南' name='keywords'>
<meta content='HBase Java API,大数据入门指南' name='description'>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no"../../../>
<meta name="applicable-device" content="pc,mobile">
<link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon" />
<meta name="renderer" content="webkit">
<link rel="stylesheet" href="../../../static/components/uikit-2.27.5/css/uikit.custom.css">
<link rel="stylesheet" href="../../../static/components/social-share/social-share.min.css">
<link rel="stylesheet" href="../../../static/components/highlight/styles/custom.css">
<link rel="stylesheet" href="../../../static/components/css/base.css">
<link rel="stylesheet" href="../../../static/components/css/reader.css">
<link rel="stylesheet" href="../../../static/components/css/markdown.css">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5313208362165053" crossorigin="anonymous"></script>
</head>
<body>
<div class=" book-main-wrap uk-container uk-container-center uk-margin-top ">
<div class="uk-grid">
<div class="uk-width-1-1 reader-wrap ">
<div class=" bottom-nav uk-clearfix ">
<div class="uk-align-left ">
<a href="../../../book/198/notes/Hbase_Shell.html">
<i class="nav-icon-left uk-icon-small  uk-icon-caret-left"></i>
<span class="">HBase 常用 Sh..</span>
</a>
</div>
<div class="uk-align-right ">
<a href="../../../book/198/notes/Hbase过滤器详解.html">
<span class="">HBase 过滤器详解</span>
<i class="nav-icon-right uk-icon-small  uk-icon-caret-right"></i>
</a>
</div>
</div>
<div class="uk-text-center">
<h2 class="book-page-title uk-container-center">
<a href="../../../book/198/index.html">大数据入门指南</a>
<a target="_blank" rel="nofollow" href="https://github.com/heibaiying/BigData-Notes" class="uk-icon-button uk-icon-github" title="github项目地址"></a>
</h2>
</div>
<script type="text/javascript" src="../../../static/components/js/app_intro.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5313208362165053" data-ad-slot="1328047120"></ins>
<script>(adsbygoogle =window.adsbygoogle ||[]).push({});</script>
<hr class="uk-article-divider">
<div class="book-content-section  md-content-section  uk-margin-bottom">
<h1 id="hbase-java-api-的基本使用">HBase Java API 的基本使用</h1>
<nav>
<a href="#一简述">一、简述</a>
<br>
<a href="#二Java-API-1x-基本使用">二、Java API 1.x 基本使用</a>
<br>
<a href="#三Java-API-2x-基本使用">三、Java API 2.x 基本使用</a>
<br>
<a href="#四正确连接Hbase">四、正确连接Hbase</a>
<br>
</nav>
<h2 id="一简述">一、简述</h2>
<p>截至到目前 (2019.04)，HBase 有两个主要的版本，分别是 1.x 和 2.x ，两个版本的 Java API 有所不同，1.x 中某些方法在 2.x 中被标识为 <code>@deprecated</code> 过时。所以下面关于 API 的样例，我会分别给出 1.x 和 2.x 两个版本。完整的代码见本仓库：</p>
<blockquote>
<ul>
<li> <p><a href="https://github.com/heibaiying/BigData-Notes/tree/master/code/Hbase/hbase-java-api-1.x">Java API 1.x Examples</a></p> </li>
<li> <p><a href="https://github.com/heibaiying/BigData-Notes/tree/master/code/Hbase/hbase-java-api-2.x">Java API 2.x Examples</a></p> </li>
</ul>
</blockquote>
<p>同时你使用的客户端的版本必须与服务端版本保持一致，如果用 2.x 版本的客户端代码去连接 1.x 版本的服务端，会抛出 <code>NoSuchColumnFamilyException</code> 等异常。</p>
<h2 id="二java-api-1x-基本使用">二、Java API 1.x 基本使用</h2>
<h4 id="21-新建maven工程导入项目依赖">2.1 新建Maven工程，导入项目依赖</h4>
<p>要使用 Java API 操作 HBase，需要引入 <code>hbase-client</code>。这里选取的 <code>HBase Client</code> 的版本为 <code>1.2.0</code>。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;
    &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;
    &lt;version&gt;1.2.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="22-api-基本使用">2.2 API 基本使用</h4>
<pre><code class="language-java">public class HBaseUtils {

    private static Connection connection;

    static {
        Configuration configuration = HBaseConfiguration.create();
        configuration.set("hbase.zookeeper.property.clientPort", "2181");
        // 如果是集群 则主机名用逗号分隔
        configuration.set("hbase.zookeeper.quorum", "hadoop001");
        try {
            connection = ConnectionFactory.createConnection(configuration);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * 创建 HBase 表
     *
     * @param tableName      表名
     * @param columnFamilies 列族的数组
     */
    public static boolean createTable(String tableName, List&lt;String&gt; columnFamilies) {
        try {
            HBaseAdmin admin = (HBaseAdmin) connection.getAdmin();
            if (admin.tableExists(tableName)) {
                return false;
            }
            HTableDescriptor tableDescriptor = new HTableDescriptor(TableName.valueOf(tableName));
            columnFamilies.forEach(columnFamily -&gt; {
                HColumnDescriptor columnDescriptor = new HColumnDescriptor(columnFamily);
                columnDescriptor.setMaxVersions(1);
                tableDescriptor.addFamily(columnDescriptor);
            });
            admin.createTable(tableDescriptor);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 删除 hBase 表
     *
     * @param tableName 表名
     */
    public static boolean deleteTable(String tableName) {
        try {
            HBaseAdmin admin = (HBaseAdmin) connection.getAdmin();
            // 删除表前需要先禁用表
            admin.disableTable(tableName);
            admin.deleteTable(tableName);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    /**
     * 插入数据
     *
     * @param tableName        表名
     * @param rowKey           唯一标识
     * @param columnFamilyName 列族名
     * @param qualifier        列标识
     * @param value            数据
     */
    public static boolean putRow(String tableName, String rowKey, String columnFamilyName, String qualifier,
                                 String value) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Put put = new Put(Bytes.toBytes(rowKey));
            put.addColumn(Bytes.toBytes(columnFamilyName), Bytes.toBytes(qualifier), Bytes.toBytes(value));
            table.put(put);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 插入数据
     *
     * @param tableName        表名
     * @param rowKey           唯一标识
     * @param columnFamilyName 列族名
     * @param pairList         列标识和值的集合
     */
    public static boolean putRow(String tableName, String rowKey, String columnFamilyName, List&lt;Pair&lt;String, String&gt;&gt; pairList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Put put = new Put(Bytes.toBytes(rowKey));
            pairList.forEach(pair -&gt; put.addColumn(Bytes.toBytes(columnFamilyName), Bytes.toBytes(pair.getKey()), Bytes.toBytes(pair.getValue())));
            table.put(put);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 根据 rowKey 获取指定行的数据
     *
     * @param tableName 表名
     * @param rowKey    唯一标识
     */
    public static Result getRow(String tableName, String rowKey) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Get get = new Get(Bytes.toBytes(rowKey));
            return table.get(get);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 获取指定行指定列 (cell) 的最新版本的数据
     *
     * @param tableName    表名
     * @param rowKey       唯一标识
     * @param columnFamily 列族
     * @param qualifier    列标识
     */
    public static String getCell(String tableName, String rowKey, String columnFamily, String qualifier) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Get get = new Get(Bytes.toBytes(rowKey));
            if (!get.isCheckExistenceOnly()) {
                get.addColumn(Bytes.toBytes(columnFamily), Bytes.toBytes(qualifier));
                Result result = table.get(get);
                byte[] resultValue = result.getValue(Bytes.toBytes(columnFamily), Bytes.toBytes(qualifier));
                return Bytes.toString(resultValue);
            } else {
                return null;
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 检索全表
     *
     * @param tableName 表名
     */
    public static ResultScanner getScanner(String tableName) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 检索表中指定数据
     *
     * @param tableName  表名
     * @param filterList 过滤器
     */

    public static ResultScanner getScanner(String tableName, FilterList filterList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            scan.setFilter(filterList);
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * 检索表中指定数据
     *
     * @param tableName   表名
     * @param startRowKey 起始 RowKey
     * @param endRowKey   终止 RowKey
     * @param filterList  过滤器
     */

    public static ResultScanner getScanner(String tableName, String startRowKey, String endRowKey,
                                           FilterList filterList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            scan.setStartRow(Bytes.toBytes(startRowKey));
            scan.setStopRow(Bytes.toBytes(endRowKey));
            scan.setFilter(filterList);
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * 删除指定行记录
     *
     * @param tableName 表名
     * @param rowKey    唯一标识
     */
    public static boolean deleteRow(String tableName, String rowKey) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Delete delete = new Delete(Bytes.toBytes(rowKey));
            table.delete(delete);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 删除指定行的指定列
     *
     * @param tableName  表名
     * @param rowKey     唯一标识
     * @param familyName 列族
     * @param qualifier  列标识
     */
    public static boolean deleteColumn(String tableName, String rowKey, String familyName,
                                          String qualifier) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Delete delete = new Delete(Bytes.toBytes(rowKey));
            delete.addColumn(Bytes.toBytes(familyName), Bytes.toBytes(qualifier));
            table.delete(delete);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }

}
</code></pre>
<h3 id="23-单元测试">2.3 单元测试</h3>
<p>以单元测试的方式对上面封装的 API 进行测试。</p>
<pre><code class="language-java">public class HBaseUtilsTest {

    private static final String TABLE_NAME = "class";
    private static final String TEACHER = "teacher";
    private static final String STUDENT = "student";

    @Test
    public void createTable() {
        // 新建表
        List&lt;String&gt; columnFamilies = Arrays.asList(TEACHER, STUDENT);
        boolean table = HBaseUtils.createTable(TABLE_NAME, columnFamilies);
        System.out.println("表创建结果:" + table);
    }

    @Test
    public void insertData() {
        List&lt;Pair&lt;String, String&gt;&gt; pairs1 = Arrays.asList(new Pair&lt;&gt;("name", "Tom"),
                new Pair&lt;&gt;("age", "22"),
                new Pair&lt;&gt;("gender", "1"));
        HBaseUtils.putRow(TABLE_NAME, "rowKey1", STUDENT, pairs1);

        List&lt;Pair&lt;String, String&gt;&gt; pairs2 = Arrays.asList(new Pair&lt;&gt;("name", "Jack"),
                new Pair&lt;&gt;("age", "33"),
                new Pair&lt;&gt;("gender", "2"));
        HBaseUtils.putRow(TABLE_NAME, "rowKey2", STUDENT, pairs2);

        List&lt;Pair&lt;String, String&gt;&gt; pairs3 = Arrays.asList(new Pair&lt;&gt;("name", "Mike"),
                new Pair&lt;&gt;("age", "44"),
                new Pair&lt;&gt;("gender", "1"));
        HBaseUtils.putRow(TABLE_NAME, "rowKey3", STUDENT, pairs3);
    }


    @Test
    public void getRow() {
        Result result = HBaseUtils.getRow(TABLE_NAME, "rowKey1");
        if (result != null) {
            System.out.println(Bytes
                    .toString(result.getValue(Bytes.toBytes(STUDENT), Bytes.toBytes("name"))));
        }

    }

    @Test
    public void getCell() {
        String cell = HBaseUtils.getCell(TABLE_NAME, "rowKey2", STUDENT, "age");
        System.out.println("cell age :" + cell);

    }

    @Test
    public void getScanner() {
        ResultScanner scanner = HBaseUtils.getScanner(TABLE_NAME);
        if (scanner != null) {
            scanner.forEach(result -&gt; System.out.println(Bytes.toString(result.getRow()) + "-&gt;" + Bytes
                    .toString(result.getValue(Bytes.toBytes(STUDENT), Bytes.toBytes("name")))));
            scanner.close();
        }
    }


    @Test
    public void getScannerWithFilter() {
        FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL);
        SingleColumnValueFilter nameFilter = new SingleColumnValueFilter(Bytes.toBytes(STUDENT),
                Bytes.toBytes("name"), CompareOperator.EQUAL, Bytes.toBytes("Jack"));
        filterList.addFilter(nameFilter);
        ResultScanner scanner = HBaseUtils.getScanner(TABLE_NAME, filterList);
        if (scanner != null) {
            scanner.forEach(result -&gt; System.out.println(Bytes.toString(result.getRow()) + "-&gt;" + Bytes
                    .toString(result.getValue(Bytes.toBytes(STUDENT), Bytes.toBytes("name")))));
            scanner.close();
        }
    }

    @Test
    public void deleteColumn() {
        boolean b = HBaseUtils.deleteColumn(TABLE_NAME, "rowKey2", STUDENT, "age");
        System.out.println("删除结果: " + b);
    }

    @Test
    public void deleteRow() {
        boolean b = HBaseUtils.deleteRow(TABLE_NAME, "rowKey2");
        System.out.println("删除结果: " + b);
    }

    @Test
    public void deleteTable() {
        boolean b = HBaseUtils.deleteTable(TABLE_NAME);
        System.out.println("删除结果: " + b);
    }
}
</code></pre>
<h2 id="三java-api-2x-基本使用">三、Java API 2.x 基本使用</h2>
<h4 id="31-新建maven工程导入项目依赖">3.1 新建Maven工程，导入项目依赖</h4>
<p>这里选取的 <code>HBase Client</code> 的版本为最新的 <code>2.1.4</code>。</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;
    &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;
    &lt;version&gt;2.1.4&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="32-api-的基本使用">3.2 API 的基本使用</h4>
<p>2.x 版本相比于 1.x 废弃了一部分方法，关于废弃的方法在源码中都会指明新的替代方法，比如，在 2.x 中创建表时：<code>HTableDescriptor</code> 和 <code>HColumnDescriptor</code> 等类都标识为废弃，取而代之的是使用 <code>TableDescriptorBuilder</code> 和 <code>ColumnFamilyDescriptorBuilder</code> 来定义表和列族。</p>
<div align="center">
<a href="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/deprecated.png" data-uk-lightbox><img width="700px" src="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/deprecated.png"></a>
</div>
<p>以下为 HBase 2.x 版本 Java API 的使用示例：</p>
<pre><code class="language-java">public class HBaseUtils {

    private static Connection connection;

    static {
        Configuration configuration = HBaseConfiguration.create();
        configuration.set("hbase.zookeeper.property.clientPort", "2181");
        // 如果是集群 则主机名用逗号分隔
        configuration.set("hbase.zookeeper.quorum", "hadoop001");
        try {
            connection = ConnectionFactory.createConnection(configuration);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * 创建 HBase 表
     *
     * @param tableName      表名
     * @param columnFamilies 列族的数组
     */
    public static boolean createTable(String tableName, List&lt;String&gt; columnFamilies) {
        try {
            HBaseAdmin admin = (HBaseAdmin) connection.getAdmin();
            if (admin.tableExists(TableName.valueOf(tableName))) {
                return false;
            }
            TableDescriptorBuilder tableDescriptor = TableDescriptorBuilder.newBuilder(TableName.valueOf(tableName));
            columnFamilies.forEach(columnFamily -&gt; {
                ColumnFamilyDescriptorBuilder cfDescriptorBuilder = ColumnFamilyDescriptorBuilder.newBuilder(Bytes.toBytes(columnFamily));
                cfDescriptorBuilder.setMaxVersions(1);
                ColumnFamilyDescriptor familyDescriptor = cfDescriptorBuilder.build();
                tableDescriptor.setColumnFamily(familyDescriptor);
            });
            admin.createTable(tableDescriptor.build());
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 删除 hBase 表
     *
     * @param tableName 表名
     */
    public static boolean deleteTable(String tableName) {
        try {
            HBaseAdmin admin = (HBaseAdmin) connection.getAdmin();
            // 删除表前需要先禁用表
            admin.disableTable(TableName.valueOf(tableName));
            admin.deleteTable(TableName.valueOf(tableName));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    /**
     * 插入数据
     *
     * @param tableName        表名
     * @param rowKey           唯一标识
     * @param columnFamilyName 列族名
     * @param qualifier        列标识
     * @param value            数据
     */
    public static boolean putRow(String tableName, String rowKey, String columnFamilyName, String qualifier,
                                 String value) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Put put = new Put(Bytes.toBytes(rowKey));
            put.addColumn(Bytes.toBytes(columnFamilyName), Bytes.toBytes(qualifier), Bytes.toBytes(value));
            table.put(put);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 插入数据
     *
     * @param tableName        表名
     * @param rowKey           唯一标识
     * @param columnFamilyName 列族名
     * @param pairList         列标识和值的集合
     */
    public static boolean putRow(String tableName, String rowKey, String columnFamilyName, List&lt;Pair&lt;String, String&gt;&gt; pairList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Put put = new Put(Bytes.toBytes(rowKey));
            pairList.forEach(pair -&gt; put.addColumn(Bytes.toBytes(columnFamilyName), Bytes.toBytes(pair.getKey()), Bytes.toBytes(pair.getValue())));
            table.put(put);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 根据 rowKey 获取指定行的数据
     *
     * @param tableName 表名
     * @param rowKey    唯一标识
     */
    public static Result getRow(String tableName, String rowKey) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Get get = new Get(Bytes.toBytes(rowKey));
            return table.get(get);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 获取指定行指定列 (cell) 的最新版本的数据
     *
     * @param tableName    表名
     * @param rowKey       唯一标识
     * @param columnFamily 列族
     * @param qualifier    列标识
     */
    public static String getCell(String tableName, String rowKey, String columnFamily, String qualifier) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Get get = new Get(Bytes.toBytes(rowKey));
            if (!get.isCheckExistenceOnly()) {
                get.addColumn(Bytes.toBytes(columnFamily), Bytes.toBytes(qualifier));
                Result result = table.get(get);
                byte[] resultValue = result.getValue(Bytes.toBytes(columnFamily), Bytes.toBytes(qualifier));
                return Bytes.toString(resultValue);
            } else {
                return null;
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 检索全表
     *
     * @param tableName 表名
     */
    public static ResultScanner getScanner(String tableName) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }


    /**
     * 检索表中指定数据
     *
     * @param tableName  表名
     * @param filterList 过滤器
     */

    public static ResultScanner getScanner(String tableName, FilterList filterList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            scan.setFilter(filterList);
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * 检索表中指定数据
     *
     * @param tableName   表名
     * @param startRowKey 起始 RowKey
     * @param endRowKey   终止 RowKey
     * @param filterList  过滤器
     */

    public static ResultScanner getScanner(String tableName, String startRowKey, String endRowKey,
                                           FilterList filterList) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Scan scan = new Scan();
            scan.withStartRow(Bytes.toBytes(startRowKey));
            scan.withStopRow(Bytes.toBytes(endRowKey));
            scan.setFilter(filterList);
            return table.getScanner(scan);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    /**
     * 删除指定行记录
     *
     * @param tableName 表名
     * @param rowKey    唯一标识
     */
    public static boolean deleteRow(String tableName, String rowKey) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Delete delete = new Delete(Bytes.toBytes(rowKey));
            table.delete(delete);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }


    /**
     * 删除指定行指定列
     *
     * @param tableName  表名
     * @param rowKey     唯一标识
     * @param familyName 列族
     * @param qualifier  列标识
     */
    public static boolean deleteColumn(String tableName, String rowKey, String familyName,
                                          String qualifier) {
        try {
            Table table = connection.getTable(TableName.valueOf(tableName));
            Delete delete = new Delete(Bytes.toBytes(rowKey));
            delete.addColumn(Bytes.toBytes(familyName), Bytes.toBytes(qualifier));
            table.delete(delete);
            table.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return true;
    }

}
</code></pre>
<h2 id="四正确连接hbase">四、正确连接Hbase</h2>
<p>在上面的代码中，在类加载时就初始化了 Connection 连接，并且之后的方法都是复用这个 Connection，这时我们可能会考虑是否可以使用自定义连接池来获取更好的性能表现？实际上这是没有必要的。</p>
<p>首先官方对于 <code>Connection</code> 的使用说明如下：</p>
<pre><code class="language-properties">Connection Pooling For applications which require high-end multithreaded   
access (e.g., web-servers or  application servers  that may serve many   
application threads in a single JVM), you can pre-create a Connection,   
as shown in the following example:

对于高并发多线程访问的应用程序（例如，在单个 JVM 中存在的为多个线程服务的 Web 服务器或应用程序服务器），  
您只需要预先创建一个 Connection。例子如下：

// Create a connection to the cluster.
Configuration conf = HBaseConfiguration.create();
try (Connection connection = ConnectionFactory.createConnection(conf);
     Table table = connection.getTable(TableName.valueOf(tablename))) {
  // use table as needed, the table returned is lightweight
}
</code></pre>
<p>之所以能这样使用，这是因为 Connection 并不是一个简单的 socket 连接，<a href="https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Connection.html">接口文档</a> 中对 Connection 的表述是：</p>
<pre><code class="language-properties">A cluster connection encapsulating lower level individual connections to actual servers and a  
connection to zookeeper.  Connections are instantiated through the ConnectionFactory class.  
The lifecycle of the connection is managed by the caller,  who has to close() the connection   
to release the resources. 

Connection 是一个集群连接，封装了与多台服务器（Matser/Region Server）的底层连接以及与 zookeeper 的连接。  
连接通过 ConnectionFactory  类实例化。连接的生命周期由调用者管理，调用者必须使用 close() 关闭连接以释放资源。
</code></pre>
<p>之所以封装这些连接，是因为 HBase 客户端需要连接三个不同的服务角色：</p>
<ul>
<li><strong>Zookeeper</strong> ：主要用于获取 <code>meta</code> 表的位置信息，Master 的信息；</li>
<li><strong>HBase Master</strong> ：主要用于执行 HBaseAdmin 接口的一些操作，例如建表等；</li>
<li><strong>HBase RegionServer</strong> ：用于读、写数据。</li>
</ul>
<div align="center">
<a href="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/hbase-arc.png" data-uk-lightbox><img width="700px" src="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/hbase-arc.png"></a>
</div>
<p>Connection 对象和实际的 Socket 连接之间的对应关系如下图：</p>
<div align="center">
<a href="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/hbase-connection.png" data-uk-lightbox><img width="700px" src="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/hbase-connection.png"></a>
</div>
<blockquote>
<p>上面两张图片引用自博客：<a href="https://yq.aliyun.com/articles/581702?spm=a2c4e.11157919.spm-cont-list.1.146c27aeFxoMsN %E8%BF%9E%E6%8E%A5HBase%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF">连接 HBase 的正确姿势</a></p>
</blockquote>
<p>在 HBase 客户端代码中，真正对应 Socket 连接的是 <code>RpcConnection</code> 对象。HBase 使用 <code>PoolMap</code> 这种数据结构来存储客户端到 HBase 服务器之间的连接。<code>PoolMap</code> 的内部有一个 <code>ConcurrentHashMap</code> 实例，其 key 是 <code>ConnectionId</code>(封装了服务器地址和用户 ticket)，value 是一个 <code>RpcConnection</code> 对象的资源池。当 HBase 需要连接一个服务器时，首先会根据 <code>ConnectionId</code> 找到对应的连接池，然后从连接池中取出一个连接对象。</p>
<pre><code class="language-java">@InterfaceAudience.Private
public class PoolMap&lt;K, V&gt; implements Map&lt;K, V&gt; {
  private PoolType poolType;

  private int poolMaxSize;

  private Map&lt;K, Pool&lt;V&gt;&gt; pools = new ConcurrentHashMap&lt;&gt;();

  public PoolMap(PoolType poolType) {
    this.poolType = poolType;
  }
  .....
</code></pre>
<p>HBase 中提供了三种资源池的实现，分别是 <code>Reusable</code>，<code>RoundRobin</code> 和 <code>ThreadLocal</code>。具体实现可以通 <code>hbase.client.ipc.pool.type</code> 配置项指定，默认为 <code>Reusable</code>。连接池的大小也可以通过 <code>hbase.client.ipc.pool.size</code> 配置项指定，默认为 1，即每个 Server 1 个连接。也可以通过修改配置实现：</p>
<pre><code class="language-java">config.set("hbase.client.ipc.pool.type",...);
config.set("hbase.client.ipc.pool.size",...);
connection = ConnectionFactory.createConnection(config);
</code></pre>
<p>由此可以看出 HBase 中 Connection 类已经实现了对连接的管理功能，所以我们不必在 Connection 上在做额外的管理。</p>
<p>另外，Connection 是线程安全的，但 Table 和 Admin 却不是线程安全的，因此正确的做法是一个进程共用一个 Connection 对象，而在不同的线程中使用单独的 Table 和 Admin 对象。Table 和 Admin 的获取操作 <code>getTable()</code> 和 <code>getAdmin()</code> 都是轻量级，所以不必担心性能的消耗，同时建议在使用完成后显示的调用 <code>close()</code> 方法来关闭它们。</p>
<h2 id="参考资料">参考资料</h2>
<ol>
<li><a href="https://yq.aliyun.com/articles/581702?spm=a2c4e.11157919.spm-cont-list.1.146c27aeFxoMsN %E8%BF%9E%E6%8E%A5HBase%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF">连接 HBase 的正确姿势</a></li>
<li><a href="http://hbase.apache.org/book.htm">Apache HBase ™ Reference Guide</a></li>
</ol>
<div align="center">
<a href="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/weixin-desc.png" data-uk-lightbox><img src="https://gitee.com/heibaiying/BigData-Notes/raw/master/pictures/weixin-desc.png"></a>
</div>
</div>
<hr class="uk-article-divider">
<div class="uk-block uk-block-muted uk-padding-top-remove uk-padding-bottom-remove uk-margin-large-top  book-recommend-wrap">
<div class="uk-margin-top uk-margin-bottom uk-margin-left uk-margin-right">
<div class="uk-margin uk-text-muted "><i class="uk-icon-outdent uk-icon-justify uk-margin-small-right"></i>书籍推荐</div>
<div class="books">
<ul class="uk-book-list">
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/108/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/storm_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/108/index.html">Apache Storm 官方文档中文版</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="storm">storm</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">74页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 3个">3</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/88/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/spring_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/88/index.html">Spring Data JPA 参考指南 中文版</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/56.html">ityouknow</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="spring">spring</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">13页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月29日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 92个">92</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/60/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/react_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/60/index.html">React 入门教程</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/36.html">hulufei</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="react">react</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">23页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年6月5日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 328个">328</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/116/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/code_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/116/index.html">Protocol Buffer 3学习笔记</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/62.html">tzivanmoe</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="code">code</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">37页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年7月1日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 0个">0</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/141/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/code_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/141/index.html">各种程序开发相关的Awesome开源项目清单</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/74.html">sindresorhus</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="code">code</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">25页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2019年3月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 102911个">102911</span>
</div>
</div>
</div>
</li>
<hr>
<li>
<div class="uk-book-item">
<div class="uk-book-header uk-clearfix">
<a href="../../../book/27/index.html">
<img class="uk-book-cover" src="../../../static/icons/48/tensorflow_48.png" height="48px" alt="">
</a>
<h4 class="uk-book-title uk-margin-small-bottom"><a href="../../../book/27/index.html">Sklearn 与 TensorFlow 机器学习实用指南</a></h4>
<div class="uk-book-meta  uk-text-middle uk-float-left">
<a class="uk-margin-small-right  uk-text-middle user-name " href="../../../user/18.html">ApacheCN</a>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-badge uk-badge-notification  book-subject" title="tensorflow">tensorflow</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">20页</span>
<span class="uk-margin-small-right  uk-text-middle">•</span>
<span class="uk-margin-small-right  uk-text-middle">2018年5月3日</span>
</div>
<div class="uk-book-tip uk-float-right  uk-text-middle">
<span class="uk-badge uk-badge-notification" title="github star 916个">916</span>
</div>
</div>
</div>
</li>
<hr>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="tm-navbar uk-navbar uk-navbar-attached reader-nav">
<div class="uk-float-left uk-margin-small-top">
<a href="javascript:;" title="目录菜单" class="show-menu  uk-icon-hover  uk-icon-align-justify uk-margin-right"></a>
<div data-uk-dropdown="{mode:'click',pos:'bottom-left'}" class="font-setting-wrap">
<a class="uk-icon-hover uk-icon-font uk-margin-right" aria-label="字体设置" href="javascript:;"></a>
<div class="uk-dropdown dropdown-menu">
<div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-reduce">小字</button>
<button class="uk-button-link button size-2 font-enlarge">大字</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-2 font-1 ">宋体</button>
<button class="uk-button-link button size-2 font-2 ">黑体</button>
</div>
<hr>
<div class="buttons uk-clearfix">
<button class="uk-button-link button size-3 color-theme-sun "><i class="uk-icon-sun-o"></i>白天</button>
<button class="uk-button-link button size-3 color-theme-eye "><i class="uk-icon-eye"></i>护眼</button>
<button class="uk-button-link button size-3 color-theme-moon "><i class="uk-icon-moon-o"></i>夜晚</button></div>
</div>
</div>
<a class="logo uk-margin-right" href="../../../" title="返回首页"><img class="" src="../../../static/components/images/icon_32.png" /></a>
</div>
<div class="uk-navbar-flip  uk-hidden-small">
<div id="share-box"></div>
</div>
</nav>
<div id="menu-id" class="uk-offcanvas reader-offcanvas">
<div class="uk-offcanvas-bar">
<ul class="book-menu-bar uk-nav uk-nav-offcanvas" data-uk-nav>
<li>
<a href="../../../book/198/index.html" data-book-page-rel-url="index.html" data-book-page-id="0" title="封面">封面</a>
</li>
<li>
<a class="pjax" href="../../../book/198/readme.html" data-book-page-rel-url="readme.html" data-book-page-id="0" title="简介">简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/大数据学习路线.html" title="大数据学习路线" data-book-page-rel-url="notes/大数据学习路线.html" data-book-page-id="13354">大数据学习路线</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/大数据技术栈思维导图.html" title="大数据技术栈思维导图" data-book-page-rel-url="notes/大数据技术栈思维导图.html" data-book-page-id="13355">大数据技术栈思维导图</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/大数据常用软件安装指南.html" title="大数据常用软件安装指南" data-book-page-rel-url="notes/大数据常用软件安装指南.html" data-book-page-id="13356">大数据常用软件安装指南</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hadoop-HDFS.html" title="分布式文件存储系统 —— HDFS" data-book-page-rel-url="notes/Hadoop-HDFS.html" data-book-page-id="13357">分布式文件存储系统 —— HDFS</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hadoop-MapReduce.html" title="分布式计算框架 —— MapReduce" data-book-page-rel-url="notes/Hadoop-MapReduce.html" data-book-page-id="13358">分布式计算框架 —— MapReduce</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hadoop-YARN.html" title="集群资源管理器 —— YARN" data-book-page-rel-url="notes/Hadoop-YARN.html" data-book-page-id="13359">集群资源管理器 —— YARN</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Hadoop单机环境搭建.html" title="Hadoop 单机伪集群环境搭建" data-book-page-rel-url="notes/installation/Hadoop单机环境搭建.html" data-book-page-id="13360">Hadoop 单机伪集群环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Hadoop集群环境搭建.html" title="Hadoop 集群环境搭建" data-book-page-rel-url="notes/installation/Hadoop集群环境搭建.html" data-book-page-id="13361">Hadoop 集群环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/HDFS常用Shell命令.html" title="HDFS 常用 Shell 命令" data-book-page-rel-url="notes/HDFS常用Shell命令.html" data-book-page-id="13362">HDFS 常用 Shell 命令</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/HDFS-Java-API.html" title="HDFS Java API 的使用" data-book-page-rel-url="notes/HDFS-Java-API.html" data-book-page-id="13363">HDFS Java API 的使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/基于Zookeeper搭建Hadoop高可用集群.html" title="基于 Zookeeper 搭建 Hadoop 高可用集群" data-book-page-rel-url="notes/installation/基于Zookeeper搭建Hadoop高可用集群.html" data-book-page-id="13364">基于 Zookeeper 搭建 Hadoop 高可用集群</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive简介及核心概念.html" title="Hive 简介及核心概念" data-book-page-rel-url="notes/Hive简介及核心概念.html" data-book-page-id="13365">Hive 简介及核心概念</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Linux环境下Hive的安装部署.html" title="Linux 环境下 Hive 的安装部署" data-book-page-rel-url="notes/installation/Linux环境下Hive的安装部署.html" data-book-page-id="13366">Linux 环境下 Hive 的安装部署</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/HiveCLI和Beeline命令行的基本使用.html" title="Hive CLI 和 Beeline 命令行的基本使用" data-book-page-rel-url="notes/HiveCLI和Beeline命令行的基本使用.html" data-book-page-id="13367">Hive CLI 和 Beeline 命令行的基本使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive常用DDL操作.html" title="Hive 常用 DDL 操作" data-book-page-rel-url="notes/Hive常用DDL操作.html" data-book-page-id="13368">Hive 常用 DDL 操作</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive分区表和分桶表.html" title="Hive 分区表和分桶表" data-book-page-rel-url="notes/Hive分区表和分桶表.html" data-book-page-id="13369">Hive 分区表和分桶表</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive视图和索引.html" title="Hive 视图和索引" data-book-page-rel-url="notes/Hive视图和索引.html" data-book-page-id="13370">Hive 视图和索引</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive常用DML操作.html" title="Hive 常用 DML 操作" data-book-page-rel-url="notes/Hive常用DML操作.html" data-book-page-id="13371">Hive 常用 DML 操作</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hive数据查询详解.html" title="Hive 数据查询详解" data-book-page-rel-url="notes/Hive数据查询详解.html" data-book-page-id="13372">Hive 数据查询详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark简介.html" title="Spark 简介" data-book-page-rel-url="notes/Spark简介.html" data-book-page-id="13373">Spark 简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Spark开发环境搭建.html" title="Spark 开发环境搭建" data-book-page-rel-url="notes/installation/Spark开发环境搭建.html" data-book-page-id="13374">Spark 开发环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_RDD.html" title="弹性式数据集 RDD" data-book-page-rel-url="notes/Spark_RDD.html" data-book-page-id="13375">弹性式数据集 RDD</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Transformation和Action算子.html" title="RDD 常用算子详解" data-book-page-rel-url="notes/Spark_Transformation和Action算子.html" data-book-page-id="13376">RDD 常用算子详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark部署模式与作业提交.html" title="Spark 运行模式与作业提交" data-book-page-rel-url="notes/Spark部署模式与作业提交.html" data-book-page-id="13377">Spark 运行模式与作业提交</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark累加器与广播变量.html" title="Spark 累加器与广播变量" data-book-page-rel-url="notes/Spark累加器与广播变量.html" data-book-page-id="13378">Spark 累加器与广播变量</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Spark集群环境搭建.html" title="基于 Zookeeper 搭建 Spark 高可用集群" data-book-page-rel-url="notes/installation/Spark集群环境搭建.html" data-book-page-id="13379">基于 Zookeeper 搭建 Spark 高可用集群</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/SparkSQL_Dataset和DataFrame简介.html" title="DateFrame 和 DataSet" data-book-page-rel-url="notes/SparkSQL_Dataset和DataFrame简介.html" data-book-page-id="13380">DateFrame 和 DataSet</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Structured_API的基本使用.html" title="Structured API 的基本使用" data-book-page-rel-url="notes/Spark_Structured_API的基本使用.html" data-book-page-id="13381">Structured API 的基本使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/SparkSQL外部数据源.html" title="Spark SQL 外部数据源" data-book-page-rel-url="notes/SparkSQL外部数据源.html" data-book-page-id="13382">Spark SQL 外部数据源</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/SparkSQL常用聚合函数.html" title="Spark SQL 常用聚合函数" data-book-page-rel-url="notes/SparkSQL常用聚合函数.html" data-book-page-id="13383">Spark SQL 常用聚合函数</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/SparkSQL联结操作.html" title="Spark SQL JOIN 操作" data-book-page-rel-url="notes/SparkSQL联结操作.html" data-book-page-id="13384">Spark SQL JOIN 操作</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Streaming与流处理.html" title="Spark Streaming 简介" data-book-page-rel-url="notes/Spark_Streaming与流处理.html" data-book-page-id="13385">Spark Streaming 简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Streaming基本操作.html" title="Spark Streaming 基本操作" data-book-page-rel-url="notes/Spark_Streaming基本操作.html" data-book-page-id="13386">Spark Streaming 基本操作</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Streaming整合Flume.html" title="Spark Streaming 整合 Flume" data-book-page-rel-url="notes/Spark_Streaming整合Flume.html" data-book-page-id="13387">Spark Streaming 整合 Flume</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spark_Streaming整合Kafka.html" title="Spark Streaming 整合 Kafka" data-book-page-rel-url="notes/Spark_Streaming整合Kafka.html" data-book-page-id="13388">Spark Streaming 整合 Kafka</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm和流处理简介.html" title="Storm 和流处理简介" data-book-page-rel-url="notes/Storm和流处理简介.html" data-book-page-id="13389">Storm 和流处理简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm核心概念详解.html" title="Storm 核心概念详解" data-book-page-rel-url="notes/Storm核心概念详解.html" data-book-page-id="13390">Storm 核心概念详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Storm单机环境搭建.html" title="Storm 单机环境搭建" data-book-page-rel-url="notes/installation/Storm单机环境搭建.html" data-book-page-id="13391">Storm 单机环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Storm集群环境搭建.html" title="Storm 集群环境搭建" data-book-page-rel-url="notes/installation/Storm集群环境搭建.html" data-book-page-id="13392">Storm 集群环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm编程模型详解.html" title="Storm 编程模型详解" data-book-page-rel-url="notes/Storm编程模型详解.html" data-book-page-id="13393">Storm 编程模型详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm三种打包方式对比分析.html" title="Storm 项目三种打包方式对比分析" data-book-page-rel-url="notes/Storm三种打包方式对比分析.html" data-book-page-id="13394">Storm 项目三种打包方式对比分析</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm集成Redis详解.html" title="Storm 集成 Redis 详解" data-book-page-rel-url="notes/Storm集成Redis详解.html" data-book-page-id="13395">Storm 集成 Redis 详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm集成HBase和HDFS.html" title="Storm 集成 HDFS/HBase" data-book-page-rel-url="notes/Storm集成HBase和HDFS.html" data-book-page-id="13396">Storm 集成 HDFS/HBase</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Storm集成Kakfa.html" title="Storm 集成 Kafka" data-book-page-rel-url="notes/Storm集成Kakfa.html" data-book-page-id="13397">Storm 集成 Kafka</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink核心概念综述.html" title="Flink 核心概念综述" data-book-page-rel-url="notes/Flink核心概念综述.html" data-book-page-id="13398">Flink 核心概念综述</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink开发环境搭建.html" title="Flink 开发环境搭建" data-book-page-rel-url="notes/Flink开发环境搭建.html" data-book-page-id="13399">Flink 开发环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink_Data_Source.html" title="Flink Data Source" data-book-page-rel-url="notes/Flink_Data_Source.html" data-book-page-id="13400">Flink Data Source</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink_Data_Transformation.html" title="Flink Data Transformation" data-book-page-rel-url="notes/Flink_Data_Transformation.html" data-book-page-id="13401">Flink Data Transformation</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink_Data_Sink.html" title="Flink Data Sink" data-book-page-rel-url="notes/Flink_Data_Sink.html" data-book-page-id="13402">Flink Data Sink</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink_Windows.html" title="Flink 窗口模型" data-book-page-rel-url="notes/Flink_Windows.html" data-book-page-id="13403">Flink 窗口模型</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flink状态管理与检查点机制.html" title="Flink 状态管理与检查点机制" data-book-page-rel-url="notes/Flink状态管理与检查点机制.html" data-book-page-id="13404">Flink 状态管理与检查点机制</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Flink_Standalone_Cluster.html" title="Flink Standalone 集群部署" data-book-page-rel-url="notes/installation/Flink_Standalone_Cluster.html" data-book-page-id="13405">Flink Standalone 集群部署</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase简介.html" title="Hbase 简介" data-book-page-rel-url="notes/Hbase简介.html" data-book-page-id="13406">Hbase 简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase系统架构及数据结构.html" title="HBase 系统架构及数据结构" data-book-page-rel-url="notes/Hbase系统架构及数据结构.html" data-book-page-id="13407">HBase 系统架构及数据结构</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/HBase单机环境搭建.html" title="HBase 基本环境搭建 (Standalone /pseudo-distributed mode)" data-book-page-rel-url="notes/installation/HBase单机环境搭建.html" data-book-page-id="13408">HBase 基本环境搭建 (Standalone /pseudo-distributed mode)</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/HBase集群环境搭建.html" title="HBase 集群环境搭建" data-book-page-rel-url="notes/installation/HBase集群环境搭建.html" data-book-page-id="13409">HBase 集群环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase_Shell.html" title="HBase 常用 Shell 命令" data-book-page-rel-url="notes/Hbase_Shell.html" data-book-page-id="13410">HBase 常用 Shell 命令</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase_Java_API.html" title="HBase Java API" data-book-page-rel-url="notes/Hbase_Java_API.html" data-book-page-id="13411">HBase Java API</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase过滤器详解.html" title="HBase 过滤器详解" data-book-page-rel-url="notes/Hbase过滤器详解.html" data-book-page-id="13412">HBase 过滤器详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase协处理器详解.html" title="HBase 协处理器详解" data-book-page-rel-url="notes/Hbase协处理器详解.html" data-book-page-id="13413">HBase 协处理器详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase容灾与备份.html" title="HBase 容灾与备份" data-book-page-rel-url="notes/Hbase容灾与备份.html" data-book-page-id="13414">HBase 容灾与备份</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Hbase的SQL中间层_Phoenix.html" title="HBase的 SQL 中间层 —— Phoenix" data-book-page-rel-url="notes/Hbase的SQL中间层_Phoenix.html" data-book-page-id="13415">HBase的 SQL 中间层 —— Phoenix</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Spring+Mybtais+Phoenix整合.html" title="Spring/Spring Boot 整合 Mybatis + Phoenix" data-book-page-rel-url="notes/Spring+Mybtais+Phoenix整合.html" data-book-page-id="13416">Spring/Spring Boot 整合 Mybatis + Phoenix</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Kafka简介.html" title="Kafka 简介" data-book-page-rel-url="notes/Kafka简介.html" data-book-page-id="13417">Kafka 简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/基于Zookeeper搭建Kafka高可用集群.html" title="基于 Zookeeper 搭建 Kafka 高可用集群" data-book-page-rel-url="notes/installation/基于Zookeeper搭建Kafka高可用集群.html" data-book-page-id="13418">基于 Zookeeper 搭建 Kafka 高可用集群</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Kafka生产者详解.html" title="Kafka 生产者详解" data-book-page-rel-url="notes/Kafka生产者详解.html" data-book-page-id="13419">Kafka 生产者详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Kafka消费者详解.html" title="Kafka 消费者详解" data-book-page-rel-url="notes/Kafka消费者详解.html" data-book-page-id="13420">Kafka 消费者详解</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Kafka深入理解分区副本机制.html" title="深入理解 Kafka 副本机制" data-book-page-rel-url="notes/Kafka深入理解分区副本机制.html" data-book-page-id="13421">深入理解 Kafka 副本机制</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Zookeeper简介及核心概念.html" title="Zookeeper 简介及核心概念" data-book-page-rel-url="notes/Zookeeper简介及核心概念.html" data-book-page-id="13422">Zookeeper 简介及核心概念</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Zookeeper单机环境和集群环境搭建.html" title="Zookeeper 单机环境和集群环境搭建" data-book-page-rel-url="notes/installation/Zookeeper单机环境和集群环境搭建.html" data-book-page-id="13423">Zookeeper 单机环境和集群环境搭建</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Zookeeper常用Shell命令.html" title="Zookeeper 常用 Shell 命令" data-book-page-rel-url="notes/Zookeeper常用Shell命令.html" data-book-page-id="13424">Zookeeper 常用 Shell 命令</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Zookeeper_Java客户端Curator.html" title="Zookeeper Java 客户端 —— Apache Curator" data-book-page-rel-url="notes/Zookeeper_Java客户端Curator.html" data-book-page-id="13425">Zookeeper Java 客户端 —— Apache Curator</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Zookeeper_ACL权限控制.html" title="Zookeeper  ACL 权限控制" data-book-page-rel-url="notes/Zookeeper_ACL权限控制.html" data-book-page-id="13426">Zookeeper ACL 权限控制</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flume简介及基本使用.html" title="Flume 简介及基本使用" data-book-page-rel-url="notes/Flume简介及基本使用.html" data-book-page-id="13427">Flume 简介及基本使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Linux下Flume的安装.html" title="Linux 环境下 Flume 的安装部署" data-book-page-rel-url="notes/installation/Linux下Flume的安装.html" data-book-page-id="13428">Linux 环境下 Flume 的安装部署</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Flume整合Kafka.html" title="Flume 整合 Kafka" data-book-page-rel-url="notes/Flume整合Kafka.html" data-book-page-id="13429">Flume 整合 Kafka</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Sqoop简介与安装.html" title="Sqoop 简介与安装" data-book-page-rel-url="notes/Sqoop简介与安装.html" data-book-page-id="13430">Sqoop 简介与安装</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Sqoop基本使用.html" title="Sqoop 的基本使用" data-book-page-rel-url="notes/Sqoop基本使用.html" data-book-page-id="13431">Sqoop 的基本使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Azkaban简介.html" title="Azkaban 简介" data-book-page-rel-url="notes/Azkaban简介.html" data-book-page-id="13432">Azkaban 简介</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/installation/Azkaban_3.x_编译及部署.html" title="Azkaban3.x 编译及部署" data-book-page-rel-url="notes/installation/Azkaban_3.x_编译及部署.html" data-book-page-id="13433">Azkaban3.x 编译及部署</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Azkaban_Flow_1.0_的使用.html" title="Azkaban Flow 1.0 的使用" data-book-page-rel-url="notes/Azkaban_Flow_1.0_的使用.html" data-book-page-id="13434">Azkaban Flow 1.0 的使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Azkaban_Flow_2.0_的使用.html" title="Azkaban Flow 2.0 的使用" data-book-page-rel-url="notes/Azkaban_Flow_2.0_的使用.html" data-book-page-id="13435">Azkaban Flow 2.0 的使用</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala简介及开发环境配置.html" title="Scala 简介及开发环境配置" data-book-page-rel-url="notes/Scala简介及开发环境配置.html" data-book-page-id="13436">Scala 简介及开发环境配置</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala基本数据类型和运算符.html" title="基本数据类型和运算符" data-book-page-rel-url="notes/Scala基本数据类型和运算符.html" data-book-page-id="13437">基本数据类型和运算符</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala流程控制语句.html" title="流程控制语句" data-book-page-rel-url="notes/Scala流程控制语句.html" data-book-page-id="13438">流程控制语句</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala数组.html" title="数组 —— Array" data-book-page-rel-url="notes/Scala数组.html" data-book-page-id="13439">数组 —— Array</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala集合类型.html" title="集合类型综述" data-book-page-rel-url="notes/Scala集合类型.html" data-book-page-id="13440">集合类型综述</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala列表和集.html" title="常用集合类型之 —— List & Set" data-book-page-rel-url="notes/Scala列表和集.html" data-book-page-id="13441">常用集合类型之 —— List & Set</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala映射和元组.html" title="常用集合类型之 —— Map & Tuple" data-book-page-rel-url="notes/Scala映射和元组.html" data-book-page-id="13442">常用集合类型之 —— Map & Tuple</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala类和对象.html" title="类和对象" data-book-page-rel-url="notes/Scala类和对象.html" data-book-page-id="13443">类和对象</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala继承和特质.html" title="继承和特质" data-book-page-rel-url="notes/Scala继承和特质.html" data-book-page-id="13444">继承和特质</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala函数和闭包.html" title="函数 & 闭包 & 柯里化" data-book-page-rel-url="notes/Scala函数和闭包.html" data-book-page-id="13445">函数 & 闭包 & 柯里化</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala模式匹配.html" title="模式匹配" data-book-page-rel-url="notes/Scala模式匹配.html" data-book-page-id="13446">模式匹配</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala类型参数.html" title="类型参数" data-book-page-rel-url="notes/Scala类型参数.html" data-book-page-id="13447">类型参数</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/Scala隐式转换和隐式参数.html" title="隐式转换和隐式参数" data-book-page-rel-url="notes/Scala隐式转换和隐式参数.html" data-book-page-id="13448">隐式转换和隐式参数</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/大数据应用常用打包方式.html" title="大数据应用常用打包方式" data-book-page-rel-url="notes/大数据应用常用打包方式.html" data-book-page-id="13449">大数据应用常用打包方式</a>
</li>
<li>
<a class="pjax" href="../../../book/198/notes/资料分享与工具推荐.html" title="资料分享与开发工具推荐" data-book-page-rel-url="notes/资料分享与工具推荐.html" data-book-page-id="13450">资料分享与开发工具推荐</a>
</li>
</ul>
</div>
</div>
<script src="https://cdn.staticfile.net/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../../../static/components/uikit-2.27.5/js/uikit.reader.js"></script>
<script type="text/javascript" src="../../../static/components/social-share/social-share.min.js"></script>
<script>(function(){var bp =document.createElement('script');var curProtocol =window.location.protocol.split(':')[0];if (curProtocol ==='https') {bp.src ='https://zz.bdstatic.com/linksubmit/push.js';}
else {bp.src ='http://push.zhanzhang.baidu.com/push.js';}
var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
<script src="https://cdn.staticfile.net/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.staticfile.net/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.staticfile.net/uikit/2.27.5/js/components/lightbox.min.js"></script>
<link rel="dns-prefetch" href="../../..//cdn.mathjax.org" />
<script type="text/x-mathjax-config">
 function initMathJax() {
    var mathId = $("book-content-section")[0];
    MathJax.Hub.Config({
        tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a']},
        showProcessingMessages: false,
        messageStyle: "none"
    });
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,mathId]);
 };
initMathJax();
</script>
<script src='https://cdn.staticfile.net/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
<style>
	.MathJax_Display{display:inline!important;}
</style>
<script type="text/javascript" src="../../../static/components/js/reader.js"></script>
<script type="text/javascript">var bookId =198;var bookPageId =13411;var bookPageRelUrl ='notes/Hbase_Java_API.html';</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38429407-1"></script>
<script>window.dataLayer =window.dataLayer ||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-38429407-1');</script>
<script>var _hmt =_hmt ||[];(function() {var hm =document.createElement("script");hm.src ="https://hm.baidu.com/hm.js?f28e71bd2b5dee3439448dca9f534107";var s =document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script>
</body>
</html>